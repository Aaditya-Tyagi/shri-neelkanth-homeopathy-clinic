!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("webBiLogger",[],e):"object"==typeof exports?exports.webBiLogger=e():t.webBiLogger=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=8)}([function(t,e,n){"use strict";var r,o,i;n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),function(t){t.Auto="auto",t.PostMessage="postMessage",t.Fetch="fetch"}(r||(r={})),function(t){t.Essential="essential",t.Functional="functional",t.Analytics="analytics"}(o||(o={})),function(t){t[t.Unsupported=0]="Unsupported"}(i||(i={}))},function(t,e,n){"use strict";var r=n(9),o=n(6),i=n(7),u=n(5);t.exports.BiLoggerFactory=r,t.exports.BiLogger=o,t.exports.BiLoggerManager=i.BiLoggerManager,t.exports.factory=function(){return new r},t.exports.manager=i.manager,t.exports.createBatchQueue=function(){return new u}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var r={policy:"getCurrentConsentPolicy",header:"_getConsentPolicyHeader",isMethod:!0},o={policy:"consentPolicy",header:"consentPolicyHeader",isMethod:!1},i={essential:!0,dataToThirdParty:!0,advertising:!0,functional:!0,analytics:!0}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var r,o=n(2);function i(){return window}function u(){return self}function s(){return t}function a(){return globalThis}function c(t){var e;void 0===t&&(t=void 0),t&&(r=t),r||t||([a,s,u,i].forEach((function(t){try{r||(r=t())}catch(t){}})),r=r);try{"object"==typeof r.commonConfig&&r.commonConfig.consentPolicy&&(e=f(r.commonConfig,o.c)),e||"object"!=typeof r.consentPolicyManager||(e=f(r.consentPolicyManager,o.b)),e||"object"!=typeof r.Wix||"object"!=typeof r.Wix.Utils||"function"!=typeof r.Wix.Utils.getCurrentConsentPolicy||(e=f(r.Wix.Utils,o.b))}catch(t){}return e}function f(t,e){return{getCurrentConsentPolicy:function(){var n=t[e.policy];return e.isMethod?n():n},_getConsentPolicyHeader:function(){var n=t[e.header];return e.isMethod?n():n},deleteReference:!e.isMethod}}}).call(this,n(16))},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name=n.constructor.name,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports.defined=function(t,e){if(void 0===t)throw new o(e)},t.exports.object=function(t,e){if(void 0!==t&&("object"!==(void 0===t?"undefined":r(t))||Array.isArray(t)||null===t))throw new o(e)},t.exports.ok=function(t,e){if(!t)throw new o(e)},t.exports.func=function(t,e){if(void 0!==t&&"function"!=typeof t)throw new o(e)},t.exports.boolean=function(t,e){if(void 0!==t&&"boolean"!=typeof t)throw new o(e)},t.exports.number=function(t,e){if(void 0!==t&&"number"!=typeof t)throw new o(e)},t.exports.array=function(t,e){if("function"==typeof Array.isArray){if(!Array.isArray(t))throw new o(e)}else if("[object Array]"!==Object.prototype.toString.call(t))throw new o(e)},t.exports.AssertionError=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var u=n(13),s=n(14),a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initilized=!1}return r(t,[{key:"_reset",value:function(){var t=this;this._startTime=Date.now(),this._resolve=null,this._promise=new Promise((function(e){return t._resolve=e}))}},{key:"init",value:function(t,e){var n=this,r=t.delayMs,o=t.maxBatchSize,i=t.useThrottle,a=t.optimizeBatch;this._initilized||(this._maxBatchSize=o,this._optimizeBatch=a,this._queue=[],this._flushHandler=e,this._flushDebounced=i?s((function(){return n.flush()}),r):u((function(){return n.flush()}),r),this._initilized=!0,this._reset())}},{key:"flush",value:function(){if(!this._queue.length)return Promise.resolve();var t=this._queue.splice(0,this._queue.length),e=this._resolve,n=this._startTime;this._reset();var r=function(t,e){return{dt:Date.now()-e,e:t,g:{}}}(t,n);return this._optimizeBatch&&(r=function(t){var e={},n=t.e.length,r=t.e.map((function(t){var n=Object.keys(t.f).map((function(n){var r=t.f[n],o=n+"|"+r;return e[o]=e[o]||0,e[o]++,[n,r,o]}));return i({},t,{f:n})})),u={};return r=r.map((function(t){var r=t.f.reduce((function(t,r){var i=o(r,3),s=i[0],a=i[1],c=i[2];return e[c]===n?u[s]=a:t[s]=a,t}),{});return i({},t,{f:r})})),i({},t,{e:r,g:u})}(r)),this._flushHandler(r).then(e)}},{key:"feed",value:function(t,e){return this._queue.push(function(t,e,n){return{dt:Date.now()-n,f:t,context:e}}(t,e,this._startTime)),this._queue.length===this._maxBatchSize?this.flush():(this._flushDebounced(),this._promise)}}]),t}();t.exports=a},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(4),u=n(10),s=u.mapValues,a=u.filterValues,c=n(11),f=n(12),l=n(5),h=n(15),d=h.shouldMuteByCategory,p=h.shouldMuteNonEssentials,y=h.getPolicy,v=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=e.publishers,this._validators=e.validators||[],this._defaults=e.defaults,this._ownDefaults={},this._events=e.events||{},this._context=n||{},this._defaultValueTimeout=e.defaultValueTimeout||5e3,this._defaultContinueOnFail=e.defaultContinueOnFail||!1,this._onPublisherFailHandler=e.onPublisherFailHandler||t._defaultPublisherFailHandler,this._isMuted=e.isMuted||function(){return!1},this._eventTransformer=e.eventTransformer||function(t){return t},this._payloadTransformer=e.payloadTransformer||function(t){return t},this._consentPolicyGetter=e.consentPolicyGetter||function(){return null},this._nonEssentialDefaults=e.nonEssentialDefaults||{},this._maxBatchSize=e.maxBatchSize||100,this._globalBatchQueue=e.globalBatchQueue}return o(t,[{key:"report",value:function(t){i.defined(t,"Data must be provided"),i.object(t,"Data must be an object");var e=t.src,n=t.evid,o=t.params,u=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["src","evid","params"]);return this.log(r({src:e,evid:n},o),u)}},{key:"log",value:function(t,e,n){var o=this;i.defined(t,"Event object or event key must be provided.");var u=this._extractEventAndContext(t,e,n),s=u.event,a=u.context,c=y(this._consentPolicyGetter),f=r({},this._context,a);if(this._isMuted()||d(c,f.category))return Promise.resolve();if(f.useBatch){var l=this._initQueue(f,c),h=function(t){var e=o._eventTransformer(t,f);return l.feed(e,f)};if(this._globalBatchQueue)return this._getDefaults(this._defaults).then((function(t){var e=r({},t,o._getDynamicNonEssentialDefaults(c),o._getStaticNonEssentialDefaults(c),s,o._getPolicyFields(c,f.category));return h(e)}));var p=r({},this._getDynamicDefaults(this._defaults),this._getDynamicNonEssentialDefaults(c),s,this._getPolicyFields(c,f.category));return h(p)}return this._getDefaults(this._defaults).then((function(t){var e=Object.assign(t,o._getDynamicNonEssentialDefaults(c),o._getStaticNonEssentialDefaults(c),s,o._getPolicyFields(c,f.category));if(!(0===o._validators.length||o._validators.some((function(t){return t.match(e)&&(t.execute(e)||!0)}))))throw new Error("No validator accepted the event. Source: "+e.src+" Evid: "+(e.evid||e.evtId));var n=o._eventTransformer(e,f);return n=o._payloadTransformer(n,f),o._send(n,f)}))}},{key:"flush",value:function(){return this._queue?this._queue.flush():Promise.resolve()}},{key:"updateDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),Object.assign(this._ownDefaults,t),this}},{key:"_send",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all(this._publishers.map((function(o){var i=r({},t);return Promise.resolve().then((function(){return o(i,n)})).catch((function(n){return e._onPublisherFailHandler(n,{publisherName:o.name,payload:t})}))}))).then((function(){}))}},{key:"_extractEventAndContext",value:function(t,e,n){var o=void 0,u={};if("string"!=typeof t)o=t,u=e||u;else{if(!(o=this._events[t]))throw new i.AssertionError("Event with key '"+t+"' not found in event map.");e&&(o=r({},o,e),u=n||u)}return{event:o,context:u}}},{key:"_initQueue",value:function(t,e){var n=this;if(this._queue)return this._queue;this._queue=this._globalBatchQueue||new l;return this._queue.init({delayMs:!0===t.useBatch?300:t.useBatch,maxBatchSize:this._maxBatchSize,useThrottle:!!this._globalBatchQueue,optimizeBatch:!!this._globalBatchQueue},(function(r){n._globalBatchQueue||(r.g=Object.assign(n._getStaticDefaults(n._defaults),n._getStaticNonEssentialDefaults(e)));var o=n._payloadTransformer(r,t);return n._send(o,t)})),this._queue}},{key:"_handleDefaultsError",value:function(t){return this._defaultContinueOnFail?(f.error(t),null):Promise.reject(t)}},{key:"_getDynamicNonEssentialDefaults",value:function(t){if(!p(t))return this._getDynamicDefaults(this._nonEssentialDefaults)}},{key:"_getStaticNonEssentialDefaults",value:function(t){if(!p(t))return this._getStaticDefaults(this._nonEssentialDefaults)}},{key:"_withOwnDefaults",value:function(t){return Object.assign({},t,this._ownDefaults)}},{key:"_getDynamicDefaults",value:function(t){t=this._withOwnDefaults(t);var e=a(t,(function(t){return"function"==typeof t}));return s(e,(function(t){return t()}))}},{key:"_getStaticDefaults",value:function(t){return t=this._withOwnDefaults(t),a(t,(function(t){return"function"!=typeof t}))}},{key:"_getDefaults",value:function(t){var e=this;if(!(t=this._withOwnDefaults(t)))return Promise.resolve({});var n=s(t,(function(t,n){if("function"==typeof t)try{t=t()}catch(t){return e._handleDefaultsError(t)}return t&&"function"==typeof t.then?c.timedPromise(t,{message:"Cannot get default value '"+n+" for BI Event'",timeout:e._defaultValueTimeout}).catch((function(t){return e._handleDefaultsError(t)})):t}));return c.allAsObject(n)}},{key:"_encodePolicyValue",value:function(t,e){return t?"boolean"==typeof t[e]?t[e]?1:0:t[e]:1}},{key:"_getPolicyFields",value:function(t,e){return{_isca:this._encodePolicyValue(t,"analytics"),_iscf:this._encodePolicyValue(t,"functional"),_ispd:t.__default?1:0,_ise:"essential"===e?1:0}}}],[{key:"_defaultPublisherFailHandler",value:function(t,e){return e.publisherName}}]),t}();t.exports=v},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(4),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}return r(t,[{key:"reset",value:function(){this._handlers=[]}},{key:"onLoggerCreated",value:function(t){var e=this;return o.defined(t,"Handler must be provided."),o.func(t,"Handler must be a function."),this._handlers.push(t),function(){var n=e._handlers.indexOf(t);-1!==n&&e._handlers.splice(n,1)}}},{key:"notifyLoggerCreated",value:function(t){this._handlers.forEach((function(e){return e(t)}))}}]),t}();t.exports={manager:new i,BiLoggerManager:i}},function(t,e,n){"use strict";n.r(e),n.d(e,"factory",(function(){return rt})),n.d(e,"setHost",(function(){return ot})),n.d(e,"manager",(function(){return it})),n.d(e,"createBatchQueue",(function(){return ut})),n.d(e,"EventCategories",(function(){return st})),n.d(e,"BiLoggerClientFactory",(function(){return at}));var r=n(1);function o(t){var e=t.screen&&t.screen.width||0,n=t.screen&&t.screen.height||0;return"".concat(e,"x").concat(n)}function i(t){var e=0,n=0;return t.innerWidth?(e=t.innerWidth,n=t.innerHeight):t.document&&(t.document.documentElement&&t.document.documentElement.clientWidth?(e=t.document.documentElement.clientWidth,n=t.document.documentElement.clientHeight):t.document.body&&t.document.body.clientWidth&&(e=t.document.body.clientWidth,n=t.document.body.clientHeight)),"".concat(e,"x").concat(n)}var u,s=[".wix.com",".editorx.com"];!function(t){t.msid="_msid",t.clientId="_client_id",t.uuid="_uuid",t.visitorId="_visitorId",t.siteMemberId="_siteMemberId",t.brandId="_brandId",t.siteBranchId="_siteBranchId",t.ms="_ms",t.lv="_lv",t.isHeadless="_isHeadless",t.hostingPlatform="_hostingPlatform"}(u||(u={}));var a,c,f={wix:"wix",editorx:"editorx"},l={brand:"wix"};function h(t){a=t}function d(t){if(void 0===t&&(t="wix"),a)return a;return void 0===c&&(c=v((function(t){return t.location&&t.location.hostname&&(t.location.hostname.match(/\.(wix|editorx)\.com$/)||[])[1]||null}),null)),"frog.".concat(c||f[t]||f.wix,".com")}function p(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}function y(t){if("undefined"!=typeof window&&window)try{return window.top===window.self?t?t(window):window:null}catch(t){return null}return null}function v(t,e){return void 0===e&&(e=null),"undefined"!=typeof self&&self&&t(self)||e}var m=0;function b(t){return Object.keys(t).reduce((function(e,n){var r="string"==typeof t[n]?{name:t[n]}:t[n],o=r.name,i=r.transform,u=(void 0===i?function(t){return t}:i)(function(t){if("undefined"==typeof document)return null;for(var e=0,n=document.cookie.split(";");e<n.length;e++){for(var r=n[e].split("="),o=r[0],i=r[1];" "===o[0];)o=o.substr(1);if(o===t)return i}return""}(o));return u&&(e[n]=u),e}),{})}function g(t,e,n){var r=t.host,o=void 0===r?"":r,i=t.endpoint,u=void 0===i?"":i;void 0===n&&(n={}),o=(o="function"==typeof o?o():o)||d(),u=n.endpoint||u,n.useBatch||(e._=""+(new Date).getTime()+m++);var s=n.useBatch?[]:Object.keys(e).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))}),[]);return["//".concat(o,"/").concat(u)].concat(s.length?s.join("&"):[]).join("?")}function _(t){setTimeout((function(){return y((function(e){return t(e.location.href)}))}))}function w(t){y((function(e){var n=e.history;return["pushState","replaceState"].forEach((function(e){!function(t,e,n){if(t&&t[e]){var r=t[e];t[e]=function(){return n.apply(null,arguments),r.apply(t,arguments)}}}(n,e,(function(e,n,r){return t(r)}))}))}))}function x(t){y((function(e){return e.addEventListener("popstate",(function(){return t(e.location.href)}))}))}function P(t){return t||!p()&&y((function(t){var e=t.document;return s.some((function(t){return-1!==e.location.host.indexOf(t)}))}))&&y((function(t){return!t.__isTrackingPageViews__}))}function j(t){var e,n=function(t){return t({endpoint:"p"}).updateDefaults({src:19,evid:3,vsi:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}).logger()}(t),r=1;e=function(t,e){var u=y((function(t){return{sr:o(t),wr:i(t)}})),s=u.sr,a=u.wr;n.log({from:t,to:e,fis:r,sr:s,wr:a}),r=0},y((function(t){var n=t.document.referrer;[_,w,x].forEach((function(t){return t((function(t){e(n,t),n=t}))}))}))}function O(t,e){void 0===e&&(e={force:!1}),P(e.force)&&(y((function(t){return t.__isTrackingPageViews__=!0})),j(t))}var E,C=n(3),D=n(2),T=function(){function t(t){t&&(this.env=t),this.consentPolicyAccess=Object(C.a)(this.env)}return t.prototype.clearReference=function(){this.consentPolicyAccess&&this.consentPolicyAccess.deleteReference&&(this.consentPolicyAccess=void 0)},t.prototype.getCurrentConsentPolicy=function(){this.consentPolicyAccess||(this.consentPolicyAccess=Object(C.a)(this.env));var t=this.consentPolicyAccess&&this.consentPolicyAccess.getCurrentConsentPolicy()||D.a;return this.clearReference(),t.policy?t.policy:t},t.prototype.getConsentPolicyHeader=function(t){void 0===t&&(t=!1),this.consentPolicyAccess||(this.consentPolicyAccess=Object(C.a)(this.env));var e=this.consentPolicyAccess&&this.consentPolicyAccess._getConsentPolicyHeader()||{"consent-policy":""};return this.clearReference(),t?e["consent-policy"]:e},t}(),B=(E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),k=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return B(e,t),e}(Error),S=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return B(e,t),e}(Error),M=function(t,e){if(void 0===t)throw new k(e)},F=function(t,e){if(!t)throw new k(e)},A=n(0);function H(t,e,n){return void 0===n&&(n=!1),new Promise((function(r,o){return function(t,e){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(t,e)}(t,n?JSON.stringify(e):void 0)?r():o(new Error("Transport Error: Cannot send bi using beacon"))}))}function G(t,e){return new Promise((function(n,r){var o=e||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},o.src=t}))}function z(t,e,n,r){if(void 0===n&&(n="GET"),void 0===r){if("undefined"==typeof fetch)return Promise.reject(new S("fetch"));r=fetch}var o={method:n,credentials:"include"};return"POST"===n?o.body=JSON.stringify(e):o.keepalive=!0,r(t,o).then((function(t){if(!t.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: ".concat(t.status))}))}function I(t,e,n){return void 0===n&&(n="GET"),new Promise((function(r,o){var i=new XMLHttpRequest;i.open(n,"".concat(location.protocol).concat(t)),i.onload=r,i.onerror=function(){o(new Error("Transport Error: Cannot send bi using xhr."))},i.withCredentials=!0,"POST"===n?i.send(JSON.stringify(e)):i.send()}))}var Q=function(){return(Q=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},N=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n},V=function(t){return t.useBatch?"POST":"GET"};function U(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=g(t,e,n);return H(r,e,!!n.useBatch).catch((function(){var t=V(n);return n.useBatch?z(r,e,t).catch((function(n){return n instanceof S?I(r,e,t):Promise.reject(n)})):G(r,n.image)}))}}function L(t,e){return void 0===t&&(t={}),function(n,r){void 0===r&&(r={});var o=g(t,n,r),i=V(r);return z(o,n,i,e).catch((function(t){return t instanceof S?I(o,n,i):Promise.reject(t)}))}}function W(t,e){return void 0===t&&(t={}),function(t){return function(t,e){void 0===e&&(e=self.postMessage);var n=[t];return"undefined"==typeof WorkerGlobalScope&&n.push("*"),e.apply(self,n)}(t,e)}}function q(t,e){return function(t,e){var n,r;return t.publishMethod===A.b.PostMessage?(n=W,r=e&&e[A.b.PostMessage]):t.publishMethod===A.b.Fetch?(n=L,r=e&&e[A.b.Fetch]):n=p()?L:U,n(t,r)}(t,e)}var R=function(t,e){return void 0===e&&(e=v((function(t){return t.Wix&&t.Wix.Utils&&t.Wix.Utils.commonConfig||t.commonConfig}))),(e=e&&"function"==typeof e.getAll?e.getAll():e)&&void 0!==e[t]?e[t]:l[t]},J=function(t){return R("brand",t())},X=function(t){return R("host",t())},$=function(t){return Object.keys(t).reduce((function(e,n){return e[u[n]||n]=t[n],e}),{})},K=function(t,e){return $({brandId:function(){return J(t)},siteBranchId:function(){return function(t){return R("branchId",t())}(t)},ms:function(){return Math.round("undefined"!=typeof performance&&performance&&performance.now?performance.now():-1)},isHeadless:function(){return Y(t)},hostingPlatform:function(){return X(t)},lv:"2.0.985|C"})},Y=function(t){return"VIEWER_HEADLESS"===X(t)||void 0},Z=function(){return(Z=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},tt=function(){function t(e){void 0===e&&(e={}),this.options=e,this.commonConfigGetter=function(){},this.initialized=!1,F(!e.publishMethod||-1!==Object.keys(A.b).map((function(t){return A.b[t]})).indexOf(e.publishMethod),'Unsupported publish method "'.concat(e.publishMethod,'"')),t.consentPolicyAccessor=t.consentPolicyAccessor||new T,this.loggerClientFactory=Object(r.factory)()}return t.prototype.initFactory=function(){var e=this;if(this.initialized)return this.loggerClientFactory;this.initialized=!0,this.updateDefaults(K(this.commonConfigGetter,t.consentPolicyAccessor)),this.withUserContext(b({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(t){return"string"==typeof t&&t.split("|")[1]}}}));var n=Z(Z({},this.options),{host:this.options.host||function(){return d(J(e.commonConfigGetter))}}),r=q(n,this.publishFunctions),o=function(t,e){var n,r;e&&("function"!=typeof e&&e.postMessage&&t.publishMethod===A.b.PostMessage?r=e.postMessage:"function"==typeof e&&(n=e));return{eventTransformer:n,payloadTransformer:function(e,n){if(n.useBatch){var o=function(e){return(null==e?void 0:e.endpoint)||n.endpoint||t.endpoint};e.e=e.e.map((function(t){var e=t.context,n=N(t,["context"]);return Q(Q({},n),{f:Q(Q({},n.f),{_rp:o(e)})})}))}return r?r(e):e}}}(n,this.transformer),i=o.eventTransformer,u=o.payloadTransformer,s=this.loggerClientFactory.addPublisher(r).withConsentPolicyGetter((function(){return t.consentPolicyAccessor.getCurrentConsentPolicy()}));return i&&s.withEventTransformer(i),u&&s.withPayloadTransformer(u),s},t.prototype.withTransformer=function(t){return M(t,"Transformer must be provided"),F("function"==typeof t||t&&"function"==typeof t[A.b.PostMessage],"Valid transformer must be provided"),this.transformer=t,this},t.prototype.withPublishFunction=function(t){return M(t,"Publish functions object must be provided"),F(this.options.publishMethod&&this.options.publishMethod!==A.b.Auto,"Publish function can be used only when using a custom publish method"),F(t&&"function"==typeof t[this.options.publishMethod],"Valid publish function must be provided"),this.publishFunctions=t,this},t.prototype.withUserContext=function(t){return M(t,"User context object must be provided"),this.updateDefaults($(t)),this},t.prototype.withUoUContext=function(t){return M(t,"UoU context object must be provided"),this.updateDefaults($(t)),this},t.prototype.withNonEssentialContext=function(t){return M(t,"Non-essential context object must be provided"),this.loggerClientFactory.updateNonEssentialDefaults($(t)),this},t.prototype.withCommonConfigGetter=function(t){return M(t,"Common config getter must be provided"),F("function"==typeof t,"Common config getter must be a function"),this.commonConfigGetter=t,this},t.prototype.updateDefaults=function(t){return this.loggerClientFactory.updateDefaults(t),this},t.prototype.setMuted=function(t){return this.loggerClientFactory.setMuted(t),this},t.prototype.setEvents=function(t){return this.loggerClientFactory.setEvents(t),this},t.prototype.setGlobalBatchQueue=function(t){return this.loggerClientFactory.setGlobalBatchQueue(t),this},t.prototype.onError=function(t){return this.loggerClientFactory.setPublisherFailHandler(t),this},t.prototype.logger=function(t){void 0===t&&(t={});var e=this.options,n=e.endpoint,r=e.useBatch;return this.initFactory().logger(Z({endpoint:n,useBatch:r},t))},t}(),et=function(t){return void 0===t&&(t={}),new tt(t)},nt=(r.manager,r.createBatchQueue,r.BiLoggerFactory),rt=function(t){void 0===t&&(t={});var e=t.trackSession||void 0===t.trackSession;return e&&O(et,{force:"force"===e}),et(t)},ot=h,it=r.manager,ut=r.createBatchQueue,st=A.a,at=nt;e.default={factory:rt,setHost:h,manager:r.manager,createBatchQueue:r.createBatchQueue,EventCategories:A.a,BiLoggerClientFactory:nt}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(4),u=n(6),s=n(7),a=n(5),c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=[],this._validators=[],this._defaults={},this._nonEssentialDefaults={},this._events={},this._isMuted=!1,this._eventTransformer=null,this._payloadTransformer=null,this._consentPolicyGetter=null,this._maxBatchSize=null,this._batchQueue=null}return o(t,[{key:"addPublisher",value:function(t){return i.defined(t,"Publisher must be provided"),i.ok("function"==typeof t,"Expected a publisher function"),this._publishers.push(t),this}},{key:"addValidator",value:function(t){return i.defined(t,"Validator must be provided"),i.ok("object"===(void 0===t?"undefined":r(t))&&t,"Expected a validator object"),i.ok(t.execute&&t.match,"Provided validator does not match the interface"),this._validators.push(t),this}},{key:"setDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),this._defaults=t,this}},{key:"updateDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),Object.assign(this._defaults,t),this}},{key:"updateNonEssentialDefaults",value:function(t){return i.defined(t,"Non-essential Defaults must be provided"),i.object(t,"Non-essential Defaults must be an object"),Object.assign(this._nonEssentialDefaults,t),this}},{key:"setEvents",value:function(t){return i.defined(t,"Events must be provided"),i.object(t,"Events must be an object"),this._events=t,this}},{key:"setDefaultValueTimeout",value:function(t){return i.defined(t,"Default Value Timeout must be provided"),this._defaultValueTimeout=t,this}},{key:"setDefaultContinueOnFail",value:function(t){return i.defined(t,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=t,this}},{key:"setPublisherFailHandler",value:function(t){return i.defined(t,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=t,this}},{key:"setMuted",value:function(t){return i.defined(t,"Is Muted must be provided"),i.boolean(t,"Is Muted must be a boolean"),this._isMuted=t,this}},{key:"setMaxBatchSize",value:function(t){return i.defined(t,"Max Batch Size must be provided"),i.number(t,"Max Batch Size must be a number"),i.ok(t>0,"Max Batch Size must be higher than 0"),this._maxBatchSize=t,this}},{key:"setGlobalBatchQueue",value:function(t){return i.defined(t,"Global Batch Queue must be provided"),i.ok(t instanceof a,"Global Batch Queue must be an instance of BatchQueue"),this._globalBatchQueue=t,this}},{key:"withEventTransformer",value:function(t){return i.defined(t,"Event Transformer must be provided"),i.func(t,"Event Transformer must be a function"),this._eventTransformer=t,this}},{key:"withPayloadTransformer",value:function(t){return i.defined(t,"Payload Transformer must be provided"),i.func(t,"Payload Transformer must be a function"),this._payloadTransformer=t,this}},{key:"withConsentPolicyGetter",value:function(t){return i.defined(t,"Consent Policy Getter must be provided"),i.func(t,"Consent Policy Getter must be a function"),this._consentPolicyGetter=t,this}},{key:"logger",value:function(t){var e=this,n=new u({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler,isMuted:function(){return e._isMuted},eventTransformer:this._eventTransformer,payloadTransformer:this._payloadTransformer,consentPolicyGetter:this._consentPolicyGetter,nonEssentialDefaults:this._nonEssentialDefaults,maxBatchSize:this._maxBatchSize,globalBatchQueue:this._globalBatchQueue},t);return s.manager.notifyLoggerCreated(n),n}}]),t}();t.exports=c},function(t,e,n){"use strict";t.exports.mapValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),{}):{}},t.exports.filterValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return e(t[r],r,t)&&(n[r]=t[r]),n}),{}):{}}},function(t,e,n){"use strict";t.exports.timedPromise=function(t,e){var n=e.message,r=e.timeout,o=new Promise((function(t,e){setTimeout(e,r,n?"Timeout: "+n:"Timeout")}));return Promise.race([t,o])},t.exports.allAsObject=function(t){var e=Object.keys(t);return Promise.all(e.map((function(e){return t[e]}))).then((function(t){return t.reduce((function(t,n,r){return t[e[r]]=n,t}),{})}))}},function(t,e,n){"use strict";t.exports={error:function(){var t;console&&console.error&&(t=console).error.apply(t,arguments)}}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=void 0;return function(){var o=this,i=arguments,u=function(){r=null,n||t.apply(o,i)},s=n&&!r;clearTimeout(r),r=setTimeout(u,e),s&&t.apply(o,i)}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=void 0;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=setTimeout((function(){t.apply(void 0,o),n=null}),e))}}},function(t,e,n){"use strict";var r={functional:!0,analytics:!0,__default:!0},o=function(t){return!1===t.functional||!1===t.analytics};t.exports={shouldMuteNonEssentials:o,shouldMuteByCategory:function(t,e){return"essential"!==e&&("functional"===e||"analytics"===e?!1===t[e]:o(t))},getPolicy:function(t){return"function"==typeof t&&t()||r}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n}])}));
//# sourceMappingURL=app.bundle.min.js.map