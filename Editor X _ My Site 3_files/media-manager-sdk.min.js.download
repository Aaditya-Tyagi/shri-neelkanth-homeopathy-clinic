!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("mediaManagerSDK",[],t):"object"==typeof exports?exports.mediaManagerSDK=t():e.mediaManagerSDK=t()}("undefined"!=typeof self?self:this,(function(){return function(){var e={399:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(c=1,u=new Array(d-1);c<d;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var p,f=l.length;for(c=0;c<f;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),d){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(p=1,u=new Array(d-1);p<d;p++)u[p-1]=arguments[p];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},431:function(e,t,n){var r,i;i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:this,e.exports=function(n){"use strict";var i,o=(n=n||{}).Base64,a="2.6.4",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(s),c=String.fromCharCode,l=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},d=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,p=function(e){return e.replace(d,l)},f=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[s.charAt(n>>>18),s.charAt(n>>>12&63),t>=2?"=":s.charAt(n>>>6&63),t>=1?"=":s.charAt(63&n)].join("")},h=n.btoa&&"function"==typeof n.btoa?function(e){return n.btoa(e)}:function(e){if(e.match(/[^\x00-\xFF]/))throw new RangeError("The string contains invalid characters.");return e.replace(/[\s\S]{1,3}/g,f)},m=function(e){return h(p(String(e)))},g=function(e){return e.replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,"")},v=function(e,t){return t?g(m(e)):m(e)},y=function(e){return v(e,!0)};n.Uint8Array&&(i=function(e,t){for(var n="",r=0,i=e.length;r<i;r+=3){var o=e[r],a=e[r+1],u=e[r+2],c=o<<16|a<<8|u;n+=s.charAt(c>>>18)+s.charAt(c>>>12&63)+(void 0!==a?s.charAt(c>>>6&63):"=")+(void 0!==u?s.charAt(63&c):"=")}return t?g(n):n});var _,b=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,w=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return c(55296+(t>>>10))+c(56320+(1023&t));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},U=function(e){return e.replace(b,w)},T=function(e){var t=e.length,n=t%4,r=(t>0?u[e.charAt(0)]<<18:0)|(t>1?u[e.charAt(1)]<<12:0)|(t>2?u[e.charAt(2)]<<6:0)|(t>3?u[e.charAt(3)]:0),i=[c(r>>>16),c(r>>>8&255),c(255&r)];return i.length-=[0,0,2,1][n],i.join("")},x=n.atob&&"function"==typeof n.atob?function(e){return n.atob(e)}:function(e){return e.replace(/\S{1,4}/g,T)},k=function(e){return x(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},S=function(e){return U(x(e))},E=function(e){return String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,"")},P=function(e){return S(E(e))};n.Uint8Array&&(_=function(e){return Uint8Array.from(k(E(e)),(function(e){return e.charCodeAt(0)}))});var O=function(){var e=n.Base64;return n.Base64=o,e};if(n.Base64={VERSION:a,atob:k,btoa:h,fromBase64:P,toBase64:v,utob:p,encode:v,encodeURI:y,btou:U,decode:P,noConflict:O,fromUint8Array:i,toUint8Array:_},"function"==typeof Object.defineProperty){var I=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};n.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",I((function(){return P(this)}))),Object.defineProperty(String.prototype,"toBase64",I((function(e){return v(this,e)}))),Object.defineProperty(String.prototype,"toBase64URI",I((function(){return v(this,!0)})))}}return n.Meteor&&(Base64=n.Base64),e.exports?e.exports.Base64=n.Base64:void 0===(r=function(){return n.Base64}.apply(t,[]))||(e.exports=r),{Base64:n.Base64}}(i)},158:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,u=[],c=!1,l=-1;function d(){c&&s&&(c=!1,s.length?u=s.concat(u):l=-1,u.length&&p())}function p(){if(!c){var e=a(d);c=!0;for(var t=u.length;t;){for(s=u,u=[];++l<t;)s&&s[l].run();l=-1,t=u.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new f(e,t)),1!==u.length||c||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},105:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,o,a=[];for(o in"string"!=typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!=r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;a.push(o+"="+r)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),a=r(t[2]);null===o||null===a||o in i||(i[o]=a)}return i}},764:function(e,t,n){var r=n(230);e.exports=function(e){return function t(n){return 0===arguments.length||r(n)?t:e.apply(this,arguments)}}},773:function(e,t,n){var r=n(764),i=n(230);e.exports=function(e){return function t(n,o){switch(arguments.length){case 0:return t;case 1:return i(n)?t:r((function(t){return e(n,t)}));default:return i(n)&&i(o)?t:i(n)?r((function(t){return e(t,o)})):i(o)?r((function(t){return e(n,t)})):e(n,o)}}}},138:function(e,t,n){var r=n(764),i=n(773),o=n(230);e.exports=function(e){return function t(n,a,s){switch(arguments.length){case 0:return t;case 1:return o(n)?t:i((function(t,r){return e(n,t,r)}));case 2:return o(n)&&o(a)?t:o(n)?i((function(t,n){return e(t,a,n)})):o(a)?i((function(t,r){return e(n,t,r)})):r((function(t){return e(n,a,t)}));default:return o(n)&&o(a)&&o(s)?t:o(n)&&o(a)?i((function(t,n){return e(t,n,s)})):o(n)&&o(s)?i((function(t,n){return e(t,a,n)})):o(a)&&o(s)?i((function(t,r){return e(n,t,r)})):o(n)?r((function(t){return e(t,a,s)})):o(a)?r((function(t){return e(n,t,s)})):o(s)?r((function(t){return e(n,a,t)})):e(n,a,s)}}}},673:function(e){e.exports=function(e,t){return Object.prototype.hasOwnProperty.call(t,e)}},78:function(e){e.exports=function(e){return"[object Object]"===Object.prototype.toString.call(e)}},230:function(e){e.exports=function(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}},317:function(e,t,n){var r=n(773),i=n(937),o=r((function(e,t){return i((function(e,t,n){return n}),e,t)}));e.exports=o},937:function(e,t,n){var r=n(138),i=n(78),o=n(145),a=r((function e(t,n,r){return o((function(n,r,o){return i(r)&&i(o)?e(t,r,o):t(n,r,o)}),n,r)}));e.exports=a},145:function(e,t,n){var r=n(138),i=n(673),o=r((function(e,t,n){var r,o={};for(r in t)i(r,t)&&(o[r]=i(r,n)?e(r,t[r],n[r]):t[r]);for(r in n)i(r,n)&&!i(r,o)&&(o[r]=n[r]);return o}));e.exports=o},608:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},737:function(e,t,n){"use strict";var r=n(608),i=n(105),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,a=/[\n\r\t]/g,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,c=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function d(e){return(e||"").toString().replace(o,"")}var p=[["#","hash"],["?","query"],function(e,t){return m(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function h(e){var t,r=("undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new v(unescape(e.pathname),{});else if("string"===o)for(t in i=new v(e,{}),f)delete i[t];else if("object"===o){for(t in e)t in f||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=s.test(e.href))}return i}function m(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function g(e,t){e=(e=d(e)).replace(a,""),t=t||{};var n,r=c.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],s=!!r[3],u=0;return o?s?(n=r[2]+r[3]+r[4],u=r[2].length+r[3].length):(n=r[2]+r[4],u=r[2].length):s?(n=r[3]+r[4],u=r[3].length):n=r[4],"file:"===i?u>=2&&(n=n.slice(2)):m(i)?n=r[4]:i?o&&(n=n.slice(2)):u>=2&&m(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||m(i),slashesCount:u,rest:n}}function v(e,t,n){if(e=(e=d(e)).replace(a,""),!(this instanceof v))return new v(e,t,n);var o,s,u,c,f,y,_=p.slice(),b=typeof t,w=this,U=0;for("object"!==b&&"string"!==b&&(n=t,t=null),n&&"function"!=typeof n&&(n=i.parse),o=!(s=g(e||"",t=h(t))).protocol&&!s.slashes,w.slashes=s.slashes||o&&t.slashes,w.protocol=s.protocol||t.protocol||"",e=s.rest,("file:"===s.protocol&&(2!==s.slashesCount||l.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!m(w.protocol)))&&(_[3]=[/(.*)/,"pathname"]);U<_.length;U++)"function"!=typeof(c=_[U])?(u=c[0],y=c[1],u!=u?w[y]=e:"string"==typeof u?~(f="@"===u?e.lastIndexOf(u):e.indexOf(u))&&("number"==typeof c[2]?(w[y]=e.slice(0,f),e=e.slice(f+c[2])):(w[y]=e.slice(f),e=e.slice(0,f))):(f=u.exec(e))&&(w[y]=f[1],e=e.slice(0,f.index)),w[y]=w[y]||o&&c[3]&&t[y]||"",c[4]&&(w[y]=w[y].toLowerCase())):e=c(e,w);n&&(w.query=n(w.query)),o&&t.slashes&&"/"!==w.pathname.charAt(0)&&(""!==w.pathname||""!==t.pathname)&&(w.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,a=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),a++):a&&(0===r&&(o=!0),n.splice(r,1),a--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(w.pathname,t.pathname)),"/"!==w.pathname.charAt(0)&&m(w.protocol)&&(w.pathname="/"+w.pathname),r(w.port,w.protocol)||(w.host=w.hostname,w.port=""),w.username=w.password="",w.auth&&(~(f=w.auth.indexOf(":"))?(w.username=w.auth.slice(0,f),w.username=encodeURIComponent(decodeURIComponent(w.username)),w.password=w.auth.slice(f+1),w.password=encodeURIComponent(decodeURIComponent(w.password))):w.username=encodeURIComponent(decodeURIComponent(w.auth)),w.auth=w.password?w.username+":"+w.password:w.username),w.origin="file:"!==w.protocol&&m(w.protocol)&&w.host?w.protocol+"//"+w.host:"null",w.href=w.toString()}v.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,u.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var a="pathname"===e?"/":"#";o[e]=t.charAt(0)!==a?a+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var s=t.indexOf(":");~s?(o.username=t.slice(0,s),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(s+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var c=0;c<p.length;c++){var l=p[c];l[4]&&(o[l[1]]=o[l[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&m(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var a=o+(n.protocol&&n.slashes||m(n.protocol)?"//":"");return n.username?(a+=n.username,n.password&&(a+=":"+n.password),a+="@"):n.password?(a+=":"+n.password,a+="@"):"file:"!==n.protocol&&m(n.protocol)&&!r&&"/"!==n.pathname&&(a+="@"),(":"===r[r.length-1]||u.test(n.hostname)&&!n.port)&&(r+=":"),a+=r+n.pathname,(t="object"==typeof n.query?e(n.query):n.query)&&(a+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(a+=n.hash),a}},v.extractProtocol=g,v.location=h,v.trimLeft=d,v.qs=i,e.exports=v},206:function(e,t,n){e.exports=n(57)},387:function(e,t,n){"use strict";var r=n(485),i=n(570),o=n(940),a=n(581),s=n(574),u=n(845),c=n(338),l=n(524);e.exports=function(e){return new Promise((function(t,n){var d=e.data,p=e.headers,f=e.responseType;r.isFormData(d)&&delete p["Content-Type"];var h=new XMLHttpRequest;if(e.auth){var m=e.auth.username||"",g=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";p.Authorization="Basic "+btoa(m+":"+g)}var v=s(e.baseURL,e.url);function y(){if(h){var r="getAllResponseHeaders"in h?u(h.getAllResponseHeaders()):null,o={data:f&&"text"!==f&&"json"!==f?h.response:h.responseText,status:h.status,statusText:h.statusText,headers:r,config:e,request:h};i(t,n,o),h=null}}if(h.open(e.method.toUpperCase(),a(v,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,"onloadend"in h?h.onloadend=y:h.onreadystatechange=function(){h&&4===h.readyState&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))&&setTimeout(y)},h.onabort=function(){h&&(n(l("Request aborted",e,"ECONNABORTED",h)),h=null)},h.onerror=function(){n(l("Network Error",e,null,h)),h=null},h.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,e.transitional&&e.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",h)),h=null},r.isStandardBrowserEnv()){var _=(e.withCredentials||c(v))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;_&&(p[e.xsrfHeaderName]=_)}"setRequestHeader"in h&&r.forEach(p,(function(e,t){void 0===d&&"content-type"===t.toLowerCase()?delete p[t]:h.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(h.withCredentials=!!e.withCredentials),f&&"json"!==f&&(h.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){h&&(h.abort(),n(e),h=null)})),d||(d=null),h.send(d)}))}},57:function(e,t,n){"use strict";var r=n(485),i=n(875),o=n(29),a=n(941);function s(e){var t=new o(e),n=i(o.prototype.request,t);return r.extend(n,o.prototype,t),r.extend(n,t),n}var u=s(n(141));u.Axios=o,u.create=function(e){return s(a(u.defaults,e))},u.Cancel=n(132),u.CancelToken=n(603),u.isCancel=n(475),u.all=function(e){return Promise.all(e)},u.spread=n(739),u.isAxiosError=n(835),e.exports=u,e.exports.default=u},132:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},603:function(e,t,n){"use strict";var r=n(132);function i(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},475:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},29:function(e,t,n){"use strict";var r=n(485),i=n(581),o=n(96),a=n(9),s=n(941),u=n(144),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&u.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(r=r&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(e){o.push(e.fulfilled,e.rejected)})),!r){var l=[a,void 0];for(Array.prototype.unshift.apply(l,n),l=l.concat(o),i=Promise.resolve(e);l.length;)i=i.then(l.shift(),l.shift());return i}for(var d=e;n.length;){var p=n.shift(),f=n.shift();try{d=p(d)}catch(e){f(e);break}}try{i=a(d)}catch(e){return Promise.reject(e)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},l.prototype.getUri=function(e){return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},96:function(e,t,n){"use strict";var r=n(485);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},574:function(e,t,n){"use strict";var r=n(642),i=n(288);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},524:function(e,t,n){"use strict";var r=n(953);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},9:function(e,t,n){"use strict";var r=n(485),i=n(212),o=n(475),a=n(141);function s(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return s(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return s(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(s(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},953:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},941:function(e,t,n){"use strict";var r=n(485);e.exports=function(e,t){t=t||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function u(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function c(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=u(void 0,e[i])):n[i]=u(e[i],t[i])}r.forEach(i,(function(e){r.isUndefined(t[e])||(n[e]=u(void 0,t[e]))})),r.forEach(o,c),r.forEach(a,(function(i){r.isUndefined(t[i])?r.isUndefined(e[i])||(n[i]=u(void 0,e[i])):n[i]=u(void 0,t[i])})),r.forEach(s,(function(r){r in t?n[r]=u(e[r],t[r]):r in e&&(n[r]=u(void 0,e[r]))}));var l=i.concat(o).concat(a).concat(s),d=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===l.indexOf(e)}));return r.forEach(d,c),n}},570:function(e,t,n){"use strict";var r=n(524);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},212:function(e,t,n){"use strict";var r=n(485),i=n(141);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},141:function(e,t,n){"use strict";var r=n(158),i=n(485),o=n(446),a=n(953),s={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c,l={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==r&&"[object process]"===Object.prototype.toString.call(r))&&(c=n(387)),c),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(u(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw a(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],(function(e){l.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){l.headers[e]=i.merge(s)})),e.exports=l},875:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},581:function(e,t,n){"use strict";var r=n(485);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!=e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},288:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},940:function(e,t,n){"use strict";var r=n(485);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},642:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},835:function(e){"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},338:function(e,t,n){"use strict";var r=n(485);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},446:function(e,t,n){"use strict";var r=n(485);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},845:function(e,t,n){"use strict";var r=n(485),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},739:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},144:function(e,t,n){"use strict";var r=n(843),i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={},a=r.version.split(".");function s(e,t){for(var n=t?t.split("."):a,r=e.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(e,t,n){var i=t&&s(t);function a(e,t){return"[Axios v"+r.version+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,s){if(!1===e)throw new Error(a(r," has been removed in "+t));return i&&!o[r]&&(o[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},e.exports={isOlderVersion:s,assertOptions:function(e,t,n){if("object"!=typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},485:function(e,t,n){"use strict";var r=n(875),i=Object.prototype.toString;function o(e){return"[object Array]"===i.call(e)}function a(e){return void 0===e}function s(e){return null!==e&&"object"==typeof e}function u(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===i.call(e)}function l(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:function(e){return"[object ArrayBuffer]"===i.call(e)},isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:s,isPlainObject:u,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:c,isStream:function(e){return s(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:l,merge:function e(){var t={};function n(n,r){u(t[r])&&u(n)?t[r]=e(t[r],n):u(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)l(arguments[r],n);return t},extend:function(e,t,n){return l(t,(function(t,i){e[i]=n&&"function"==typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},816:function(e,t,n){var r=n(738);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},723:function(e,t,n){var r=n(422).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},738:function(e,t,n){var r=n(422).default,i=n(723);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},422:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},843:function(e){"use strict";e.exports=JSON.parse('{"name":"axios","version":"0.21.4","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://axios-http.com","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.14.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return function(){"use strict";n.r(r),n.d(r,{Boards:function(){return ho},CorrelationId:function(){return cn},DeviantArt:function(){return Uo},Dribbble:function(){return Eo},Drive:function(){return Ko},Dropbox:function(){return fa},Facebook:function(){return Sa},FacebookVideo:function(){return _a},Flickr:function(){return ja},GooglePhotos:function(){return Qa},Instagram:function(){return qa},Private:function(){return Lr},PrivateSite:function(){return Tr},Public:function(){return ai},Recommended:function(){return Hu},Shutterstock:function(){return nu},Unsplash:function(){return Yu},UploadQueueEvent:function(){return se},Uploader:function(){return Zt},Vimeo:function(){return es},VimeoSearch:function(){return su},VisitorsUploads:function(){return ts},WixSite:function(){return Mu},WixVideo:function(){return Cu},YouTubeSearch:function(){return pu},bi:function(){return Yi},connectExternalSource:function(){return Hi},createSocket:function(){return _r},createSource:function(){return ee},events:function(){return ui},fetchFilesMetadata:function(){return si},middlewares:function(){return $i}});var e=n(317),t=n.n(e);const i=Object.prototype.hasOwnProperty;function o(){return(new Date).getTime()}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function s(){}function u(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.filter(Boolean).reduce(t())}function c(e,t,n){if(!e||!t)return n;let r=Array.isArray(t)?t:t.split(/[.[\]]/);r=r.filter((function(e){return e}));const o=r.reduce((function(e,t){if(e&&i.call(e,t))return e[t]}),e);return void 0===o?n:o}function l(e){if(0===e)return"0 Byte";const t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return e.apply(this,n.concat(r))}}function p(e,t){t=t.replace(/\[/,"\\[").replace(/\]/,"\\]");const n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return n?decodeURIComponent(n[1].replace(/\+/g," ")):""}function f(e){if(!e||"string"!=typeof e)throw new Error("Token should be a string");const t=function(e){try{return JSON.parse(JSON.parse(atob(e.split(".")[2])).data)}catch(e){throw new Error("Can not parse token")}}(e),{metasiteId:n,userId:r,roles:i}=t;return{metaSiteId:n,userId:r,roles:i}}function h(e,t){try{const n=f(e).metaSiteId;return n===f(t).metaSiteId}catch(e){return console.error(e),!1}}function m(e){return(e=e[0].toLowerCase()+e.slice(1)).replace(/[_]+$/g,"").replace(/([^_]?)[_]+([^_])/g,(function(e,t,n){return t?t.toLowerCase()+n.toUpperCase():n.toLowerCase()}))}const g=e=>Object.keys(e).map((t=>encodeURIComponent(t)+"="+encodeURIComponent(e[t]))).join("&").replace(/%20/g,"+");function v(e){const t={};return Object.keys(e).forEach((function(n){const r=e[n];void 0!==r&&(t[n]=r)})),t}function y(e){return e?Array.isArray(e)?e:e.split(/\s*,\s*/):[]}function _(e){if("string"!=typeof e)throw new Error("URI is not a string");return e.replace(/([a-z\-_0-9]+)\/\//gi,"$1/")}function b(e,t,n){return Array.isArray(e)?e.slice().sort((function(e,r){let i=0;return e[t]<r[t]?i=-1:e[t]>r[t]&&(i=1),"desc"===n?-i:i})):[]}function w(e,t){if(!e.length)return{};const n=b(e,"width");return Object.keys(t).reduce((function(e,r){const i=t[r],o=n.find((function(e){return"fill"===i.mode?(t=i,(n=e).width>=t.width&&n.height>=t.height):function(e,t){return t.width>=e.width||t.height>=e.height}(i,e);var t,n}));return e[r+"Url"]=o?o.url:n[n.length-1].url,e}),{})}function U(e){return(e||"").replace(/<\/?[a-z]+.*?>/gi,"")}function T(e){return e?Math.floor(new Date(e).getTime()/1e3):null}function x(e){return e.split(":")[0]}function k(e,t,n){let r;return n?(r=t.map(n),t[r.indexOf(Math[e].apply(null,r))]):Math[e].apply(this,t)}const S=d(k,"min"),E=d(k,"max"),P=e=>{const t=new RegExp("(?:^|\\W)"+e+"s*=([^;]*)"),n=window.document.cookie.match(t);return n?n[1].trim():null},O=e=>c(e,"data.error_description","");function I(e){if(!e)return null;if("string"==typeof e){if(["{","["].indexOf(e[0])>=0)try{return JSON.parse(e)}catch(e){return{error_code:-100,error_description:"Can`t parse JSON",error_info:{key:"wmp_error.cant_parse_json"}}}return{message:e}}return e}function A(e){const t=O(e);let n;n="Missing Wix session"===t?"Wix Session required":"site_token"===t?"Site token has expired":"Tokens mismatch"===t?"Tokens mismatch":e.statusText||c(e,"message.description",e.message)||c(e,"data.message")||c(e,"data.error.message")||t||"";const r=new Error(n);return r.code=e.status||e.code,r.data=e.data&&(e.data.errors||e.data.error||e.data),r.config=e.config,e.name&&(r.name=e.name),r}function R(e){return 403===e.status&&"Missing Wix session"===O(e)&&(e.status=401,e.data.message="Wix Session required"),Promise.reject(e)}var M=n(206),C=n.n(M),j=n(399),z=n.n(j);const F={JSON:"application/json",UrlEncoded:"application/x-www-form-urlencoded",Multipart:"multipart/form-data"},N={Upload:"upload"},L={Waiting:"waiting",Uploading:"uploading",Processing:"processing",Succeeded:"succeeded",Failed:"failed"},D={withCredentials:!1,cache:!0,headers:{Accept:"application/json, text/plain, */*"}},q=e=>C().isCancel(e),B=e=>{const{data:t,status:n,statusText:r,request:i,headers:o={}}=e,a={request:i,data:"string"==typeof t?{message:t}:t,status:n,statusText:r,responseSize:o["Content-Length"]||c(i,"responseText.length",1)},s=o["x-upload-timings"];return s&&(a.uploadTimingsHeaders=s),a},V=e=>{if(q(e))return Promise.reject(e);let t={};return t=e.response?{name:"MediaManagerSDKResponseError",config:e.response.config,status:e.response.status,statusText:e.response.statusText,message:c(e.response.data,["error_description"],e.response.data),code:e.response.status,data:e.response.data,request:e.request,errorInfo:{key:c(e,"response.request.responseText","load_error")}}:e.request?{name:"MediaManagerSDKNoResponseError",config:e.config,status:e.request.status,statusText:e.request.statusText,message:e.message,stack:e.stack,code:e.request.status,request:e.request,errorInfo:{key:c(e,"request.statusText","load_error")}}:{name:"MediaManagerSDKSendError",config:e.config,status:0,statusText:"",message:e.message,stack:e.stack,code:0,errorInfo:{key:"load_error"}},Promise.reject(A(t))};function H(e,t){if(e=v(e),-1!==t.indexOf(F.JSON))return JSON.stringify(e);if(-1!==t.indexOf(F.UrlEncoded))return g(e);if(-1!==t.indexOf(F.Multipart)){const t=new FormData;return Object.keys(e).forEach((function(n){const r=e[n],i="file"===n?[n,r,r.name]:[n,r];t.append.apply(t,i)})),t}}const W=function(e){let{abort:t,cancelToken:n,progressEventEmitter:r,tusOptions:i}=void 0===e?{}:e;const o={};if(n&&t&&i)o.abort=t,o.cancelToken=n,o.tusOptions=i;else{const e=C().CancelToken.source();o.abort=(e=>function(t){return void 0===t&&(t="aborted by user"),e.cancel(t)})(e),o.cancelToken=e.token,o.tusOptions={}}return o.progressEventEmitter=r||new(z()),o};function G(e){void 0===e&&(e={});let t={},n=!1,r=s;function i(e,r,i,o){void 0===o&&(o={}),!1===i.cache&&(r+=(-1===r.indexOf("?")?"?":"&")+"_="+Date.now()),n&&(t={},n=!1),o=W(o),i.withProgress||o.progressEventEmitter.emit(N.Upload,{status:L.Uploading,total:100,loaded:0});const a={url:_(r),method:e,headers:i.headers||{},params:i.params,data:i.data,withCredentials:i.withCredentials,cancelToken:o.cancelToken,xsrfCookieName:""};i.withProgress&&(a.onUploadProgress=e=>{const t=Math.round(e.lengthComputable?100*e.loaded/e.total:0);o.progressEventEmitter.emit(N.Upload,{status:t<=99?L.Uploading:L.Processing,total:e.total,loaded:e.loaded})});const s=C()(a).then((e=>(i.withProgress||o.progressEventEmitter.emit(N.Upload,{status:L.Processing,total:100,loaded:100}),B(e))),V);return s.cancelAndProgressConfig=o,s}function o(n){if("get"===n.toLowerCase())throw new Error('please use "getRequest" function instead. This function is for other methods');return function(r,o,a,s,c){o=o||{},a=a||{};const l=u(D,{headers:{"Content-Type":"application/json; charset=utf-8"}},e,s=s||{});return delete l.params,o=H(o={...o,...e.params,...t.params},l.headers["Content-Type"]),s={params:a,...l,data:o},i(n,r,s,c)}}const a=o("post"),c=o("put"),l=o("delete"),d=o("head");function p(e,t){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];const o=this,a=s();function s(){return e.apply(o,r)}const u=new Promise((function(e,n){a.then(e,(function(e){return void 0!==t?t.call(this,e,s):Promise.reject(e)})).then(e,n)}));return u.cancelAndProgressConfig=a.cancelAndProgressConfig,u}}function f(e){return p(e,((e,t)=>q(e)||406===e.code||403===e.code?Promise.reject(e):(r(),t())))}return{get:f((function(n,r,o,a){return r=v({...r,...e.params,...t.params}),i("get",n,o=u(D,e,o,{params:r}),a)})),post:f(a),put:f(c),del:f(l),head:d,upload:f((function(t,n,r,o){return i("post",t,{...u(D,r),data:H({...n,...e.params},F.Multipart),withProgress:!0},o)})),catchError:p,setRequestOptionsOnce:function(e){n=!0,t=e,r=()=>{n=!0,t=e}}}}const J={};function K(e,t){e.forEach((function(e){e(t)}))}function Q(e,t,n){e.forEach((function(e){e[t](n)}))}function Y(e,t,n){if("object"!=typeof e||null===e)throw new Error("target should be a function");if("string"!=typeof t)throw new Error("eventName should be a string");if((n=n||{}).eventTarget=e,n.eventName=t,n.promises&&n.promises.length)return function(e,t,n){if(void 0===J[t])return{resolveAt:s,rejectAt:s};const r=[],i=[];return J[t].forEach((function(e){const t=[],o=[],a=n.promises.map((function(){return new Promise((function(e,n){t.push(e),o.push(n)}))}));r.push(t),i.push(o),e(a,n)})),{resolveAt(e,t){Q(r,e,t)},rejectAt(e,t){Q(i,e,t)}}}(0,t,n);if(void 0===J[t])return{resolve:s,reject:s};const r=[],i=[];return J[t].forEach((function(e){e(new Promise((function(e,t){r.push(e),i.push(t)})),n)})),{resolve(e){K(r,e)},reject(e){K(i,e)}}}function $(e,t,n,r){const i=Promise.resolve(r);n.promises=[i];const o=Y(e,t,n);return i.then((function(e){o.resolveAt(0,e)})),o}function X(e,t){void 0===J[e]&&(J[e]=[]),J[e].push(t)}function Z(e,t){if(J[e]){const n=J[e].indexOf(t);J[e].splice(n,1)}}function ee(e,t){if(void 0===t&&(t={}),"function"!=typeof e)throw new Error("Source constructor should be a function");if(void 0!==t&&("object"!=typeof t||null===t))throw new Error("Source settings should be an object");return new e(t,Y,G())}const te={FOLDERS:{LIST:"folders.list",TREE:"folders.tree",REMOVE:"folders.remove",SEARCH:"folders.search",TRASH:{LIST:"folders.trash.list",RESTORE:"folders.trash.restore",REMOVE:"folders.trash.remove",SEARCH:"folders.trash.search"}},FOLDER:{CREATE:"folder.create",UPDATE:"folder.update",GET:"folder.get"},ITEMS:{GET:"items.get",LIST:"items.list",LIGHT_LIST:"items.lightList",REMOVE:"items.remove",RECENT:"items.recent",SEARCH:"items.search",SEARCH_BY_TAG:"items.searchByTag",COPY:"items.copy",MOVE:"items.move",ADD:"items.add",IMPORT_TO_SITE:"items.importToSite",TRASH:{LIST:"items.trash.list",RESTORE:"items.trash.restore",REMOVE:"items.trash.remove",SEARCH:"folders.trash.search"},SITE_MEDIA:{LIST:"items.siteMedia.list",REMOVE:"items.siteMedia.remove",ADD:"items.siteMedia.add"}},ITEM:{GET:"item.get",UPDATE:"item.update",UPLOAD:"item.upload",UPLOAD_RESUMABLE:"item.uploadResumable",UPLOAD_BY_URL:"item.uploadByUrl",IMPORT_ASYNC:"item.importAsync",GET_DOWNLOAD_URL:"item.getDownloadUrl"},SOURCE:{GET_BOARDS:"source.getBoards"},USER:{GET:"user.get",GET_SITES_INFO:"user.getSitesInfo",GET_MANAGER_INFO:"user.getManagerInfo"},TRASH:{REMOVE:"trash.remove",RESTORE:"trash.restore",EMPTY:"trash.empty"},PREFERENCES:{MEDIA_CATEGORIES:"preferences.mediaCategories",UPDATE_MEDIA_CATEGORIES:"preferences.updateMediaCategories"},TOPICS:{LIST:"topics.list"}},ne={FAILED:"FAILED",IN_QUEUE:"IN-QUEUE",INPROGRESS:"INPROGRESS",PREVIEW_READY:"PREVIEW_READY",READY:"READY"},re=6e4;function ie(e,t,n,r,i){let{path:o="/files"}=void 0===i?{}:i;return function(i){function a(e){Y(t,te.ITEM.UPDATE,{arguments:[e.data,e.data]}).resolve(e)}return new Promise((function(s,u){!function c(){setTimeout((function(){r.get(""+e.apiUrl+o+"/"+i,null,{cache:!1}).then((function(r){const i=r.data.op_status;if(i===ne.READY){const e=r.data.file_name;return t.item.get(e).then(a),void s(e)}a({data:n(r.data,e,{},!0)}),i!==ne.FAILED?c():u("Item transcoding failed")})).catch(c)}),re)}()}))}}const oe={};oe.version="1.0.1";const ae=function(){let e=0;const t=new Array(256);for(let n=0;256!=n;++n)e=n,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,e=1&e?-306674912^e>>>1:e>>>1,t[n]=e;return"undefined"!=typeof Int32Array?new Int32Array(t):t}();oe.table=ae,oe.bstr=function(e,t){let n=-1^t;const r=e.length-1;for(var i=0;i<r;)n=n>>>8^ae[255&(n^e.charCodeAt(i++))],n=n>>>8^ae[255&(n^e.charCodeAt(i++))];return i===r&&(n=n>>>8^ae[255&(n^e.charCodeAt(i))]),n},oe.buf=function(e,t){if(e.length>1e4)return function(e,t){let n=-1^t;const r=e.length-7;for(var i=0;i<r;)n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])];for(;i<r+7;)n=n>>>8^ae[255&(n^e[i++])];return n}(e,t);let n=-1^t;const r=e.length-3;for(var i=0;i<r;)n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])],n=n>>>8^ae[255&(n^e[i++])];for(;i<r+3;)n=n>>>8^ae[255&(n^e[i++])];return n},oe.str=function(e,t){let n=-1^t,r=0;const i=e.length;let o,a;for(;r<i;)o=e.charCodeAt(r++),o<128?n=n>>>8^ae[255&(n^o)]:o<2048?(n=n>>>8^ae[255&(n^(192|o>>6&31))],n=n>>>8^ae[255&(n^(128|63&o))]):o>=55296&&o<57344?(o=64+(1023&o),a=1023&e.charCodeAt(r++),n=n>>>8^ae[255&(n^(240|o>>8&7))],n=n>>>8^ae[255&(n^(128|o>>2&63))],n=n>>>8^ae[255&(n^(128|a>>6&15|(3&o)<<4))],n=n>>>8^ae[255&(n^(128|63&a))]):(n=n>>>8^ae[255&(n^(224|o>>12&15))],n=n>>>8^ae[255&(n^(128|o>>6&63))],n=n>>>8^ae[255&(n^(128|63&o))]);return n};const se={FileStatusChanged:"fileStatusChanged",QueueChanged:"queueChanged",UploadQueueStarted:"uploadQueueStarted",UploadQueueFinished:"uploadQueueFinished"},ue=()=>{let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return{resolve:e,reject:t,promise:n}};var ce=n(132),le=n.n(ce),de=n(431),pe=n(737),fe=n.n(pe);function he(e){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},he(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ge(e){var t=_e();return function(){var n,r=we(e);if(t){var i=we(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ve(e){var t="function"==typeof Map?new Map:void 0;return ve=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ye(e,arguments,we(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),be(r,e)},ve(e)}function ye(e,t,n){return ye=_e()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&be(i,n.prototype),i},ye.apply(null,arguments)}function _e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function be(e,t){return be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},be(e,t)}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}var Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(o,e);var t,n,r,i=ge(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=i.call(this,e)).originalRequest=r,t.originalResponse=a,t.causingError=n,null!=n&&(e+=", caused by ".concat(n.toString())),null!=r){var s=r.getHeader("X-Request-ID")||"n/a",u=r.getMethod(),c=r.getURL(),l=a?a.getStatus():"n/a",d=a?a.getBody()||"":"n/a";e+=", originated from request (method: ".concat(u,", url: ").concat(c,", response code: ").concat(l,", response text: ").concat(d,", request id: ").concat(s,")")}return t.message=e,t}return t=o,n&&me(t.prototype,n),r&&me(t,r),t}(ve(Error)),Te=Ue,xe=!1;function ke(e){xe&&console.log(e)}function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ie={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},Ae=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=+this.options.chunkSize,this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,n,r;return t=e,n=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl){var n=this.options.retryDelays;null==n||"[object Array]"===Object.prototype.toString.call(n)?(this.options.parallelUploads>1&&["uploadUrl","uploadSize","uploadLengthDeferred"].forEach((function(t){e.options[t]&&e._emitError(new Error("tus: cannot use the ".concat(t," option when parallelUploads is enabled")))})),this.options.fingerprint(t,this.options).then((function(n){return ke(null==n?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(n)),e._fingerprint=n,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){e._source=t,e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))):this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t=this,n=this._size=this._source.size,r=0;this._parallelUploads=[];var i=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,o=function(e,t,n){for(var r=Math.floor(e/t),i=[],o=0;o<t;o++)i.push({start:r*o,end:r*(o+1)});return i[t-1].end=e,n&&i.forEach((function(e,t){e.uploadUrl=n[t]||null})),i}(this._source.size,i,this._parallelUploadUrls);this._parallelUploadUrls=new Array(o.length);var a,s=o.map((function(i,a){var s=0;return t._source.slice(i.start,i.end).then((function(u){var c=u.value;return new Promise((function(u,l){var d=Ee(Ee({},t.options),{},{uploadUrl:i.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,metadata:{},headers:Ee(Ee({},t.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:l,onProgress:function(e){r=r-s+e,s=e,t._emitProgress(r,n)},_onUploadUrlAvailable:function(){t._parallelUploadUrls[a]=p.url,t._parallelUploadUrls.filter((function(e){return!!e})).length===o.length&&t._saveUploadInUrlStorage()}}),p=new e(c,d);p.start(),t._parallelUploads.push(p)}))}))}));Promise.all(s).then((function(){(a=t._openRequest("POST",t.options.endpoint)).setHeader("Upload-Concat","final;".concat(t._parallelUploadUrls.join(" ")));var e=Re(t.options.metadata);return""!==e&&a.setHeader("Upload-Metadata",e),t._sendRequest(a,null)})).then((function(e){if(Me(e.getStatus(),200)){var n=e.getHeader("Location");null!=n?(t.url=Fe(t.options.endpoint,n),ke("Created upload at ".concat(t.url)),t._emitSuccess()):t._emitHttpError(a,e,"tus: invalid or missing Location header")}else t._emitHttpError(a,e,"tus: unexpected response while creating upload")})).catch((function(e){t._emitError(e)}))}},{key:"_startSingleUpload",value:function(){if(this.options.uploadLengthDeferred)this._size=null;else if(null!=this.options.uploadSize){if(this._size=+this.options.uploadSize,isNaN(this._size))return void this._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(this._size=this._source.size,null==this._size)return void this._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));return this._aborted=!1,null!=this.url?(ke("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(ke("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(ke("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var n=this;if(arguments.length>1&&"function"==typeof arguments[1])throw new Error("tus: the abort function does not accept a callback since v2 anymore; please use the returned Promise instead");return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&(this._req.abort(),this._source.close()),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return n._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,n,r){this._emitError(new Te(n,r,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),ze(e,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),n))}if("function"!=typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"==typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"==typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"==typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var n,r=Re(this.options.metadata);""!==r&&t.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(t)):n=this._sendRequest(t,null),n.then((function(n){if(Me(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(e.url=Fe(e.options.endpoint,r),ke("Created upload at ".concat(e.url)),"function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage(),e.options.uploadDataDuringCreation?e._handleUploadResponse(t,n):(e._offset=0,e._performUpload())}else e._emitHttpError(t,n,"tus: invalid or missing Location header")}else e._emitHttpError(t,n,"tus: unexpected response while creating upload")})).catch((function(n){e._emitHttpError(t,null,"tus: failed to create upload",n)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(n){var r=n.getStatus();if(!Me(r,200))return Me(r,400)&&e._removeFromUrlStorage(),423===r?void e._emitHttpError(t,n,"tus: upload is currently locked; retry later"):e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)");var i=parseInt(n.getHeader("Upload-Offset"),10);if(isNaN(i))e._emitHttpError(t,n,"tus: invalid or missing offset value");else{var o=parseInt(n.getHeader("Upload-Length"),10);if(!isNaN(o)||e.options.uploadLengthDeferred){if("function"==typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),i===o)return e._emitProgress(o,o),void e._emitSuccess();e._offset=i,e._performUpload()}else e._emitHttpError(t,n,"tus: invalid or missing length value")}})).catch((function(n){e._emitHttpError(t,null,"tus: failed to resume upload",n)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(n){Me(n.getStatus(),200)?t._handleUploadResponse(e,n):t._emitHttpError(e,n,"tus: unexpected response while uploading chunk")})).catch((function(n){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),n)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,n=this._offset,r=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(n+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then((function(n){var r=n.value,i=n.done;return t.options.uploadLengthDeferred&&i&&(t._size=t._offset+(r&&r.size?r.size:0),e.setHeader("Upload-Length",t._size)),null===r?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,r))}))}},{key:"_handleUploadResponse",value:function(e,t){var n=parseInt(t.getHeader("Upload-Offset"),10);if(isNaN(n))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n==this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var n=Ce(e,t,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(this.options.storeFingerprintForResuming&&this._fingerprint){var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){return e._urlStorageKey=t})).catch((function(t){e._emitError(t)}))}}},{key:"_sendRequest",value:function(e){return je(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,this.options)}}],r=[{key:"terminate",value:function(t,n){if(arguments.length>1&&"function"==typeof arguments[arguments.length-1])throw new Error("tus: the terminate function does not accept a callback since v2 anymore; please use the returned Promise instead");void 0===n&&(n={});var r=Ce("DELETE",t,n);return je(r,null,n).then((function(e){if(204!==e.getStatus())throw new Te("tus: unexpected response while terminating upload",null,r,e)})).catch((function(i){if(i instanceof Te||(i=new Te("tus: failed to terminate upload",i,r,null)),!ze(i,0,n))throw i;var o=n.retryDelays[0],a=n.retryDelays.slice(1),s=Ee(Ee({},n),{},{retryDelays:a});return new Promise((function(e){return setTimeout(e,o)})).then((function(){return e.terminate(t,s)}))}))}}],n&&Oe(t.prototype,n),r&&Oe(t,r),e}();function Re(e){var t=[];for(var n in e)t.push("".concat(n," ").concat(de.Base64.encode(e[n])));return t.join(",")}function Me(e,t){return e>=t&&e<t+100}function Ce(e,t,n){var r=n.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var i=n.headers||{};for(var o in i)r.setHeader(o,i[o]);if(n.addRequestId){var a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));r.setHeader("X-Request-ID",a)}return r}function je(e,t,n){return("function"==typeof n.onBeforeRequest?Promise.resolve(n.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"==typeof n.onAfterResponse?Promise.resolve(n.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function ze(e,t,n){if(null==n.retryDelays||t>=n.retryDelays.length||null==e.originalRequest)return!1;if(n&&"function"==typeof n.onShouldRetry)return n.onShouldRetry(e,t,n);var r,i=e.originalResponse?e.originalResponse.getStatus():0;return(!Me(i,400)||409===i||423===i)&&(r=!0,"undefined"!=typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(r=!1),r)}function Fe(e,t){return new(fe())(t,e).toString()}Ae.defaultOptions=Ie;var Ne=Ae;function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var De=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&Le(t.prototype,n),r&&Le(t,r),e}();function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Be=!1;try{Be="localStorage"in window;var Ve="tusSupport";localStorage.setItem(Ve,localStorage.getItem(Ve))}catch(e){if(e.code!==e.SECURITY_ERR&&e.code!==e.QUOTA_EXCEEDED_ERR)throw e;Be=!1}var He=Be,We=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var n=Math.round(1e12*Math.random()),r="tus::".concat(e,"::").concat(n);return localStorage.setItem(r,JSON.stringify(t)),Promise.resolve(r)}},{key:"_findEntries",value:function(e){for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(e))try{var i=JSON.parse(localStorage.getItem(r));i.urlStorageKey=r,t.push(i)}catch(e){}}return t}}],n&&qe(t.prototype,n),r&&qe(t,r),e}();function Ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t,n){return t&&Je(e.prototype,t),n&&Je(e,n),e}var Qe=function(){function e(){Ge(this,e)}return Ke(e,[{key:"createRequest",value:function(e,t){return new Ye(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Ye=function(){function e(t,n){Ge(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}}return Ke(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){e._xhr.onload=function(){n(new $e(e._xhr))},e._xhr.onerror=function(e){r(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),$e=function(){function e(t){Ge(this,e),this._xhr=t}return Ke(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),Xe=function(){return"undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};var Ze=function(){return"undefined"!=typeof window&&(void 0!==window.PhoneGap||void 0!==window.Cordova||void 0!==window.cordova)};function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}var t,n,r;return t=e,n=[{key:"slice",value:function(e,t){if(Ze())return n=this._file.slice(e,t),new Promise((function(e,t){var r=new FileReader;r.onload=function(){var t=new Uint8Array(r.result);e({value:t})},r.onerror=function(e){t(e)},r.readAsArrayBuffer(n)}));var n,r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}],n&&et(t.prototype,n),r&&et(t,r),e}();function nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rt(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var it=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._chunkSize=n,this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}var t,n,r;return t=e,(n=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var n=this,r=t<=this._bufferOffset+rt(this._buffer);if(this._done||r){var i=this._getDataFromBuffer(e,t),o=null==i&&this._done;return Promise.resolve({value:i,done:o})}return this._reader.read().then((function(r){var i=r.value;return r.done?n._done=!0:void 0===n._buffer?n._buffer=i:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(n._buffer,i),n._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===rt(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}])&&nt(t.prototype,n),r&&nt(t,r),e}();function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var at=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"openFile",value:function(e,t){return Xe()&&e&&void 0!==e.uri?(n=e.uri,new Promise((function(e,t){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var t=r.response;e(t)},r.onerror=function(e){t(e)},r.open("GET",n),r.send()}))).then((function(e){return new tt(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"==typeof e.slice&&void 0!==e.size?Promise.resolve(new tt(e)):"function"==typeof e.read?(t=+t,isFinite(t)?Promise.resolve(new it(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var n}}],n&&ot(t.prototype,n),r&&ot(t,r),e}();function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ct(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dt(e);if(t){var i=dt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===st(t)||"function"==typeof t))return t;return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function dt(e){return dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},dt(e)}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mt=ft(ft({},Ne.defaultOptions),{},{httpStack:new Qe,fileReader:new at,urlStorage:He?new We:new De,fingerprint:function(e,t){return Xe()?Promise.resolve(function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(o,e);var t,n,r,i=lt(o);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=ft(ft({},mt),t),i.call(this,e,t)}return t=o,r=[{key:"terminate",value:function(e,t,n){return t=ft(ft({},mt),t),Ne.terminate(e,t,n)}}],(n=null)&&ut(t.prototype,n),r&&ut(t,r),o}(Ne),vt=window,yt=vt.XMLHttpRequest,_t=vt.Blob,bt=yt&&_t&&"function"==typeof _t.prototype.slice;const wt={WITH_RESPONSE:"MediaManagerSDKResponseError",NETWORK_ERROR:"MediaManagerSDKNetworkError",NO_RESPONSE_ERROR:"MediaManagerSDKNoResponseError",DEFAULT_ERROR:"MediaManagerSDKNoResponseError"},Ut={FAIL_RESUME:"files-manager.upload-tab-body-fail-resume",GENERAL:"wmp_error.general",CONNECTIVITY:"files-manager.upload-tab-body-connectivity",NO_RESPONSE:"files-manager.upload-tab-body-no-response-error",SERVER:"files-manager.upload-tab-body-stopped"},Tt=e=>{if(e.data&&e.data.error_info.key)switch(e.data.error_info.key){case Ut.FAIL_RESUME:return"resume_error";case Ut.SERVER:return"technical_issue";case Ut.CONNECTIVITY:case Ut.NO_RESPONSE:return"connectivity_issue";case Ut.GENERAL:return"general_error";default:return e.data.error_info.key}return""};function xt(e){const t={error_code:"",error_description:"",error_info:{key:"",message:"",args:[""]}};return-1!==[403,404,409,410].indexOf(e)?(t.error_code=403,t.error_info.key=Ut.FAIL_RESUME):-1!==[400,412,415].indexOf(e)?(t.error_code=400,t.error_info.key=Ut.GENERAL):-1!==[0].indexOf(e)?(t.error_code=0,t.error_info.key=Ut.CONNECTIVITY):(t.error_code=e,t.error_info.key=Ut.SERVER),t}function kt(e,t,n,r,i){return{name:i,status:n,statusText:r,message:e.message,code:n,config:{},stack:e.stack,data:t,request:e.originalRequest}}function St(e,t,n,r){let i;if(n(!0),e.originalResponse){const{status:t,statusText:n}=e.originalResponse._xhr,r=xt(t);i=kt(e,r,r.error_code,n,wt.WITH_RESPONSE)}else if(navigator.onLine){const t=xt(0);r(!0),i=kt(e,t,t.error_code,"",wt.NO_RESPONSE_ERROR)}else{const t=xt(0);i=kt(e,t,t.error_code,"",wt.NETWORK_ERROR)}500===i.data.error_code&&r(!0),t.uploadPromiseReject(A(i))}const Et=(e,t,n)=>{e.progressEventEmitter.emit(N.Upload,{status:L.Uploading,total:n,loaded:t})},Pt=(e,t,n)=>({...n.headers,endpoint:e,chunkSize:104857600,retryDelays:[0,1e3,2e3,3e3],metadata:t});const Ot=(e,t,n,r)=>e.put(function(e,t){return e+"/"+t}(t,n),null,r);const It=e=>e.status===L.Waiting||e.status===L.Uploading;function At(e,t){let n;if(e.status=L.Uploading,e.isResumable())n=e.cancelAndProgressConfig.tusOptions.resume();else{const i=t.uploadFn(e.source,e.options,e.cancelAndProgressConfig,e.isTus);n=(r=i).then?r:Promise.resolve(r)}var r;e.uploadPromise=n.then((function(t){e.deferred.resolve(t)})).catch((function(t){e.failedOnStage=e.status,e.status=L.Failed,e.error=t,e.bi.TusErrorReason=e.isTus?Tt(t):"",e.deferred.reject(t)}))}function Rt(e){return{id:a(),isTus:e.options&&e.options.isTus&&bt||!1,bi:{manualResumeCount:0,autoResumeCount:0,uploadType:"upload",TusErrorReason:""},adapter:e.adapter||{},source:e.source,options:e.options,status:L.Waiting,canReportStatusChange:!0,cancelAndProgressConfig:W(),bytesLoaded:0,currentChunkBytesLoaded:0,deferred:ue(),setCanReportStatusChange(e){this.canReportStatusChange=e},isAborted(){return q(this.error)},error:{},upload(){return this.isAborted()||At(this,e),this.uploadPromise},abort(){var e;if(It(this))return this.status===L.Waiting?((e=this).deferred.promise.catch((function(t){e.failedOnStage=e.status,e.status=L.Failed,e.error=t})),void e.deferred.reject(new(le())("aborted early by user"))):void(this.isTus?this.cancelAndProgressConfig.tusOptions.abort():this.cancelAndProgressConfig.abort())},canRetry(){if(this.isAborted())return!0;return this.status===L.Failed&&-1!==[-201,401,403,408].indexOf(this.error.code)},isResumable(){return this.isTus&&this.cancelAndProgressConfig.tusOptions.isResumable&&this.cancelAndProgressConfig.tusOptions.isResumable()},isInAutoResume(){return this.isResumable()&&this.cancelAndProgressConfig.tusOptions.shouldTryToResume&&this.cancelAndProgressConfig.tusOptions.shouldTryToResume()},canResume(){return this.isAborted()&&this.isResumable()},signUpForResume(e){void 0===e&&(e=!1),function(e,t){t?(e.bi.uploadType="auto_resumed",e.bi.autoResumeCount+=1):(e.bi.manualResumeCount+=1,e.bi.uploadType="user_resumed")}(this,e),this.status=L.Waiting,this.error={},this.deferred=ue()},signUpForRetry(){this.bi.uploadType="upload",this.status=L.Waiting,this.error={},this.cancelAndProgressConfig=W(),this.deferred=ue()},canAbort(){return It(this)},getFileSize(){return this.source.file?this.source.file.size:1}}}const Mt=[];let Ct,jt=1,zt=!1,Ft=0,Nt=null;const Lt=new(z());function Dt(){Ct||(Ct=window.setInterval((function(){!function(){const e=Ht();0===e.length&&(window.clearTimeout(Ct),Ct=null);e.forEach((e=>{e.cancelAndProgressConfig.tusOptions.tryToResume().then((t=>{t?e.signUpForResume(!0):Dt()}))}))}()}),5e3))}window.addEventListener("online",(function(){!function(e){e.forEach((e=>{e.signUpForResume(!0)}))}(Vt())})),Dt();const qt=()=>Mt.some((e=>e.status===L.Waiting)),Bt=()=>Mt.filter((e=>e.status===L.Waiting)),Vt=()=>Mt.filter((e=>e.status===L.Failed&&e.isTus&&e.error.name===wt.NETWORK_ERROR)),Ht=()=>Mt.filter((e=>e.isInAutoResume())),Wt=()=>Mt.filter((e=>-1!==[L.Uploading,L.Processing].indexOf(e.status))),Gt=()=>Mt.some((e=>-1!==[L.Uploading,L.Processing].indexOf(e.status))),Jt=e=>t=>{-1===[L.Failed,L.Succeeded].indexOf(e.status)?e.status=t.status:t.status=e.status;const n=e.getFileSize();e.bytesLoaded=t.loaded>=n?n:t.loaded,t.file=e,e.canReportStatusChange&&Lt.emit(se.FileStatusChanged,{bytesTotalUploaded:Ft+Qt(e,t),bytesTotal:Mt.reduce(((e,t)=>e+t.getFileSize()),0),currentFileProgress:t,currentFileQueueIdx:Mt.indexOf(e),queue:Mt})};function Kt(){qt()||Gt()||Nt.resolve();const e=e=>{var t;return!(null==e||null==(t=e.options)||!t.bypassMaxParallelUploads)},t=Bt(),n=t.filter(e),r=t.filter((t=>!e(t))),i=jt-Wt().filter((t=>!e(t))).length,o=[...n,...r.slice(0,i)];return 0===o.length||o.forEach((e=>{const t=e.getFileSize();Jt(e)({status:L.Uploading,total:t,loaded:0});e.upload().then((e=>(Kt(),Dt(),e))).catch((()=>{Kt()}))})),Nt.promise}function Qt(e,t){switch(t.status){case L.Uploading:return Math.min(t.loaded,e.getFileSize());case L.Succeeded:case L.Processing:return e.getFileSize();case L.Failed:default:return 0}}function Yt(){zt?Kt():(Nt=ue(),zt=!0,Lt.emit(se.UploadQueueStarted,Mt),Kt().then((()=>{zt=!1,Lt.emit(se.UploadQueueFinished,Mt)})).catch(s))}function $t(e){const t=Jt(e),n=e.getFileSize();e.cancelAndProgressConfig.progressEventEmitter.on(N.Upload,t);const r=()=>e.cancelAndProgressConfig.progressEventEmitter.off(N.Upload,t);e.deferred.promise.then((i=>{e.serverResponse=i,t({status:L.Succeeded,total:n,loaded:n}),Ft+=n,r()})).catch((i=>{e.serverResponse=i,t({status:L.Failed,total:n,loaded:0}),r()}))}async function Xt(){if(zt)throw new Error("Upload queue can not be cleared while upload is running");Mt.length=0,Ft=0}const Zt={on:Lt.on.bind(Lt),off:Lt.off.bind(Lt),upload:function(e){e=e||[],zt||Mt.some((e=>e.canRetry()))||Xt();const t=e.map(Rt).map((e=>($t(e),function(e){const t=e.signUpForRetry;e.signUpForRetry=function(){t.apply(e,arguments),$t(e),Yt()}}(e),function(e){const t=e.signUpForResume;e.signUpForResume=function(){t.apply(e,arguments),$t(e),Yt()}}(e),Mt.push(e),e)));return Lt.emit(se.QueueChanged,Mt),Yt(),t},cancelAllUploads:function(){Mt.forEach((e=>{e.abort()}))},clearQueue:Xt,removeItemFromQueue:function(e){if(!Mt.length)return;const t=Mt.indexOf(Mt.find((t=>t.id===e.id)));-1!==t&&Mt.splice(t,1),Lt.emit(se.QueueChanged,Mt)},set maxParallelUploads(e){jt=Number(e)||1},get maxParallelUploads(){return jt},get uploadQueue(){return Mt},get uploadIsInProgress(){return zt},get currentUploadedTotal(){return Ft}};function en(e,t){let n=document.createElement("img");n.setAttribute("src",(/\.wixpress\.com/i.test(document.location.host)||/local\./i.test(document.location.host)?"/images/43.gif?":"https://frog.wix.com")+e+"?"+g(t)+"&_="+o()),n=null}const tn={severity:{info:10,warning:20,error:30,fatal:40},BIEventsIds:{responseTime:"110",uploadSpeed:"142",uploadQueueStarted:"303",uploadQueueFinished:"304",resumableUploadStarted:"155",resumableUploadFinished:"156",resumableChunkUploadStarted:"157",resumableChunkUploadFinished:"158",apiTiming:"159"},BIAdaptersIds:{private:"01",public:"02",facebook:"03",flickr:"04",instagram:"05",flickrSearch:"07",googleSearch:"08",bigStock:"09",collection:"10",drive:"11",dropbox:"12",facebookVideo:"13",instagramVideo:"14",vimeo:"15",vimeoSearch:"16",youtube:"17",youtubeSearch:"18"},BIAdaptersRequestsIds:{"folders.list":"01","folders.remove":"02","folders.trash.list":"03","folders.trash.restore":"04","folders.trash.remove":"05","folder.create":"06","folder.update":"07","items.list":"11","items.remove":"12","items.search":"13","items.searchByTag":"14","items.trash.list":"15","items.trash.restore":"16","items.trash.remove":"17","item.get":"18","item.update":"19","item.upload":"20","item.uploadByUrl":"21","trash.remove":"22","trash.restore":"23"}};function nn(e){return e&&403===e.status&&e.data&&"Missing Wix session"===e.data.error_description&&(e.status=401,e.data.message="Wix Session required"),Promise.reject(e)}const rn=1048576;function on(e){return function(e){return new Promise((function(t,n){const r=new FileReader;r.readAsArrayBuffer(e),r.onload=function(e){const n=new Int32Array(e.target.result);t(n)},r.onerror=function(e){n(e)}}))}(e.slice(0,rn)).then((function(e){return oe.buf(e).toString(16)}),nn)}function an(e){const t=e.file,n=function(e){let t;return t=e.slice?"slice":e.mozSlice?"mozSlice":e.webkitSlice?"webkitSlice":"slice",t}(t),r=[];let i=0;const o=(a=t.size)<104857600?10485760:a<524288e3?26214400:a<2147483648?52428800:a<5368709120?104857600:Math.ceil(a/100);for(var a;i<t.size;)r.push(t[n](i,i+o)),i+=o;return r}function sn(e){return e.filter((function(e){return"READY"!==e.status}))}function un(e,t,n,r){function i(e,t,n,i,a,s,u){let l=0,d=0;t!==e.length&&(l=n.file.size-function(e){return e.reduce((function(e,t){return e+c(t,"data.resumableCurrentChunkSize",0)}),0)}(e));const p=Zt.uploadQueue.find((e=>e.source.file===n.file)),f=[];return new Promise((function(a,h){!function m(g){const v=e[g];if(!v)return void a(f);en("/mg",{src:26,evid:tn.BIEventsIds.resumableChunkUploadStarted,chunk_size:c(v,"data.chunk.size",-1),file_id:i,file_size:n.file.size,total_chunks:t});const y=o(),_=W();return _.progressEventEmitter.on(N.Upload,(function(e){const t=e.loaded>=e.total?e.total:e.loaded;l+=t-d,d=t;let r=L.Uploading;l>=n.file.size&&(r=L.Processing),u.progressEventEmitter.emit(N.Upload,{loaded:l,status:r,total:n.file.size})})),p.cancelAndProgressConfig.abort=function(){_.abort()},r.upload(v.uploadUrl,v.data,{...s,cancelAndProgressConfig:_}).then((function(e){const r=(o()-y)/1e3;en("/mg",{src:26,evid:tn.BIEventsIds.resumableChunkUploadFinished,chunk_size:c(v,"data.chunk.size",-1),file_id:i,file_size:n.file.size,total_chunks:t,upload_speed:Math.floor(n.file.size/r),upload_time:Math.floor(r)}),d=0,f.push(e.data),m(g+1)}),(function(e){return console.warn("upload file error",e),q(e)||u.progressEventEmitter.emit(N.Upload,{loaded:l,status:L.Failed,total:n.file.size}),Promise.reject(e)})).catch((function(e){console.warn("error uploading file",e),h(e)}))}(0)}))}return function(t,n,a){n=n||{};const s=o();let u;const c=an(t),l=new Promise((function(l,d){(function(e,t){const n=on(e.file.slice(0,rn)),r=on(e.file.slice(-rn));return Promise.all([n,r]).then((function(e){return e[0]+"_"+e[1]+"_"+t}),nn)})(t,c.length).then((function(e){u=e})).then((()=>function(t,n){const i=e.apiUrl+"/resumable/chunk/status",o={resumableIdentifier:t,resumableTotalChunks:n.length},a={withCredentials:!0,headers:{"Content-Type":F.UrlEncoded}};return r.post(i,o,null,a).then((e=>e.data.resumableChunks),nn)}(u,c).then(sn,nn))).then((function(e){en("/mg",{src:26,evid:tn.BIEventsIds.resumableUploadStarted,file_id:u,file_size:t.file.size,uploaded_chunks:c.length-e.length,total_chunks:c.length,chunks_status_time:Math.floor((o()-s)/1e3)});const r={resumableIdentifier:u,resumableTotalChunks:c.length,parent_folder_id:t.folderId||null,media_type:t.media_type};return i(e.map((function(e){const t={...r,chunk:c[e.chunkNumber],resumableChunkNumber:e.chunkNumber,resumableCurrentChunkSize:c[e.chunkNumber].size};return{uploadUrl:e.uploadUrl,data:t}})),c.length,t,u,0,n,a)})).then((function(n){const i=n.length;return function(t,n){const i={resumableIdentifier:t,content_type:n.file.type,file_name:n.file.name,media_type:n.media_type,parent_folder_id:n.parent_folder_id};return r.get(e.apiUrl+"/resumable/finalize",i)}(u,t).then((function(e){const n=t.file.size,r=(o()-s)/1e3;return en("/mg",{src:26,evid:tn.BIEventsIds.resumableUploadFinished,file_id:u,file_size:t.file.size,uploaded_chunks:i,total_chunks:c.length,upload_speed:Math.floor(n/r),upload_time:Math.floor(r)}),l(e)}),(function(e){return console.warn("finalize error",e),Promise.reject(e)}))})).catch((function(e){console.warn("resumable",e),d(e)}))}));return l}}function cn(){let e=null,t=null;this.get=()=>t,this.getPrevious=()=>e,this.set=n=>(e=t,t=n),this.randomize=()=>this.set(a()),this.reset=()=>this.set(null)}function ln(e,t,n){const r={...n};return Object.keys(t).forEach((function(i){const o=m(i.toLowerCase());"object"!=typeof n[o]||null===n[o]||"object"!=typeof t[i]||null===t[i]?"function"==typeof n[o]&&(r[o]=function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];const u=n[o].apply(n,a),c={arguments:a};let l;if(Array.isArray(u))return c.promises=u,l=Y(e,t[i],c),u.forEach((function(e,t){e.then((function(e){l.resolveAt(t,e)}),(function(e){l.rejectAt(t,e)}))})),u;l=Y(e,t[i],c);return u.then((function(e){return l.resolve(e),e}),(function(e){return l.reject(e),Promise.reject(e)}))}):r[o]=ln(e,t[i],n[o])})),r}const dn={File:"file",Folder:"folder",Board:"board",External:"external"},pn={SiteFiles:"media-root",Mobile:"mobile-uploads",Purchased:"purchased-items",VisitorUploads:"visitor-uploads",WixSite:"wix-sites",Trash:"trash-root",FreeFromWix:"photos"};function fn(e,t){const n=e.root_id===pn.VisitorUploads?"visitorsUploads":"private";return{id:e.folder_id,kind:dn.Folder,source:t.sourceName||n,parentId:e.parent_folder_id||null,name:e.folder_name,mediaType:e.media_type,filesCount:e.files_count,createdAt:e.created_ts,updatedAt:e.modified_ts,siteId:e.site_id,userId:e.user_id,tags:y(e.tags),siteMediaToken:e.token||t.siteMediaToken}}function hn(e){const t=O(e);return e&&403===e.status&&"Missing Wix session"===t?(e.status=401,e.message="Wix Session required",e.data.message="Wix Session required"):"site_token"===t?(e.message="Site token has expired",e.data.message="Site token has expired"):"Tokens mismatch"===t&&(e.message="Tokens mismatch",e.data.message="Tokens mismatch"),Promise.reject(e)}function mn(e){return"object"!=typeof e||null===e?{valid:!1,message:"Please specify new props"}:void 0===e.name||e.name?void 0===e.folderId||e.folderId||null===e.folderId?void 0===e.parentId||e.parentId||null===e.parentId?void 0===e.tags||Array.isArray(e.tags)?{valid:!0}:{valid:!1,message:"Tags should be an array"}:{valid:!1,message:"Please specify parent folder id"}:{valid:!1,message:"Please specify folder id"}:{valid:!1,message:"Please specify name"}}function gn(e,t){function n(t,n){return t.data=fn({...t.data,token:n},e),t}return{create:function(r,i){if(!r)return hn(A({status:-200,statusText:"Internal JS Error",data:{message:"Please specify name"}}));i=i||{};const o=e.apiUrl+"/site/media/folders",a={folder_name:r,parent_folder_id:i.parentId||null};e.namespace&&(a.ns=e.namespace);const s={headers:i.headers||{}};return t.post(o,a,null,s).then(n).catch(hn)},get:function(r,i){i=i||{};const o={};return e.namespace&&(o.ns=e.namespace),i.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:i.siteMediaToken}}),t.get(e.apiUrl+"/site/media/folders/"+r,o,{cache:!1,headers:i.headers||{}}).then((function(e){return n(e,i.thumbnails,i.siteMediaToken)})).catch(hn)},update:function(n,r,i){const o=mn(r);if(!1===o.valid)return hn(A({status:-200,statusText:"Internal JS Error",data:{message:o.message}}));const a={};r.name&&(a.folder_name=r.name),(r.parentId||null===r.parentId)&&(a.parent_folder_id=r.parentId),e.namespace&&(a.ns=e.namespace),(i=i||{}).siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:i.siteMediaToken}});const s=e.apiUrl+"/site/media/folders/"+n.id,u={headers:i.headers||{}};return t.put(s,a,null,u).then((function(e){return e.data={...n,...r},e})).catch(hn)}}}function vn(e,t){function n(t,n){return t.data=(t.data.folders||[]).map((function(t){return fn({...t,token:n},e)})),t}const r={size:50,cursor:null},i={order:"date",direction:"desc"};return{list:function(o,a){a=a||{};const s={...i,...a.sort},u={...r,...a.paging},c={page_size:u.size,cursor:u.cursor,parent_folder_id:o||null};return c.order="desc"===s.direction?"-"+s.order:s.order,e.namespace&&(c.ns=e.namespace),a.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:a.siteMediaToken}}),t.get(e.apiUrl+"/go/site/media/folders/list",c,{headers:a.headers||{}}).then((function(e){return e.paging={size:u.size,cursor:e.data.cursor},n(e,a.siteMediaToken)})).catch(hn)},remove:function(n,r){return r=r||{},n.map((function(n){return function(n,r){const i=e.apiUrl+"/site/media/folders/"+n,o={headers:r.headers||{}};return e.namespace&&(o.ns=e.namespace),t.del(i,null,null,o).then((function(e){return e.data={id:n},e})).catch(hn)}(n,r)}))},search:function(o,a,s){s=s||{};const u={...i,...s.sort},c={...r,...s.paging},l={query:a,page_size:c.size,cursor:c.cursor,media_type:s.mediaType,parent_folder_id:o||null,order:"desc"===u.direction?"-"+u.order:u.order};return e.namespace&&(l.ns=e.namespace),s.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:s.siteMediaToken}}),t.get(e.apiUrl+(e.useGoEndpointForSearch?"/go":"")+"/site/media/folders/search",l,{cache:!1,headers:s.headers||{}}).then((function(e){return e.paging={size:c.size,cursor:e.data.cursor},n(e,s.thumbnails,s.siteMediaToken)})).catch(hn)}}}const yn=e=>globalThis.performance&&"function"==typeof globalThis.performance[e],_n=()=>yn("now")?performance.now():0,bn=e=>yn("mark")?performance.mark(e):void 0,wn=function(){return yn("getEntriesByName")?performance.getEntriesByName(...arguments):[]},Un=(e,t)=>{if(!yn("measure"))return 0;const n=e+"-"+t;!function(){yn("measure")&&performance.measure(...arguments)}(n,e,t);const r=wn(n).pop();return r&&r.duration||0},Tn=e=>{const t=function(){return yn("getEntries")?performance.getEntries(...arguments):[]}();if(!t)return null;return b(t.filter((function(t){return t.name.indexOf(e)>=0})),"startTime").pop()},xn={Picture:"picture",Video:"video",Music:"music",Archive:"archive",SWF:"swf",Shape:"shape",Document:"document",SecureMusic:"secure_music",SecureVideo:"secure_video",SecureDocument:"secure_document",SecureArchive:"secure_archive"},kn=()=>(()=>{const e=P("bSession");if(!e)return{};const[t,n]=e.split("|");return{browsing_session:t,bsiPageNumber:n,bsi:e}})().bsi||"ca5caded-dead-feed-c0d5-ba11ad5c1a55",Sn=()=>function(e,t){if(e&&e.Utils&&"function"==typeof e.Utils[t]){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return e.Utils[t](...r)}}(window.Wix,"getInstanceValue","aid")||P("_wixCIDX"),En=()=>({bsi:kn(),visitor_id:Sn()});function Pn(e,t){const n=function(e){return(e.arguments||[]).find((e=>"string"==typeof e))}(t)||null,r=t.eventTarget,i=function(e,t){return c((e.arguments||[]).find((e=>e&&void 0!==e.correlationId)),["correlationId"],t)}(t,r.correlationId?r.correlationId.get():a()),o=c(t,["arguments","1","isFromMediaStudio"]),s=(e,a)=>{!function(e,t,n){const{fileId:r,correlationId:i,isSuccess:o,isFromMediaStudio:a,responseFileId:s,request:u}=n,c=u&&u.responseURL,l=wn(c).pop();if(!l)return;const d=l.duration,p=l.transferSize;if(!d||!p)return;const h=e.name+"("+t+")",m=p/(d/1e3);let g="";if(e.siteMediaToken)try{g=f(e.siteMediaToken).metaSiteId.replace(/_template_/,"")}catch(e){}en("/mg",{src:26,evid:tn.BIEventsIds.responseTime,msid:g,fileId:r,correlation_id:i,call_name:h,result:o?"success":"fail",response_speed:Math.round(m),response_time:Math.round(d),response_size:p,...s?{responseFileId:s}:{},...a?{mode:"media_studio"}:{}})}(r,t.eventName,{fileId:n,correlationId:i,request:a.request,isSuccess:e,isFromMediaStudio:o,responseFileId:c(a,["data","id"])})};e.then((function(e){s(!0,e)})).catch((function(e){s(!1,e)}))}function On(e,t){const n=o(),r=t.arguments[0].file.size;r<10240||e.then((function(){const e=(o()-n)/1e3,t=En();e<1||en("/mg",{src:26,evid:tn.BIEventsIds.uploadSpeed,time_seconds:Math.floor(e),size_bytes:r,bytes_per_second:Math.floor(r/e),...t()})})).catch(s)}const In=()=>{const e=_n();return{requestStart:"client-start-"+e,urlEnd:"url-end-"+e,uploadEnd:"upload-end-"+e,responseEnd:"client-end-"+e}};function An(e,t){let{response:n,fileSource:r,uploadUrl:i,startProgressMark:o,endProgressMark:a,endResponseMark:s,uploadMarks:u}=t;if(r.mediaType!==xn.Picture)return;const c=(l=n.uploadTimingsHeaders)?l.split(" ").reduce((function(e,t){const n=t.split("=");return e[n[0]]=n[1],e}),{}):{};var l;const d=Math.ceil(a-o)||1,p=Tn(i),f=p?p.responseEnd-p.responseStart:0,h=Math.round(s-a-f),m=Math.floor(r.file.size/d/1e3);if([h,m,f].some(isNaN))return;const g=Un(u.requestStart,u.urlEnd),v=Un(u.urlEnd,u.uploadEnd),y=Un(u.uploadEnd,u.responseEnd),_=v+y,b={request_time:d,wait_time:Math.max(h,0),response_time:Math.round(f),upload_speed:m,get_upload_url_time:Math.round(g),processing_time:Math.round(y),total_processing_time:Math.round(_),total_time:Math.round(g+_)};en("/mg",{src:26,evid:tn.BIEventsIds.apiTiming,call_name:e,file_size:r.file.size,...b,...c})}const Rn={G5:"G5",G6:"G6"};var Mn,Cn,jn,zn,Fn=function(){return Fn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fn.apply(this,arguments)};!function(e){e.Rembrandt="rembrandt",e.Vanbrandt="vanbrandt",e.Vangogh="vangogh"}(Cn||(Cn={})),function(e){e.Fill="fill",e.Fit="fit"}(jn||(jn={})),function(e){e.Srz="srz",e.Srb="srb"}(zn||(zn={}));var Nn,Ln,Dn=((Mn={})[jn.Fill]=zn.Srz,Mn[jn.Fit]=zn.Srb,Mn);!function(e){e.G5="G5",e.G6="G6"}(Nn||(Nn={})),function(e){e.Picture="picture",e.SiteIcon="site_icon",e.Watermark="watermark",e.SecurePicture="secure_picture",e.Video="video",e.VideoAlpha="videoalpha",e.SecureVideo="secure_video",e.UserFont="ufont",e.Shape="shape"}(Ln||(Ln={}));var qn,Bn=function(e){return e.replace(/([a-z\-_0-9]+)\/\//gi,"$1/")},Vn=function(e){return e.split("/").pop()||""},Hn=function(e){var t=e.split("/");return t.length<=1?"":(t.pop(),t.join("/")+"/")},Wn=function(e,t){return Object.keys(t).forEach((function(n){var r,i=(r="g",new RegExp(("#"+n+"#").replace(/[()[\].^$|?+]/g,"\\$&"),r));e=e.replace(i,t[n])})),e},Gn={vangogh:function(e){return Hn(e)+Vn(e)+"_#mode#_#width#_#height#_75_22_0.5_1.20_0.00_jpg_#mode#"},rembrandt:function(e,t){var n=Vn(e),r=Hn(e)+"v1/#mode#/w_#width#,h_#height#";return t?r+",wm_#waterMark#/"+n:r+"/"+n},vanbrandt:function(e,t){var n=Vn(e),r=Hn(e)+n+"/v1/#mode#/w_#width#,h_#height#";return t?r+",wm_#waterMark#/#fileName#":r+"/#fileName#"}},Jn=/_sr[bz]_(?:[0-9.]+_)+[a-z0-9]+_sr[bz]$/i,Kn=/([a-z0-9_-~]+\.[a-z0-9]+)\/v[0-9]+\/(?:fill|fit)\/[^/]+\/(?:\1|file\.[a-z0-9_]+)$/i,Qn=/([a-z0-9_-]+)\/v[0-9]+\/(?:fill|fit)\/[^/]+(\/(?:\1|file)\.[a-z0-9_]+)$/i,Yn=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=Cn.Vanbrandt);var r,i=function(e){var t=(e.match(/wm_([^/]*)/)||[])[1];return{restoredUrl:e.replace(Jn,"").replace(Kn,"$1").replace(Qn,"$1$2"),waterMark:t}}(e),o=i.restoredUrl,a=i.waterMark;if(!/\.(png|jpe?g?|gif)/i.test(r=o)||function(e){return/shutterstock/i.test(e)}(r))return o;var s=t.width,u=void 0===s?200:s,c=t.height,l=void 0===c?200:c,d=t.mode,p=void 0===d?jn.Fill:d,f=t.fileName,h=void 0===f?Vn(o):f,m=t.waterMark,g=void 0===m?a:m,v=Fn(Fn({},t),{fileName:h,waterMark:g,width:u,height:l,mode:p});n===Cn.Vangogh&&(v.mode=function(e){return Dn[e]||e}(v.mode));var y=Gn[n](o,g),_=Wn(y,v);return Bn(_)};!function(e){e.Thumbnail="thumbnail",e.Preview="preview"}(qn||(qn={}));var $n=function(e,t,n){return Bn("secure_picture"===e.mediaType&&n===Nn.G6?t.apiUrl+"/site/media/files/secure/"+e.fileUrl:t.filesUrl+"/"+e.fileUrl)},Xn=function(e,n,r,i){void 0===i&&(i=Nn.G5);var o=function(e,t,n){void 0===n&&(n=Nn.G5);var r=t.filesUrl;if(e.thumbnailUrl)return r+"/"+e.thumbnailUrl;switch(e.mediaType){case Ln.Picture:case Ln.SiteIcon:case Ln.Watermark:return r+"/"+e.fileUrl;case Ln.SecurePicture:return n===Nn.G6?t.apiUrl+"/site/media/files/secure/"+e.fileUrl:r+"/"+e.fileUrl;case Ln.Video:case Ln.VideoAlpha:return e.videoThumbnailUrl?r+"/"+e.videoThumbnailUrl:null;case Ln.SecureVideo:if(e.fileOutput&&e.fileOutput.image&&e.fileOutput.image[2]&&e.fileOutput.image[2].url)return r+"/"+e.fileOutput.image[2].url;break;case Ln.UserFont:if(e.fileOutput&&e.fileOutput.image&&e.fileOutput.image[0]&&e.fileOutput.image[0].url)return r+"/"+e.fileOutput.image[0].url}}(e,r,i),a=e.previewUrl?r.filesUrl+"/"+e.previewUrl:null,s={};if(e.mediaType===Ln.Shape||e.fileUrl&&"gif"===e.fileUrl.split(".").pop())s=function(e,t){return Object.keys(e).reduce((function(e,n){var r;return Fn(Fn({},e),((r={})[n+"Url"]=t,r))}),{})}(n,$n(e,r,i));else if(o){-1!==(e.tags||[]).indexOf("_mp4_alpha")&&(n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.filter(Boolean).reduce(t())}({},n,{thumbnail:{mode:"fit"}})),s=function(e,t,n,r){return Object.keys(e).reduce((function(i,o){var a,s=o===qn.Thumbnail&&r?r:t,u=Yn(s,e[o],n);return Fn(Fn({},i),u&&((a={})[o+"Url"]=u,a))}),{})}(n,o,r.imageOperationsApi,a)}return e.fileUrl&&(s.originalUrl=$n(e,r,i)),s},Zn=function(e){return parseInt(e,10)},er=function(e,t){return e.fileOutput&&e.fileOutput.video?e.fileOutput.video.filter((function(e){return Zn(e.quality)<=Zn(t.videoPreviewQuality)})).map((function(e){return Bn(t.videoFilesUrl+"/"+e.url)})):null};function tr(e,t,n){const r=e.root_id===pn.VisitorUploads?"visitorsUploads":"private";let i={id:e.file_name,kind:dn.File,source:t.sourceName||r,folderId:e.parent_folder_id||null,fileSize:e.file_size,name:e.original_file_name,mediaType:e.media_type,fileUrl:e.file_url?_(e.file_url):null,sourceUrl:e.source_url||null,createdAt:e.created_ts,updatedAt:e.modified_ts,readOnly:e.read_only||null,labels:e.labels||[],tags:y(e.tags),width:e.width||null,height:e.height||null,fileInfo:e.file_info?I(e.file_info):null,fileInput:e.file_input?I(e.file_input):null,fileOutput:e.file_output?I(e.file_output):null,transcodingStatus:e.op_status,siteId:e.site_id,userId:e.user_id,boardId:e.board_id,siteMediaToken:e.token||t.siteMediaToken};i.mediaType===xn.Video&&(i.width=c(i,"fileOutput.image[0].width",e.width),i.height=c(i,"fileOutput.image[0].height",e.height));const o={...t.thumbnailSizes,...n};return i={...i,...Xn(i,o,t,Rn.G6)},o.thumbnail&&!i.thumbnailUrl&&e.icon_url&&(i.thumbnailUrl=_(t.filesUrl+"/"+e.icon_url)),Object.keys(o).forEach((function(e){const n=e+"Url";if(i[n]||(i[n]=i.thumbnailUrl),-1!==[xn.Document,xn.SecureDocument,xn.Archive,xn.SecureArchive].indexOf(i.mediaType)){const{siteMediaToken:e}=t,r=f(e).userId,o=t.privateFilesUrl.replace("<msid>",r);i[n]=o+"/"+i.fileUrl}})),Object.keys(i).forEach((function(e){void 0===i[e]&&delete i[e]})),i.videoPreviewUrls=er(i,t)||null,i}const nr=-1!==window.location.hostname.indexOf("editorx.com"),rr={PRVATE:"private",PUBLIC:"public"},ir={apiUrl:nr?"https://files.editorx.com":"https://files.wix.com",imageOperationsApi:Cn.Vanbrandt,filesUrl:"https://static.wixstatic.com",privateFilesUrl:"https://<msid>.usrfiles.com",videoFilesUrl:"https://video.wixstatic.com",zipperDomain:"https://archive.wixmp.com/",refreshTokenUrl:null,requestOptions:{withCredentials:!0},uploadLimits:{default:15728640,document:15728640,picture:15728640,music:52428800,secureMusic:377487360,video:524288e3,secureVideo:1610612736},thumbnailSizes:{thumbnail:{width:210,height:210,mode:"fill"},preview:{width:375,height:375,mode:"fit"},original:{width:1e3,height:1e3,mode:"fit"}},blackArrow:{wsUrl:"wss://ws.wixmp.com/ws",messageUrl:"https://ws.wixmp.com/message",tokenUrl:"/users/get-batoken"},asyncFontUpload:!1,asyncUploadByUrl:!1,asyncTranscoding:!1,videoPreviewQuality:"480p"};function or(e,t,n,r,i,o){const{file:a,upload_token:s,acl:u,parent_folder_id:c}=t,l={filename:a.name,acl:u,token:s,parent_folder_id:c},d=function(e){return e.blob?e.blob:e}(a),p={};let f,h=!1,m=!1,g=!1;const v=e=>{m=e},y=e=>{h=e},_={onError:e=>{f?(p.tryToResumeResolvePromise(!1),v(!0),f=!1):St(e,p,y,v)},onProgress:(e,t)=>{var n;f?(n=p.tusUploadInstance,g&&n.abort().then((()=>{f=!1,v(!1),p.tryToResumeResolvePromise(!0)})),g=!0):Et(r,e,t)},onSuccess:()=>{r.progressEventEmitter.emit(N.Upload,{status:L.Processing,total:100,loaded:100}),p.uploadPromiseResolve()}},b={...Pt(e,l,n),..._};p.tusUploadInstance=new gt(d,b);const w=()=>new Promise(((e,t)=>{p.uploadPromiseResolve=e,p.uploadPromiseReject=t})).then((()=>Ot(o,e,s,l))).catch((e=>Promise.reject(e)));return{upload:()=>(v(!1),function(e){e.progressEventEmitter.emit(N.Upload,{status:L.Uploading,total:100,loaded:0})}(r),p.tusUploadInstance.start(),w()),resume:()=>(v(!1),y(!1),p.tusUploadInstance.start(),w().then(i)),tryToResume:()=>(g=!1,f=!0,v(!1),p.tusUploadInstance.start(),new Promise((e=>{p.tryToResumeResolvePromise=e}))),abort:()=>{p.tusUploadInstance.abort().then((()=>{y(!0),p.uploadPromiseReject(new(le())("aborted by user"))}))},getTusUploadInstance:()=>p.tusUploadInstance,getIsResumable:()=>h,getShouldTryToResume:()=>m}}const ar=15e3,sr=6e5,ur=4096;function cr(e,t,n,r,i){let o,a,s;const u=e.namespace?rr.PRVATE:rr.PUBLIC;function l(t,n){return t.data=tr(t.data,e,n),t}function d(){o=!0,clearTimeout(a),n.off("message",s)}function p(e,t){setTimeout((function(){o||m(e).then((function(n){if(c(n,"data.transcodingStatus")!==ne.READY)return Promise.reject();t(e)})).catch((function(){p(e,t)}))}),ar)}function f(e){return new Promise((function(t,n){e?p(e,t):n()}))}function h(e){o=!1;const t=c(e,"data.payload.file_name")||c(e,"data.file_name"),r=new Promise((function(e){s=function(e,t){return function(n){const r=c(n,"file.file_name");"status_update"===n.type&&c(n,"file.op_status")===ne.READY&&r===e&&t(r)}}(t,e),n.on("message",s)})),i=new Promise((function(e,t){a=setTimeout((function(){t({status:406,data:{message:"Not ready item"}})}),sr)}));return Promise.race([r,f(t),i]).then((function(e){return d(),Promise.resolve(e)})).catch((function(e){return d(),Promise.reject(e)}))}function m(n,r){r=r||{};const i={};return e.namespace&&(i.ns=e.namespace),t.get(e.apiUrl+"/site/media/files/"+n,i,{cache:!1,headers:r.headers||{}}).then((e=>l(e,r.thumbnails))).catch(hn)}return{upload:function(i,o,a,s){let l;void 0===o&&(o={}),void 0===a&&(a={}),o=o||{};const d={parent_folder_id:i.folderId||null,file:i.file,media_type:i.mediaType,acl:i.acl||u};i.language&&(d.language=i.language),i.catalogCallbackUrl&&(d.cat_callback_url=i.catalogCallbackUrl),i.encodingOptions&&(d.encoding_options=JSON.stringify(i.encodingOptions));const p=o.vision||e.vision;p&&(d.vision=p.join(",")),e.namespace&&(d.ns=e.namespace),i.tags&&i.tags.length&&(d.tags=i.tags.join(",")),i.labels&&i.labels.length&&(d.labels=i.labels.join(","));const f=En();f.bsi&&(d.bsi=f.bsi);const g=e.asyncFontUpload,v="ufont"===d.media_type,y=d.file&&d.file.size,_=g&&v&&y>ur;let b,w,U;const T=In();bn(T.requestStart),a=W(a);return(o.upload_url&&o.upload_token?Promise.resolve(o):function(n,r,i){const{file:o,mediaType:a,acl:s=u,tags:c}=n,l=e.apiUrl+"/v3/files/upload/url",d={tus:i,file_name:o.name.toLowerCase(),file_size:o.size,content_type:o.type,media_type:a,acl:s,tags:c};e.namespace&&(d.ns=e.namespace);const p={withCredentials:!0,headers:{"Content-Type":F.UrlEncoded}};return r=W(r),t.post(l,d,null,p,r)}(i,a,s).then((e=>e.data))).then((function(u){bn(T.urlEnd),d.upload_token=u.upload_token,U=u.upload_url,_&&(e.blackArrow.disabled||n.open(),d.upload_async=!0),a.progressEventEmitter.on(N.Upload,(e=>{b||(b=_n()),e.loaded>=e.total&&(w=_n(),bn(T.uploadEnd))}));const p=[U,d,{headers:o.headers||{}},a];return l=function(t,i,o,a,s,u){return l=>{bn(t.responseEnd);const d=_n();if(l.data=l.data.file,An("private-site(item.upload)",{response:l,fileSource:i,uploadUrl:o,startProgressMark:a,endProgressMark:s,endResponseMark:d,uploadMarks:t}),u)return h(l).then(m);const p=c(l,"data.op_status");return e.asyncTranscoding&&p&&p!==ne.READY&&(e.blackArrow.disabled||n.open(),r(l.data.file_name)),l.data=tr(l.data,e),l}}(T,i,U,b,w,_),s?async function(e,n,r,i,o){const a=or(e,n,r,i,o,t);return function(e,t){e.tusOptions.abort=t.abort,e.tusOptions.isResumable=t.getIsResumable,e.tusOptions.resume=t.resume,e.tusOptions.tryToResume=t.tryToResume,e.tusOptions.shouldTryToResume=t.getShouldTryToResume}(i,a),a.upload()}(...p,l):t.upload(...p)})).then((e=>l(e))).catch(hn)},uploadResumable:function(t,n,r){const o={parent_folder_id:t.folderId||null,file:t.file,media_type:t.mediaType};return e.namespace&&(o.ns=e.namespace),r=W(r),i(o,n,r)},uploadByUrl:function(i,o,a,s){void 0===a&&(a={}),void 0===s&&(s=!1),o=o||{};const c={url:_(i.url),media_type:i.mediaType,acl:i.acl||u,name:i.name||"Untitled"};i.language&&(c.language=i.language),i.folderId&&(c.parent_folder_id=i.folderId),i.tags&&i.tags.length&&(c.labels=i.tags.join(",")),i.systemTags&&i.systemTags.length&&(c.tags=i.systemTags.join(",")),i.headers&&(c.headers=JSON.stringify(i.headers)),i.catalogCallbackUrl&&(c.cat_callback_url=i.catalogCallbackUrl);const d=o.vision||e.vision;d&&(c.vision=d.join(",")),e.namespace&&(c.ns=e.namespace);const p=e.apiUrl+"/site/media/files/upload/external";if(e.asyncUploadByUrl||s){e.blackArrow.disabled||n.open();const i=p+"/async",u={headers:{...o.headers,"Content-Type":F.UrlEncoded}};return a=W(a),t.post(i,c,null,u,a).then((function(t){return s?(r(t.data.payload.file_name),t.data=tr(t.data.payload,e),t):h(t).then(m)})).catch(hn)}return t.get(p,c,{headers:o.headers||{}},a).then((e=>l(e,o.thumbnails)))},get:m,update:function(n,r,i){const o=mn(r);if(!1===o.valid)return hn(A({status:-200,statusText:"Internal JS Error",data:{message:o.message}}));const a={};r.name&&(a.original_file_name=r.name),(r.folderId||null===r.folderId)&&(a.parent_folder_id=r.folderId),r.tags&&(a.tags=r.tags.join(",")),r.labels&&(a.labels=r.labels),e.namespace&&(a.ns=e.namespace),i=i||{};const s=e.apiUrl+"/site/media/files/"+n.id,u={headers:i.headers||{}};return i.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:i.siteMediaToken}}),t.put(s,a,null,u).then((function(e){return e.data={...n,...r,token:i.siteMediaToken},e})).catch(hn)},getDownloadUrl:function(n,r){r=r||{};const i={};return e.namespace&&(i.ns=e.namespace),r.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:r.siteMediaToken}}),t.get(e.apiUrl+"/site/media/files/"+n+"/url",i,{cache:!1,headers:r.headers||{}}).then((e=>({...e,data:{encoding:e.data[0].encoding,referenceId:e.data[0].reference_id,urlPath:e.data[0].url_path}}))).then((e=>-1===e.data.urlPath.indexOf("storage.googleapis.com")?t.head(e.data.urlPath,null,null,{withCredentials:!1}).then((()=>e)):e)).catch(hn)}}}const lr=(e,t)=>e.filter((e=>e.kind===t)).map((e=>e.id));function dr(e,t){function n(t,n,r){return t.data=(t.data.files||[]).map((function(i){return{...tr({...i,token:r},e,n),hasMoreItemsInThisCategory:t.paging&&""!==t.paging.cursor}})),t}const r={size:50,cursor:null},i={order:"date",direction:"desc"};return{get:function(r,i){return i=i||{},t.post(e.apiUrl+"/site/media/files/info",{files:r},null,{cache:!1,headers:i.headers||{}}).then((function(e){return n(e,i.thumbnails)})).catch(hn)},list:function(o,a){a=a||{};const s={...i,...a.sort},u={...r,...a.paging},c={page_size:u.size,cursor:u.cursor,parent_folder_id:o,media_type:a.mediaType};return c.order="desc"===s.direction?"-"+s.order:s.order,e.namespace&&(c.ns=e.namespace),a.onlyCurrentUser&&(c.current_user_only="True"),a.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:a.siteMediaToken}}),t.get(e.apiUrl+"/go/site/media/files/list",c,{headers:a.headers||{}}).then((function(e){return e.paging={size:u.size,cursor:e.data.cursor},n(e,a.thumbnails,a.siteMediaToken)})).catch(hn)},recent:function(o){o=o||{};const a={...i,...o.sort},s={...r,...o.paging},u={page_size:s.size,cursor:s.cursor,media_type:o.mediaType};return u.order="desc"===a.direction?"-"+a.order:a.order,e.namespace&&(u.ns=e.namespace),o.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:o.siteMediaToken}}),t.get(e.apiUrl+"/go/site/media/files/recent",u,{headers:o.headers||{}}).then((function(e){return e.paging={size:s.size,cursor:e.data.cursor},n(e,o.thumbnails,o.siteMediaToken)})).catch(hn)},remove:function(n,r){void 0===r&&(r={});const i=e.apiUrl+"/site/media/delete",o={headers:r.headers||{}},a=n[0].siteId,s=n.every((e=>"string"==typeof e)),u={site_id:a,files_id_list:s?n:lr(n,dn.File),folders_id_list:s?n:lr(n,dn.Folder),ns:e.namespace};return t.post(i,u,null,o).then((e=>({...e,data:{},paging:{size:null,cursor:null}}))).catch(hn)},searchByTag:function(o,a){a=a||{};const s={...i,...a.sort},u={...r,...a.paging},c={tag:o,page_size:u.size,cursor:u.cursor,media_type:a.mediaType,order:"desc"===s.direction?"-"+s.order:s.order};return a.parentFolderId&&(c.parent_folder_id=a.parentFolderId),e.namespace&&(c.ns=e.namespace),t.get(e.apiUrl+"/go/site/media/files/list",c,{cache:!1,headers:a.headers||{}}).then((function(e){return e.paging={size:u.size,cursor:e.data.cursor},n(e,a.thumbnails)})).catch(hn)},searchAllSitesByTag:function(o,a){a=a||{};const s={...i,...a.sort},u={...r,...a.paging},c={page_size:u.size,cursor:u.cursor,media_type:a.mediaType||xn.Picture,order:"desc"===s.direction?"-"+s.order:s.order};return t.get(e.apiUrl+"/site/media/files/tags/"+o,c,{cache:!1,headers:a.headers||{}}).then((function(e){return e.paging={size:u.size,cursor:e.data.cursor},n(e,a.thumbnails)}))},search:function(o,a,s){s=s||{};const u={...i,...s.sort},c={...r,...s.paging},l={query:a,page_size:c.size,cursor:c.cursor,media_type:s.mediaType,parent_folder_id:o,order:"desc"===u.direction?"-"+u.order:u.order};return e.namespace&&(l.ns=e.namespace),s.siteMediaToken&&t.setRequestOptionsOnce({params:{site_token:s.siteMediaToken}}),t.get(e.apiUrl+(e.useGoEndpointForSearch?"/go":"")+"/site/media/files/search",l,{cache:!1,headers:s.headers||{}}).then((function(e){return e.paging={size:c.size,cursor:e.data.cursor},n(e,s.thumbnails,s.siteMediaToken)})).catch(hn)},copy:function(n,i,o){void 0===n&&(n=[]),void 0===i&&(i={}),void 0===o&&(o={});const a=e.apiUrl+"/site/media/copy",s={...r,...o.paging},{namespace:u}=e,c=o.isFromG6?u?{ns:u}:{}:{owner_id:o.userId},l={items:n.map((e=>({item_id:e.id,item_type:e.kind,site_id:e.siteId,copy_name:e.name,media_type:e.mediaType,...c}))),destination:{folder_id:i.id,site_id:i.siteId}};u&&(l.destination.ns=u);const d={cache:!1,headers:o.headers||{}};return t.post(a,l,null,d).then((e=>({...e,data:{opId:e.data.op_id},paging:{size:s.size,cursor:e.data.cursor}}))).catch(hn)},move:function(n,r,i){void 0===n&&(n=[]),void 0===r&&(r={}),void 0===i&&(i={});const o=[],a=[];n.forEach((e=>{e.kind===dn.File&&o.push(e.id),e.kind===dn.Folder&&a.push(e.id)}));const s={files_id_list:o,folders_id_list:a,destination:{folder_id:r.id}};e.namespace&&(s.destination.ns=e.namespace);const u={cache:!1,headers:i.headers||{}};return t.post(e.apiUrl+"/site/media/move",s,null,u).catch(hn)},createZip:function(n,r){void 0===n&&(n=[]),void 0===r&&(r={});const i=new Date;i.setDate(i.getDate()+1);const o={package_items:n.map((e=>({file_url:e.fileUrl,title:e.name}))),package_id:r.packageId||"packageId",package_name:r.name||"untitled_archive",expiry:r.expiry||i.toISOString(),media_type:"package",items_formatting:!1},a={cache:!1,headers:r.headers||{}};return t.post(e.apiUrl+"/site/media/packager/otf/download/url",o,null,a).then((t=>({downloadUrl:""+e.zipperDomain+t.data.download_url}))).catch(hn)}}}function pr(e,t){const n=dr(e,t),r={size:50,cursor:null},i={order:"date",direction:"desc"};return{list:function(n,o){const a={...i,...(o=o||{}).sort},s={...r,...o.paging},u={page_size:s.size,cursor:s.cursor,parent_folder_id:n,media_type:o.mediaType};return u.order="desc"===a.direction?"-"+a.order:a.order,e.namespace&&(u.ns=e.namespace),t.get(e.apiUrl+"/go/site/media/trash/files",u,{headers:o.headers||{}}).then((function(t){return t.paging={size:s.size,cursor:t.data.cursor},n=t,r=o.thumbnails,n.data=(n.data.files||[]).map((function(t){const n=tr(t,e,r);return n.isInTrash=!0,n})),n;var n,r})).catch(hn)},search:function(e,t,r){return n.search(e,t,r).then((e=>(e.data=e.data.map((e=>(e.isInTrash=!0,e))),e))).catch(hn)}}}const fr=G();function hr(e){let t={},n=0;return function(r){return fr.catchError((function(){const e=(arguments[2]||{}).headers||{};return r.call(this,arguments[0],arguments[1]||{},{...arguments[2],headers:{...t,...e}})}),(function(r,i){return 403!==r.code||(new Date).valueOf()-n<1e4?Promise.reject(r):fr.post(e).then((function(e){return t=e.data.set_headers||{},n=(new Date).valueOf(),i()}))}))}}function mr(e,t){globalThis.newrelic&&globalThis.newrelic.addPageAction("error",{source:"media-manager-sdk",message:e,details:t})}function gr(e,t){try{t(JSON.parse(e.data))}catch(e){mr("parse web socket message failed",{message:e})}}const vr=3e4,yr={messageUrl:"https://ws.wixmp.com/message",socketUrl:"wss://ws.wixmp.com/ws",tokenUrl:"https://files.wix.com/users/get-batoken",openTimeout:1e4};function _r(e,t){void 0===e&&(e={}),e={...yr,...e};const n=G(t);let r,i,o,a=null,s="INIT",u=[];const l=["open","close","message"],d=function(e){let t=e;return{emit:function e(n,r){void 0===r&&(r=0),t[r]&&t[r](n,(t=>e(t,r+1)))},getMiddlewares:function(){return t},setMiddlewares:function(e){t=e}}}([gr,e=>h("message",e)]);const p=function(e){let t;return function(){return t||(t=e.apply(this,arguments).catch((function(e){return t=null,Promise.reject(e)})),t)}}((function(){return n.get(e.tokenUrl,null,{withCredentials:!0}).then((function(e){return s="GOT_TOKEN",c(e,"data.token","")})).catch((function(e){return s="GET_TOKEN_FAILED",r=!1,mr("can not get socket token",{code:e.code,body:e.responseText}),nn(e)}))}));function f(e,t){[].concat(e).forEach((function(e){if(l.indexOf(e)<0)throw new Error("This event "+e+" is not supported by socket service");u.push({name:e,fn:t})}))}function h(e,t){t=arguments.length>=2?[].slice.call(arguments,1):[],u.filter(function(e){return function(t){return t.name===e}}(e)).forEach((function(n){n.fn.apply({event:e},t)}))}function m(t){return a=new WebSocket(e.socketUrl+"?token="+t),a.onmessage=e=>d.emit(e),a.onerror=function(){mr("socket on error"),r&&(s="REOPEN_STARTED",i=setTimeout((()=>{p().then(m)}),vr))},a.onopen=function(){s="OPENED",h("open")},a.onclose=function(e){a=null,mr("socket on close",{code:e.code,message:e.reason}),h("close")},new Promise((function(t,n){const r=setTimeout((function(){mr("reject by inner timeout"),n({code:0,message:"reject by inner timeout"})}),e.openTimeout);f("open",(function(){t(a),clearTimeout(r)}))}))}return{open:function(){return a?Promise.resolve(a):(r||(r=!0,s="OPEN_STARTED",o=p().then(m).catch((function(e){return mr("can not open socket",{code:e.code,body:e.responseText||e.message}),nn(e)}))),o)},close:function(){return r=!1,i&&(clearTimeout(i),i=null),a?(s="CLOSED",a.close(),new Promise((function(e){f("close",(function(){e("closed")}))}))):(mr("socket: no socket to close",{message:"socket: no socket to close"}),Promise.reject("no socket to close"))},send:function(t,r,i){return p().then((function(o){if(!o)return mr("socket: try to send message without token"),Promise.reject("no token to send message");if(!t)return mr("socket: try to send message without message"),Promise.reject("no message to send message");let s={action:r||"send"};if("post"===i||!a){s={...s,message:JSON.stringify(t),token:o};const r={headers:{"Content-Type":F.UrlEncoded}};return n.post(e.messageUrl,s,null,r).catch((function(e){return mr("socket: send message failed",{code:e.code,body:e.responseText}),nn(e)}))}return s={...s,message:t},a.send(JSON.stringify(s)),t}))},on:f,off:function(e,t){e=[].concat(e),u=u.filter((function(n){return!e.some((function(e){return n.name===e&&(!t||n.fn===t)}))}))},use:function(e){d.setMiddlewares([...d.getMiddlewares().slice(0,-1),e,e=>h("message",e)])},getStatus(){return s},getOpenStarted(){return r}}}function br(e,t,n){t=t||[];const r={trash_files_id_list:(e=e||[]).map((e=>e.id)),trash_folders_id_list:t.map((e=>e.id))};return n.namespace&&(r.ns=n.namespace),r}function wr(e){return{userId:e.user_id,firstName:e.first_name,lastName:e.last_name,email:e.email,img:e.img,isAccountOwner:e.is_account_owner,roles:e.roles,joinedAt:e.joined_at}}function Ur(e){const{tab_name_key:t,tab_name_en:n,media_root:r}=e;return{mediaRoot:r,tabNameEn:n,tabNameKey:t}}function Tr(e){if(void 0===e&&(e={}),!e.siteMediaToken)throw new Error("siteMediaToken param is missing");this.siteMediaToken=e.siteMediaToken;const t=u({requestOptions:{params:{site_token:e.siteMediaToken}}},ir,e),n=hr(t.refreshTokenUrl),r=t.requestOptions;c(r,"params.ns")&&(t.ns=r.params.ns);const i=function(e,t,n){const r=_r({messageUrl:e.blackArrow.messageUrl,socketUrl:e.blackArrow.wsUrl,tokenUrl:e.apiUrl+e.blackArrow.tokenUrl},n),i=e=>{Y(t,te.ITEM.UPDATE,{arguments:[e.data,e.data]}).resolve(e)};return r.on("message",(n=>{if("status_update"===n.type&&e.asyncTranscoding&&(c(n,"file.op_status")===ne.READY?t.item.get(c(n,"file.file_name")).then(i):i({data:tr(n.file,e,{})})),"trash_file"===n.type&&$(t,te.ITEMS.REMOVE,{arguments:[[n.file_name]]},{data:{id:n.file_name}}),"item_update"===n.type){const r=tr(n.file,e,{});Y(t,te.ITEM.UPDATE,{arguments:[r,r]}).resolve({data:r})}})),r}(t,this,r),o=new cn,a=G(r),s=ie(t,this,tr,a,{path:"/site/media/files"}),l=un(t,0,0,a),d={get:n(a.get),post:n(a.post),upload:n(a.upload)},p=t.refreshTokenUrl?d:a,f={...t,sourceName:"trash"},h=vn(t,p),m=function(e,t){const n=vn(e,t);function r(t){return t.data=(t.data.folders||[]).map((function(t){const n=fn(t,e);return n.isInTrash=!0,n})),t}return{list:function(n,i){i=i||{};const o={parent_folder_id:n||null,trash_type:"folder"};return e.namespace&&(o.ns=e.namespace),t.get(e.apiUrl+"/go/site/media/trash/folders",o,{headers:i.headers||{}}).then(r).catch(hn)},search:function(e,t,r){return n.search(e,t,r).then((e=>(e.data=e.data.map((e=>(e.isInTrash=!0,e))),e))).catch(hn)}}}(f,p),g=gn(t,p),v=dr(t,p),y=pr(f,p),_=cr(t,p,i,s,l),b=function(e,t){const n=e=>({...e,data:{opId:e.data.op_id},paging:{size:null,cursor:null}});return{remove:function(r,i){const o=e.apiUrl+"/site/media/trash/delete",a=br(r,i,e);return t.post(o,a).then(n).catch(hn)},restore:function(r,i){const o=e.apiUrl+"/site/media/trash/restore",a=br(r,i,e);return t.post(o,a).then(n).catch(hn)},empty:function(r){r=r||{};const i=e.apiUrl+"/site/media/trash/empty",o=r.mediaType?{media_type:r.mediaType}:{},a={headers:r.headers||{}};return e.namespace&&(o.ns=e.namespace),t.post(i,o,null,a).then(n).catch(hn)}}}(f,p),w=function(e,t){return{get:function(n,r){void 0===r&&(r={});const i={};return e.namespace&&(i.ns=e.namespace),t.get(e.apiUrl+"/site/media/users/"+n+"/info",i,{headers:r.headers||{}}).then((e=>{return{...e,data:(t=e.data,{userName:t.user_name,email:t.email})};var t})).catch(hn)},getSitesInfo:function(n){return void 0===n&&(n={}),t.get(e.apiUrl+"/site/media/manager/user/info",{},{headers:n.headers||{}}).then((e=>{return{...e,data:(t=e.data,{sitesNumber:t.sites_number,hasVisitorUploads:t.has_visitor_uploads,hasWixVideoUploads:t.has_wix_video_uploads,hasContributors:t.has_contributors,team:t.team?(n=t.team,{ownerId:n.owner_id,members:n.members.map(wr)}):null,country:t.country,parentAccountId:t.parent_account_id,storageQuotaGracePeriodEndByGroup:t.storage_quota_grace_period_end_by_group,enterpriseTabs:t.enterprise_tabs&&t.enterprise_tabs.length>0?t.enterprise_tabs.map(Ur):[]})};var t,n})).catch(hn)},getManagerInfo:function(n){return void 0===n&&(n={}),t.get(e.apiUrl+"/go/site/media/manager/info",{},{headers:n.headers||{}}).then((e=>{return{...e,data:(t=e.data,{hasOldMedia:t.has_media,hasSiteMedia:t.has_site_media,migrationStatus:t.migration_status,hasVisitorUploads:t.has_visitor_uploads})};var t})).catch(hn)}}}(t,p);h.trash=m,v.trash=y,this.name=t.name||"private-site",this.correlationId=o,this.folders=ln(this,te.FOLDERS,h),this.folder=ln(this,te.FOLDER,g),this.item=ln(this,te.ITEM,_),this.items=ln(this,te.ITEMS,v),this.trash=ln(this,te.TRASH,b),this.user=ln(this,te.USER,w),this.toItem=e=>tr(e,t,t.thumbnailSizes),this.toFolder=e=>fn(e,t),this.blackArrow=i}function xr(e){return{id:e.folder_id,parentId:e.parent_folder_id||null,name:e.folder_name,mediaType:e.media_type,filesCount:e.files_count,createdAt:e.created_ts,updatedAt:e.modified_ts}}function kr(e,t){function n(e){return e.data=(e.data.folders||[]).map(xr),e}return{list:function(r,i){return i=i||{},t.get(e.apiUrl+"/folders",{media_type:i.mediaType||xn.Picture,folder_id:r||null},{headers:i.headers||{}}).then(n).catch(nn)},remove:function(n,r){return r=r||{},n.map((function(n){return function(n,r){const i=e.apiUrl+"/folders/"+n+"/delete",o={headers:r.headers||{}};return t.post(i,null,null,o).then((function(e){return e.data={id:n},e})).catch(nn)}(n,r)}))}}}function Sr(e){return"object"!=typeof e||null===e?{valid:!1,message:"Please specify new props"}:void 0===e.name||e.name?void 0===e.folderId||e.folderId?void 0===e.parentId||e.parentId||null===e.parentId?void 0===e.tags||Array.isArray(e.tags)?{valid:!0}:{valid:!1,message:"Tags should be an array"}:{valid:!1,message:"Please specify parent folder id"}:{valid:!1,message:"Please specify folder id"}:{valid:!1,message:"Please specify name"}}function Er(e,t,n,r){let i={id:e.file_name,folderId:e.parent_folder_id||null,fileSize:e.file_size,name:e.original_file_name,mediaType:e.media_type,fileUrl:e.file_url?_(e.file_url):null,sourceUrl:e.source_url||null,createdAt:e.created_ts,updatedAt:e.modified_ts,readOnly:e.read_only||null,isSiteOwner:r,labels:e.labels||[],tags:y(e.tags),width:e.width||null,height:e.height||null,fileInfo:e.file_info?I(e.file_info):null,fileInput:e.file_input?I(e.file_input):null,fileOutput:e.file_output?I(e.file_output):null,transcodingStatus:e.op_status};i.mediaType===xn.Video&&(i.width=c(i,"fileOutput.image[0].width",e.width),i.height=c(i,"fileOutput.image[0].height",e.height));const o={...t.thumbnailSizes,...n};return i={...i,...Xn(i,o,t)},o.thumbnail&&!i.thumbnailUrl&&e.icon_url&&(i.thumbnailUrl=_(t.filesUrl+"/"+e.icon_url)),Object.keys(o).forEach((function(e){i[e+"Url"]||(i[e+"Url"]=i.thumbnailUrl)})),Object.keys(i).forEach((function(e){void 0===i[e]&&delete i[e]})),i.videoPreviewUrls=er(i,t)||null,i}function Pr(e,t){function n(t,n){return t.data=(t.data.files||[]).map((function(t){return Er(t,e,n)})),t}const r={size:50,cursor:null},i={order:"date",direction:"desc"};return{list:function(o,a){a=a||{};const s={...i,...a.sort},u={...r,...a.paging},c={page_size:u.size,cursor:u.cursor,parent_folder_id:o,media_type:a.mediaType||xn.Picture};return c.order="desc"===s.direction?"-"+s.order:s.order,t.get(e.apiUrl+"/files/getpage",c,{headers:a.headers||{}}).then((function(e){return e.paging={size:u.size,cursor:e.data.cursor},n(e,a.thumbnails)})).catch(nn)},remove:function(n,r){return r=r||{},n.map((function(n){return function(n,r){const i={};e.ns&&(i.ns=e.ns);const o=e.apiUrl+"/files/"+n+"/delete",a={headers:r.headers||{}};return t.post(o,i,null,a).then((function(e){return e.data={id:n},e})).catch(nn)}(n,r)}))},searchByTag:function(o,a){a=a||{};const s={...i,...a.sort},u={...r,...a.paging},c={tag:o,page_size:u.size,cursor:u.cursor,media_type:a.mediaType||xn.Picture,order:"desc"===s.direction?"-"+s.order:s.order};return t.get(e.apiUrl+"/files/getpage",c,{cache:!1,headers:a.headers||{}}).then((function(e){return e.paging={size:u.size,cursor:e.data.cursor},n(e,a.thumbnails)})).catch(nn)},search:function(o,a,s){s=s||{};const u={...i,...s.sort},c={...r,...s.paging},l={query:a,page_size:c.size,cursor:c.cursor,media_type:s.mediaType||xn.Picture,parent_folder_id:o,order:"desc"===u.direction?"-"+u.order:u.order};return t.get(e.apiUrl+"/files/search/getpage",l,{cache:!1,headers:s.headers||{}}).then((function(e){return e.paging={size:c.size,cursor:e.data.cursor},n(e,s.thumbnails)})).catch(nn)}}}const Or=15e3,Ir=6e5,Ar=4096;function Rr(e,t,n,r,i){let o,a,s;function u(t){return e.uploadLimits[m(t)]}function d(e){return e.file.size>=u(e.mediaType)}function p(t,n){return t.data=Er(t.data,e,n),t}function f(){o=!0,clearTimeout(a),n.off("message",s)}function h(e,t){setTimeout((function(){o||y(e).then((function(n){if(c(n,"data.transcodingStatus")!==ne.READY)return Promise.reject();t(e)})).catch((function(){h(e,t)}))}),Or)}function g(e){return new Promise((function(t,n){e?h(e,t):n()}))}function v(e){o=!1;const t=c(e,"data.payload.file_name")||c(e,"data.file_name"),r=new Promise((function(e){s=function(e,t){return function(n){const r=c(n,"file.file_name");"status_update"===n.type&&c(n,"file.op_status")===ne.READY&&r===e&&t(r)}}(t,e),n.on("message",s)})),i=new Promise((function(e,t){a=setTimeout((function(){t({status:406,data:{message:"Not ready item"}})}),Ir)}));return Promise.race([r,g(t),i]).then((function(e){return f(),Promise.resolve(e)})).catch((function(e){return f(),Promise.reject(e)}))}function y(n,r){return r=r||{},t.get(e.apiUrl+"/files/"+n,null,{cache:!1,headers:r.headers||{}}).then((function(e){return p(e,r.thumbnails)})).catch(nn)}return{upload:function(i,o,a){void 0===o&&(o={}),void 0===a&&(a={}),o=o||{};const s={parent_folder_id:i.folderId||null,file:i.file,media_type:i.mediaType};i.catalogCallbackUrl&&(s.cat_callback_url=i.catalogCallbackUrl),i.encodingOptions&&(s.encoding_options=JSON.stringify(i.encodingOptions));const p=o.vision||e.vision;if(p&&(s.vision=p.join(",")),e.siteMediaToken&&(s.siteMediaToken=e.siteMediaToken),d(i)){const e=l(u(i.mediaType)),t=l(i.file.size);return Promise.reject(A({status:-406,statusText:"Not Acceptable",data:{error_code:-7752,error_description:"File size "+t+" exceeds upload limit of "+e,error_info:{key:"wmp_error.file_size_exceeded_limit",args:[t,e]}}}))}const f=e.asyncFontUpload,h="ufont"===s.media_type,m=s.file&&s.file.size,g=f&&h&&m>Ar;let _,b,w;const U=In();bn(U.requestStart),a=W(a);return(o.upload_url&&o.upload_token?Promise.resolve(o):function(n,r){const i=n.file,o=e.apiUrl+"/files/"+((a=n.mediaType)===xn.SecureMusic?"music-goods/upload":a===xn.Video?"video/upload":"upload")+"/url";var a;const s={media_type:n.mediaType,file_name:i.name.toLowerCase(),file_size:i.size,content_type:i.type},u={withCredentials:!0,headers:{"Content-Type":F.UrlEncoded}};return r=W(r),t.post(o,s,null,u,r)}(i).then((e=>e.data))).then((function(r){return bn(U.urlEnd),s.upload_token=r.upload_token,w=r.upload_url,g&&(e.blackArrow.disabled||n.open(),s.upload_async=!0),a.progressEventEmitter.on(N.Upload,(e=>{_||(_=_n()),e.loaded>=e.total&&(b=_n(),bn(U.uploadEnd))})),t.upload(w,s,{headers:o.headers||{}},a)})).then((function(t){bn(U.responseEnd);const o=_n();if(t.data=t.data[0],An("private(item.upload)",{response:t,fileSource:i,uploadUrl:w,startProgressMark:_,endProgressMark:b,endResponseMark:o,uploadMarks:U}),g)return v(t).then(y);const a=c(t,"data.op_status");return e.asyncTranscoding&&a&&a!==ne.READY&&(e.blackArrow.disabled||n.open(),r(t.data.file_name)),t.data=Er(t.data,e),t})).catch(nn)},uploadResumable:function(e,t,n){if(d(e)){const t=l(u(e.mediaType)),n=l(e.file.size);return Promise.reject(A({status:-406,statusText:"Not Acceptable",data:{error_code:-7752,error_description:"File size "+n+" exceeds upload limit of "+t,error_info:{key:"wmp_error.file_size_exceeded_limit",args:[n,t]}}}))}const r={parent_folder_id:e.folderId||null,file:e.file,media_type:e.mediaType||xn.Picture};return n=W(n),i(r,t,n)},uploadByUrl:function(i,o,a){o=o||{};const s={url:_(i.url),media_type:i.mediaType,name:i.name||"Untitled"};i.folderId&&(s.parent_folder_id=i.folderId),i.tags&&i.tags.length&&(s.tags=i.tags.join(",")),i.headers&&(s.headers=JSON.stringify(i.headers)),i.catalogCallbackUrl&&(s.cat_callback_url=i.catalogCallbackUrl),e.siteMediaToken&&(s.siteMediaToken=e.siteMediaToken);const u=e.apiUrl+"/files/upload/external";if(e.asyncUploadByUrl||a){e.blackArrow.disabled||n.open();const i=u+"/async",c={headers:{...o.headers,"Content-Type":F.UrlEncoded}};return t.post(i,s,null,c).then((function(t){return a?(r(t.data.payload.file_name),t.data=Er(t.data.payload,e),t):v(t).then(y)})).catch(nn)}return t.get(u,s,{headers:o.headers||{}}).then((e=>p(e,o.thumbnails)))},get:y,update:function(n,r,i){const o=Sr(r);if(!1===o.valid)return nn(A({status:-200,statusText:"Internal JS Error",data:{message:o.message}}));const a={};r.name&&(a.original_file_name=r.name),(r.folderId||null===r.folderId)&&(a.parent_folder_id=r.folderId),r.tags&&(a.tags=r.tags.join(",")),i=i||{};const s=e.apiUrl+"/files/"+n.id+"/put",u={headers:i.headers||{}};return t.post(s,a,null,u).then((function(e){return e.data={...n,...r},e})).catch(nn)}}}function Mr(e,t){const n={size:50,cursor:null},r={order:"date",direction:"desc"};return{list:function(i,o){const a={...r,...(o=o||{}).sort},s={...n,...o.paging},u={page_size:s.size,cursor:s.cursor,parent_folder_id:i,media_type:o.mediaType||xn.Picture};return u.order="desc"===a.direction?"-"+a.order:a.order,t.get(e.apiUrl+"/files/getpage/trash",u,{headers:o.headers||{}}).then((function(t){return t.paging={size:s.size,cursor:t.data.cursor},n=t,r=o.thumbnails,n.data=(n.data.trash_files||[]).map((function(t){const n=Er(t,e,r);return n.isInTrash=!0,n})),n;var n,r})).catch(nn)},remove:function(n,r){return r=r||{},n.map((function(n){return function(n,r){const i=e.apiUrl+"/trash/files/"+n+"/delete",o={headers:r.headers||{}};return t.post(i,null,null,o).then((function(e){return e.data={id:n},e})).catch(nn)}(n,r)}))},restore:function(n,r){return r=r||{},n.map((function(n){return function(n,r){const i=e.apiUrl+"/trash/files/"+n+"/restore",o={headers:r.headers||{}};return t.post(i,null,null,o).then((function(e){return e.data={id:n},e})).catch(nn)}(n,r)}))}}}function Cr(e,t){const n={size:50,cursor:null},r={order:"date",direction:"desc"};return{list:function(i,o){const a={...r,...(o=o||{}).sort},s={...n,...o.paging},u={page_size:s.size,cursor:s.cursor,parent_folder_id:i,media_type:o.mediaType||xn.Picture,siteMediaToken:e.siteMediaToken};return u.order="desc"===a.direction?"-"+a.order:a.order,t.get(e.apiUrl+"/files/getpage/site",u,{headers:o.headers||{}}).then((function(t){return t.paging={size:s.size,cursor:t.data.cursor},function(t,n){const r=t.data.site_owner;return t.data=(t.data.files||[]).map((function(t){const i=Er(t,e,n,r);return i.isInSiteMedia=!0,i})),t}(t,o.thumbnails)})).catch(nn)},remove:function(n,r){r=r||{};const i={files:n},o=e.apiUrl+"/files/site/remove?siteMediaToken="+e.siteMediaToken,a={headers:r.headers||{}};return t.post(o,i,null,a).then((function(e){return e.data={itemIds:n},e})).catch(nn)},add:function(n,r){r=r||{};const i={files:n},o=e.apiUrl+"/files/site/add?siteMediaToken="+e.siteMediaToken,a={headers:r.headers||{}};return t.post(o,i,null,a).catch(nn)}}}function jr(e,t){function n(e){return e.data=(e.data.trash_folders||[]).map((function(e){const t=xr(e);return t.isInTrash=!0,t})),e}return{list:function(r,i){const o={media_type:(i=i||{}).mediaType||xn.Picture,folder_id:r||null,trash_type:"folder"};return t.get(e.apiUrl+"/files/getpage/trash",o,{headers:i.headers||{}}).then(n).catch(nn)},remove:function(n,r){return r=r||{},n.map((function(n){return function(n,r){const i=e.apiUrl+"/trash/folders/"+n+"/delete",o={headers:r.headers||{}};return t.post(i,null,null,o).then((function(e){return e.data={id:n},e})).catch(nn)}(n,r)}))},restore:function(n,r){return r=r||{},n.map((function(n){return function(n,r){const i=e.apiUrl+"/trash/folders/"+n+"/restore",o={headers:r.headers||{}};return t.post(i,null,null,o).then((function(e){return e.data={id:n},e})).catch(nn)}(n,r)}))}}}const zr={apiUrl:nr?"https://files.editorx.com":"https://files.wix.com",imageOperationsApi:Cn.Vanbrandt,filesUrl:"https://static.wixstatic.com",videoFilesUrl:"https://video.wixstatic.com",refreshTokenUrl:null,requestOptions:{withCredentials:!0},uploadLimits:{default:15728640,document:15728640,picture:15728640,music:52428800,secureMusic:377487360,video:524288e3,secureVideo:1610612736},thumbnailSizes:{thumbnail:{width:210,height:210,mode:"fill"},preview:{width:375,height:375,mode:"fit"},original:{width:1e3,height:1e3,mode:"fit"}},blackArrow:{wsUrl:"wss://ws.wixmp.com/ws",messageUrl:"https://ws.wixmp.com/message",tokenUrl:"/users/get-batoken",disabled:!1},asyncFontUpload:!1,asyncUploadByUrl:!1,asyncTranscoding:!1,videoPreviewQuality:"480p"},Fr=G();function Nr(e){let t={},n=0;return function(r){return Fr.catchError((function(){const e=(arguments[2]||{}).headers||{};return r.call(this,arguments[0],arguments[1]||{},{...arguments[2],headers:{...t,...e}})}),(function(r,i){return 403!==r.code||(new Date).valueOf()-n<1e4?Promise.reject(r):Fr.post(e).then((function(e){return t=e.data.set_headers||{},n=(new Date).valueOf(),i()}))}))}}function Lr(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(zr,e),n=Nr(t.refreshTokenUrl),r=t.requestOptions;c(r,"params.ns")&&(t.ns=r.params.ns);const i=function(e,t,n){const r=_r({messageUrl:e.blackArrow.messageUrl,socketUrl:e.blackArrow.wsUrl,tokenUrl:e.apiUrl+e.blackArrow.tokenUrl},n),i=e=>{Y(t,te.ITEM.UPDATE,{arguments:[e.data,e.data]}).resolve(e)};return r.on("message",(n=>{if("status_update"===n.type&&e.asyncTranscoding&&(c(n,"file.op_status")===ne.READY?t.item.get(c(n,"file.file_name")).then(i):i({data:Er(n.file,e,{},!0)})),"trash_file"===n.type&&$(t,te.ITEMS.REMOVE,{arguments:[[n.file_name]]},{data:{id:n.file_name}}),"item_update"===n.type){const r=Er(n.file,e,{},!0);Y(t,te.ITEM.UPDATE,{arguments:[r,r]}).resolve({data:r})}})),r}(t,this,r),o=G(r),a=ie(t,this,Er,o),s=un(t,0,0,o),l={get:n(o.get),post:n(o.post),upload:n(o.upload)},d=t.refreshTokenUrl?l:o,p=kr(t,d),f=jr(t,d),h=function(e,t){function n(e){return e.data=xr(e.data),e}return{create:function(r,i){if(!r)return nn(A({status:-200,statusText:"Internal JS Error",data:{message:"Please specify name"}}));i=i||{};const o=e.apiUrl+"/folders",a={folder_name:r,media_type:i.mediaType||xn.Picture,parent_folder_id:i.parentId||null},s={headers:i.headers||{}};return t.post(o,a,null,s).then(n).catch(nn)},update:function(n,r,i){const o=Sr(r);if(!1===o.valid)return nn(A({status:-200,statusText:"Internal JS Error",data:{message:o.message}}));const a={};r.name&&(a.folder_name=r.name),(r.parentId||null===r.parentId)&&(a.parent_folder_id=r.parentId),i=i||{};const s=e.apiUrl+"/folders/"+n.id+"/put",u={headers:i.headers||{}};return t.post(s,a,null,u).then((function(e){return e.data={...n,...r},e})).catch(nn)}}}(t,d),m=Pr(t,d),g=Mr(t,d),v=Cr(t,d),y=Rr(t,d,i,a,s),_=function(e,t){return{remove:function(n){const r=e.apiUrl+"/trash/delete",i={media_type:n.mediaType||xn.Picture,all_files:!0};return t.post(r,i).catch(nn)},restore:function(n){const r=e.apiUrl+"/trash/restore",i={media_type:n.mediaType||xn.Picture,all_files:!0};return t.post(r,i).catch(nn)}}}(t,d);p.trash=f,m.trash=g,m.siteMedia=v,this.name="private",this.folders=ln(this,te.FOLDERS,p),this.folder=ln(this,te.FOLDER,h),this.item=ln(this,te.ITEM,y),this.items=ln(this,te.ITEMS,m),this.trash=ln(this,te.TRASH,_),this.blackArrow=i}const Dr=(e,t)=>({id:x(e.guid),name:e.title,mediaType:e.mediaType,kind:dn.Folder,tags:e.systemTags||[],source:"public",parentId:t?x(t):null,filesCount:null,createdAt:null});const qr=(e,t)=>e.reduce(((e,n)=>[...e,{...Dr(n,t),subFolders:qr(n.children,n.guid)}]),[]),Br=function(e,t){void 0===t&&(t=null);const{categories:n}=e.data;return u(e,{data:qr(n,t)})};function Vr(e){return e.data=e.data||{},e.data.message=e.message,Promise.reject(e)}const Hr={All:"",Horizontal:"horizontal",Vertical:"vertical",Landscape:"landscape",Portrait:"portrait"},Wr="all",Gr="free",Jr=e=>{switch(e){case Hr.Vertical:case Hr.Portrait:return Hr.Portrait;case Hr.Horizontal:case Hr.Landscape:return Hr.Landscape;case Hr.All:default:return""}},Kr=e=>e?"unrestricted":"",Qr=e=>e===Wr?"":e||Gr,Yr=e=>e?"k12unrestricted":"",$r=e=>{const{orientation:t,color:n,restrictContent:r,pricing:i,restrictK12:o}=e;return[Jr(t),n,Kr(r),Qr(i),Yr(o)].filter((e=>e)).join(",")},Xr=e=>{const{nextPage:t}=e;return{cursor:t?t.replace(/^\/public/,""):null,size:t?p(t,"pageSize"):null}};function Zr(e,t){return{list:function(n,r){void 0===r&&(r={}),e.wixUser&&(n+=":wix");const i={levels:1,language:r.language,guid:n,...r.restrictContent?{systemTag:Kr(r.restrictContent)}:{}};return t.get(e.apiUrl+"/categories",i,{withCredentials:!0,headers:r.headers||{}}).then((e=>function(e,t){return e.data=(e.data.category.children||[]).map((e=>Dr(e,t))),e}(e,n))).catch(Vr)},tree:function(n,r){void 0===r&&(r={}),Array.isArray(n)||(n=[n]),e.wixUser&&(n=n.map((e=>e+":wix")));const i={levels:r.levels||-1,language:r.language,guid:n.join(","),...r.restrictContent?{systemTag:Kr(r.restrictContent)}:{}};return t.get(e.apiUrl+"/multi_categories",i,{withCredentials:!0,headers:r.headers||{}}).then(Br).catch(Vr)}}}const ei={cursor:null,size:null,query:null,promise:null};class ti{constructor(){this._nextCallData=ei}getPromise(){return this._nextCallData.promise}set(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=null);const{cursor:i=null,size:o=null}=e;this._nextCallData={cursor:i,size:o&&Number(o),query:n,promise:t,folderId:r}}reset(){return this._nextCallData=ei}getPromiseAndReset(){const e=this.getPromise();return this.reset(),e}isNextCallDataExists(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);const{cursor:r=null,size:i=null}=e,{cursor:o,size:a,query:s,promise:u,folderId:c}=this._nextCallData;return Boolean(o===r&&a===(i&&Number(i))&&t===s&&u&&n===c)}}function ni(e,t,n){const r={id:e.guid,name:e.title,mediaType:e.mediaType,kind:dn.File,source:"public",fileName:e.fileName,fileUrl:e.fileUrl,createdAt:null,tags:y(e.tags),tagsEn:y(e.tagsEn),systemTags:y(e.systemTags),width:e.width,height:e.height,fileOutput:e.fileOutput||null,fileInput:e.fileInput?e.fileInput:e.mediaType===xn.Video?{duration:e.videoDuration}:{},vendor:e.vendor||null,reference:e.reference||null,creator:e.creator||null,creatorPicture:e.creatorPicture?"media/"+e.creatorPicture:null,externalId:e.externalId||null,subtype:e.subtype||null,videoThumbnailUrl:e.videoThumbnailUrl||c(e,"fileOutput.image[0].url",null),previewUrl:e.previewUrl||null};if(e.thumbnailUrl&&e.fileUrl){const t=e.fileUrl.split("/")[0];r.thumbnailUrl=t+"/"+e.thumbnailUrl}e.videoPreviewUrl&&(r.videoPreviewUrls=[t.videoFilesUrl+"/"+e.videoPreviewUrl]);const i=c(e,"fileOutput.video[0].url");i&&(r.videoPreviewUrls=[t.videoFilesUrl+"/"+i]);const o={...t.thumbnailSizes,...n},a=o.thumbnailFit;return delete o.thumbnailFit,/\.png$/i.test(r.fileUrl)&&(o.thumbnail=a),{...r,...Xn(r,o,t)}}function ri(e,t,n){return e.paging=Xr(e.data),e.data=e.data.items?e.data.items.map((function(e){return ni(e,t,n)})):[],e}function ii(e,t){const n=new ti;function r(r,i,o,a,s,u,c){if(void 0===s&&(s=null),void 0===u&&(u=!1),n.isNextCallDataExists({cursor:r},s))return n.getPromiseAndReset();const l=t.get(e.apiUrl+r,i,{withCredentials:!0,headers:a||{}}).then((t=>u?function(e,t,n,r){const i=Object.keys(e.data).reduce(((r,i)=>[...r,...e.data[i].items.map((e=>({...ni(e,t,n),categoryId:i})))]),[]);let o={cursor:null,size:null};return e.data[r]&&(o=Xr(e.data[r])),{data:i,paging:o}}(t,e,o,c):ri(t,e,o))).catch(Vr);return l}function i(t,i){return void 0===i&&(i=!1),function(o,a,s){(s=s||{}).paging=s.paging||{};const{cursor:u,size:c}=s.paging;let l="";if(e.wixUser&&(l=":wix"),u){const t=r(u,{},s.thumbnails,s.headers,null,i,o);return e.prefetchNextPage&&t.then((e=>{const{cursor:t}=e.paging;t&&n.set({cursor:t},r(t,{},s.thumbnails,s.headers,null,i,o),a,""+o+l)})),t}const{filters:d={}}=s,p=$r(d),f=i?s.categories:o,h={guid:f?""+f+l:null,mediaType:s.mediaType||xn.Picture,language:s.language,searchString:a||"",pageSize:c||e.itemsLimit,semantic:s.semantic,newScoringProfile:"true"};p.length&&(h.tags=p),s.country&&(h.country=s.country);const m=r(t,h,s.thumbnails,s.headers,null,i,o);return e.prefetchNextPage&&m.then((e=>{const{cursor:t}=e.paging;t&&n.set({cursor:t},r(t,{},s.thumbnails,s.headers,null,i,o),a,""+o+l)})),m}}const o=i("/wix_search"),a=(e,t)=>{let{data:n,paging:r}=e;return{data:n.map((e=>({...e,categoryId:t,hasMoreItemsInThisCategory:null!==r.cursor}))),paging:r}};return{list:function(t,i){(i=i||{}).paging=i.paging||{};const{cursor:o,size:a}=i.paging;if(o){const a=r(o,{},i.thumbnails,i.headers);return e.prefetchNextPage&&a.then((e=>{const{cursor:o}=e.paging;o&&n.set({cursor:o},r(o,{},i.thumbnails,i.headers),null,t)})),a}const{filters:s={}}=i,u=$r(s);e.wixUser&&(t+=":wix");const c={guid:t||null,mediaType:i.mediaType||xn.Picture,language:i.language,pageSize:a||e.itemsLimit,...i.cacheKiller?{_ck:(new Date).getTime()}:{}};i.country&&(c.country=i.country),u.length&&(c.tags=u);const l=r("/light_items",c,i.thumbnails,i.headers);return e.prefetchNextPage&&l.then((e=>{const{cursor:o}=e.paging;o&&n.set({cursor:o},r(o,{},i.thumbnails,i.headers),null,t)})),l},search:i("/light_search"),searchV2:i("/wix_search"),multiSearch:(e,t,n)=>null===n.paging.cursor?((e,t,n)=>Promise.all(n.categories.map((e=>{let{id:r,mediaType:i}=e;const s={...n,mediaType:i};return o(r,t,s).then((e=>({...a(e,r),categoryId:r})))}))).then((t=>({data:t.reduce(((e,t)=>e.concat(t.data)),[]),paging:t.find((t=>{let{categoryId:n}=t;return n===e})).paging}))))(e,t,n):o(e,t,n).then((t=>a(t,e)))}}const oi={apiUrl:"https://publicmedia.wix.com/public",itemsLimit:50,imageOperationsApi:Cn.Vanbrandt,filesUrl:"https://static.wixstatic.com",videoFilesUrl:"https://video.wixstatic.com",thumbnailSizes:{thumbnail:{width:210,height:210,mode:"fill"},thumbnailFit:{width:210,height:210,mode:"fit"},preview:{width:375,height:375,mode:"fit"}},videoPreviewQuality:"480p",wixUser:!1};function ai(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u({},oi,e),n=new cn,r=G(),i=Zr(t,r),o=ii(t,r),a=function(e,t){return{get:function(n,r){r=r||{},Array.isArray(n)&&(n=n.join(","));const i={guid:n,language:r.language,client:r.client},o={...r.headers,"Content-Type":F.UrlEncoded};return t.get(e.apiUrl+"/multi_item",i,{withCredentials:!0,headers:o}).then((t=>ri(t,e,r.thumbnails))).catch(Vr)}}}(t,r);this.name="public",this.correlationId=n,this.folders=ln(this,te.FOLDERS,i),this.items=ln(this,te.ITEMS,o),this.item=ln(this,te.ITEM,a)}function si(e,t){let{publicSettings:n={},privateSettings:r={}}=void 0===t?{}:t;const i=[ee(ai,n).item.get(e)];if(r.siteMediaToken){const t=ee(Tr,r);i.push(t.items.get(e))}else{const t=ee(Lr,r);i.push(t.item.get(e[0]).then((e=>(e.data=[e.data],e)),(()=>({data:[]}))))}return Promise.all(i).then((e=>Array.prototype.concat.apply([],e.map((e=>e.data))))).catch(R)}const ui={...te};function ci(e,t){Object.defineProperty(ui,e,{enumerable:!1,value:t})}ci("on",X),ci("off",Z);var li=n(816),di=n.n(li),pi={NOT_FOUND:new Error("Key was not found in capsule"),SERVER_ERROR:new Error("Failed to perform operarion on server"),LOCAL_STORAGE_UNSUPPORTED:new Error("LocalStorage is not supported"),COOKIE_CONSENT_DISALLOWED:new Error("The item cannot be set because the user has not approved the category it belongs to")};var fi="|",hi="#",mi="capsule",gi=pi.NOT_FOUND,vi=pi.LOCAL_STORAGE_UNSUPPORTED,yi=pi.COOKIE_CONSENT_DISALLOWED,_i=function(e,t){return _i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},_i(e,t)};function bi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var wi=function(){return wi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},wi.apply(this,arguments)};function Ui(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Ti(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;Object.create;var xi=function(){function e(){}return e.verify=function(t){if(t instanceof e)return t;throw new Error("This class must extend BaseStorage!")},e.prototype.extendScope=function(e){return e},e}(),ki=function(e){function t(t){var n=t.strategy,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["strategy"]),i=e.call(this)||this;return i.storageStrategy=xi.verify(n),i._options=r,i}return bi(t,e),t.prototype.setItem=function(e,t,n){return Ui(this,void 0,void 0,(function(){var r;return Ti(this,(function(i){return r=this._buildValidateOptions(this._options,n),[2,this.storageStrategy.setItem(e,t,r)]}))}))},t.prototype.getItem=function(e,t){var n=this._buildValidateOptions(this._options,t);return this.storageStrategy.getItem(e,n)},t.prototype.removeItem=function(e,t){var n=this._buildValidateOptions(this._options,t);return this.storageStrategy.removeItem(e,n)},t.prototype.getAllItems=function(e){var t=this._buildValidateOptions(this._options,e);return this.storageStrategy.getAllItems(t)},t.prototype._buildValidateOptions=function(e,t){if((t=wi(wi({},e),t)).scope=this.storageStrategy.extendScope(t.scope),!function(e){return"string"==typeof e.namespace}(t))throw new Error("namespace is required and should be a string");return t},t}(xi);var Si=["essential","functional","analytics","advertising"];function Ei(e){!function(e){if(!e)return;if(-1===Si.indexOf(e)){var t=Si.map((function(e){return"'"+e+"'"})).join(", ");throw new Error("category must be one of "+t)}}(e);var t=function(){var e=("object"==typeof consentPolicyManager&&consentPolicyManager.getCurrentConsentPolicy&&consentPolicyManager.getCurrentConsentPolicy()||"object"==typeof Wix&&Wix.Utils&&Wix.Utils.getCurrentConsentPolicy&&Wix.Utils.getCurrentConsentPolicy()||{}).policy;return e}();if(void 0!==t&&!t[e])throw yi}function Pi(e){var t=e.split(hi),n=t[0],r=t[1],i=n.split(fi),o=i[1],a=i[2];return void 0===a?{namespace:o,key:r}:{namespace:o,scope:a,key:r}}function Oi(e){return JSON.parse(e)}function Ii(e){void 0===e&&(e=mi+fi);for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(r.startsWith(e)){var i=localStorage.getItem(r);t.push(wi(wi({size:r.length+i.length,originalKey:r},Oi(i)),Pi(r)))}}return t}function Ai(e){return!!e.expiration&&e.createdAt+1e3*e.expiration<=Date.now()}function Ri(e,t){return void 0===t&&(t=e.records[0]),localStorage.removeItem(t.originalKey),{records:t===e.records[0]?e.records.slice(1):e.records.filter((function(e){return e.originalKey!==t.originalKey})),requiredSpace:e.requiredSpace-t.size}}function Mi(e,t){return e.lastUsed-t.lastUsed}function Ci(e){return e.records.length>0&&e.requiredSpace>0}function ji(e){var t={records:Ii(),requiredSpace:e};!function(e){for(e.records.sort(Mi);Ci(e);)e=Ri(e)}(t=function(e){return e.records.filter((function(e){return Ai(e)})).forEach((function(t){return e=Ri(e,t)})),e}(t))}var zi=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return bi(t,e),t.prototype.setItem=function(e,t,n){return Ui(this,void 0,void 0,(function(){var r,i;return Ti(this,(function(o){r=Fi(e,n),i=Li(t,n),n.category&&Ei(n.category);try{localStorage.setItem(r,i)}catch(e){ji(r.length+i.length),localStorage.setItem(r,i)}return[2]}))}))},t.prototype.getItem=function(e,t){var n,r=Fi(e,t);try{n=localStorage.getItem(r)}catch(e){return Promise.reject(vi)}return(n=n&&Oi(n))&&!Ai(n)?(function(e,t){var n=t.expiration,r=t.createdAt;localStorage.setItem(e,Li(t.value,{expiration:n,createdAt:r}))}(r,n),Promise.resolve(n.value)):Promise.reject(gi)},t.prototype.removeItem=function(e,t){return e=Fi(e,t),localStorage.removeItem(e),Promise.resolve()},t.prototype.getAllItems=function(e){var t=Ni(e),n={};return Ii(t).forEach((function(e){Ai(e)||(n[e.key]=e.value)})),Promise.resolve(n)},t}(xi);function Fi(e,t){return Ni(t)+e}function Ni(e){return[mi,e.namespace,(t=e.scope,"string"==typeof t?t:JSON.stringify(t))].filter((function(e){return e})).join(fi)+hi;var t}function Li(e,t){var n={lastUsed:Date.now(),createdAt:t.createdAt||Date.now(),expiration:t.expiration,value:e};return JSON.stringify(n)}const Di={NotFound:gi,NotAllowed:yi},qi="functional";const Bi=new class{constructor(){di()(this,"capsule",new ki({strategy:new zi,namespace:"media-manager-sdk"}))}setItem(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=31536e7),void 0===r&&(r=qi),this.capsule.setItem(e,t,{expiration:n,category:r})}getItem(e){return this.capsule.getItem(e)}removeItem(e){return this.capsule.removeItem(e)}},Vi={DeviantArt:{apiUrl:"https://pix.wix.com",connectPath:"/services/deviantart/connect",disconnectPath:"/services/deviantart/disconnect",parameterName:"daact"},Picasa:{apiUrl:"https://pix.wix.com",connectPath:"/services/google/connect",disconnectPath:"/services/google/disconnect",parameterName:"goglact"},GooglePhotos:{apiUrl:"https://pix.wix.com",connectPath:"/services/google_photos/connect",disconnectPath:"/services/google_photos/disconnect",parameterName:"gphact"},Dribbble:{apiUrl:"https://pix.wix.com",connectPath:"/services/dribble/connect",disconnectPath:"/services/dribble/disconnect",parameterName:"dract"},Drive:{apiUrl:"https://pix.wix.com",connectPath:"/services/gdrive/connect",disconnectPath:"/services/gdrive/disconnect",parameterName:"gdrvact"},Dropbox:{apiUrl:"https://pix.wix.com",connectPath:"/services/dropbox/connect",disconnectPath:"/services/dropbox/disconnect",parameterName:"dbact"},Instagram:{apiUrl:"https://pix.wix.com",connectPath:"/services/instagram/connect",disconnectPath:"/services/instagram/disconnect",parameterName:"instact"},InstagramVideo:{apiUrl:"https://pix.wix.com",connectPath:"/services/instagram/connect",disconnectPath:"/services/instagram/disconnect",parameterName:"instact"},Facebook:{apiUrl:"https://pix.wix.com",connectPath:"/services/facebook/connect",disconnectPath:"/services/facebook/disconnect",parameterName:"fbact"},FacebookVideo:{apiUrl:"https://pix.wix.com",connectPath:"/services/facebook/connect",disconnectPath:"/services/facebook/disconnect",parameterName:"fbact"},Flickr:{apiUrl:"https://pix.wix.com",connectPath:"/services/flickr/connect",disconnectPath:"/services/flickr/disconnect",parameterName:"flact"},Youtube:{apiUrl:"https://pix.wix.com",connectPath:"/services/youtube/connect",disconnectPath:"/services/youtube/disconnect",parameterName:"ytact"},Vimeo:{apiUrl:"https://pix.wix.com",connectPath:"/services/vimeo/connect",disconnectPath:"/services/vimeo/disconnect",parameterName:"vmact"}};function Hi(e,t){if(!(e in Vi))throw new Error("Invalid source");const n=u(Vi[e],t),r=G();return{connect:function(){window.open(""+n.apiUrl+n.connectPath+"?return_url="+n.redirectUrl,"connector","width=950,height=550");const e=new Promise((function(e,t){window.connectService=function(r){const i=p(r,n.parameterName),o=p(r,"status");!i||o&&"FAIL"===o?t(A({code:401,message:"Not Authorized"})):e(i)}}));return e.then((function(e){return Bi.setItem(n.parameterName,e)}),(function(e){return e})),e},disconnect:function(){return Bi.removeItem(n.parameterName),r.get(""+n.apiUrl+n.disconnectPath,null,{withCredentials:!0})},isConnected:function(){return Bi.getItem(n.parameterName).then((e=>Boolean(e)),(e=>{switch(e){case Di.NotFound:case Di.NotAllowed:return!1;default:throw e}}))}}}const Wi={default:0,private:1,public:2,bigstock:4,drive:5,dropbox:6,facebook:7,flickr:8,instagram:9,picasa:10,"private-site":11,"deviant-art":12,dribbble:13,facebookVideo:14,favorites:15,"google-photos":16,recommended:17,shutterstock:18,unsplash:19,vimeoSearch:20,"visitors-uploads":21,"wix-site":22,youtubeSearch:23};let Gi="";function Ji(){Gi=function(){let e="";for(;e.length<32;)e+=Math.floor(1e16*Math.random());return[e.slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20,32)].join("-")}(),en("/mg",{src:26,evid:tn.BIEventsIds.uploadQueueStarted,upload_queue_id:Gi,...En()})}function Ki(e){en("/mg",{src:26,evid:tn.BIEventsIds.uploadQueueFinished,upload_queue_id:Gi,files_count:e.length,...En()})}function Qi(e,t,n){Object.keys(e).forEach((function(r){const i=e[r];if("string"!=typeof i)return Qi(i,t,n);!0===t?X(e[r],n):Z(e[r],n)}))}function Yi(e,t){Qi(te,e,(function(e,n){Array.isArray(e)&&(e=Promise.all(e)),Pn(e,n);const r=o();return e.then((function(){}),(function(e){const i={requestTimeMs:o()-r,...t};!function(e,t,n,r){const i=n.code||"000",o=tn.BIAdaptersIds[e]||"00",a=tn.BIAdaptersRequestsIds[t]||"00",s=e+" "+t+": "+n.message,u=o+a+i,l=e+"."+t+"."+i;en("/trg",{src:25,evid:10,cat:Wi[e]||Wi.default,iss:1,sev:tn.severity.error,errc:u||"0000000",errn:l||"",ver:r.version||"VERSION",did:(r.siteId||"").replace("_template_",""),p1:i||"000",p2:c(n,"data.error_code",""),p3:c(n,"data.error_info.key",""),ts:r.requestTimeMs||"",dsc:s||""})}(n.eventTarget.name,n.eventName,e,i)}))})),!0===e?X(te.ITEM.UPLOAD,On):Z(te.ITEM.UPLOAD,On),!0===e&&(Zt.on(se.UploadQueueStarted,Ji),Zt.on(se.UploadQueueFinished,Ki))}const $i={parseJson:gr,mappers:e=>(t,n)=>{switch(t.type){case"copy_file":n({...t,info:{...t.info,data:e.toItem(t.info.data)}});break;case"copy_folder":n({...t,info:{...t.info,data:e.toFolder(t.info.data)}});break;default:n(t)}}},Xi="boards",Zi="all",eo="on",to="off",no=e=>e?e.split("."):[],ro=e=>{return{id:(t=e.board_id,"board."+t),parentId:"boards",kind:dn.Board,source:Xi,sitesVisibility:e.visibility||Zi,userId:e.user_id,siteId:e.site_id,name:e.title,description:e.description,thumbnailUrl:e.cover_url?_(e.cover_url):null,createdAt:e.created_ts?Number(e.created_ts):null,teamAvailability:e.shared_with?eo:to};var t},io=e=>{const[,t]=no(e.id);return{board_id:t,title:e.name,visibility:e.sitesVisibility||Zi,user_id:e.userId,site_id:e.siteId,description:e.description,cover_url:e.thumbnailUrl,created_ts:e.createdAt,team_shared:e.teamAvailability===eo}},oo=e=>{switch(e){case dn.File:return tr;case dn.Folder:return fn;case"external":case"public":return e=>({...e,tags:[...e.tags||[],"_fav"]});default:throw new Error("Unsupported item type "+e)}};const ao=e=>{const t=e.cursor||null,n=e.items.length||null;return e.data=(e.items||[]).map(ro),e.paging={cursor:t,size:n},e};function so(e){return Promise.reject(e)}const uo=["shutterStock","unsplash"];function co(e){if(e.kind===dn.Folder)return"folder";if(e.kind===dn.File)return e.mediaType;throw new Error("Unsupported item kind "+e.kind)}function lo(e){return-1!==uo.indexOf(e.source)?{src_id:e.id,src_type:"external",media_type:co(e),src_info:e,title:e.name}:"public"===e.source||"custom"===e.source?{src_id:e.id,src_type:"public",media_type:co(e),src_info:e,title:e.name}:{src_id:e.id,src_token:e.siteMediaToken,src_type:e.kind,media_type:co(e)}}const po=e=>{en("/mg",{src:26,evid:tn.BIEventsIds.responseTime,call_name:"boards.cover.upload",response_time:Math.round(e.responseTime||0),response_size:Math.round(e.responseSize||0),response_speed:e.responseTime>0&&Math.round(e.responseSize/(e.responseTime/1e3)),result:e.isSuccess?"success":"fail"})};function fo(e,t){function n(t,n){return t.data=(t.data.items||[]).map((function(t){return function(e,t,n){const r=oo(e.src_type);return{id:e.id,...e.src_info?r(e.src_info,t,n):{},siteMediaToken:e.token}}(t,e,n)})),t}const r={size:50,cursor:null},i={order:"date",direction:"desc"};function a(o,a){a=a||{};const s={...i,...a.sort},u={...r,...a.paging},c={page_size:u.size||e.itemsLimit,cursor:u.cursor||null,order:"desc"===s.direction?"-"+s.order:s.order};return a.mediaType&&(c.media_type=a.mediaType.split(",").concat(["folder"]).join(",")),t.get(e.apiUrl+"/go/boards/"+o+"/refs",c,{withCredentials:!0,headers:a.headers||{}}).then((e=>(e.paging={size:u.size,cursor:e.data.cursor},n(e,a.thumbnails)))).catch(so)}function s(n,r){const i=o();return function(n,r,i){return void 0===i&&(i={}),t.get(e.apiUrl+"/v3/boards/"+n+"/upload/url",{file_name:r.name.toLowerCase(),media_type:xn.Picture},{withCredentials:!0,headers:i.headers||{}}).then((e=>e.data)).catch(so)}(n,r).then((e=>{const{upload_token:n,upload_url:i}=e;return t.upload(i,{file:r,upload_token:n})})).then((e=>{const t=o(),{file_url:r,file_size:a}=e.data[0];return po({isSuccess:!0,boardId:n,fileId:r,responseTime:t-i,responseSize:a}),r})).catch((e=>{const t=o();throw po({isSuccess:!1,boardId:n,responseTime:t-i}),new Error(e)}))}return{list:function(n,o){const[,s]=no(n);if(s)return a(s,o);o=o||{};const u={...i,...o.sort},c={...r,...o.paging},l={page_size:c.size||e.itemsLimit,cursor:c.cursor||null,order:"desc"===u.direction?"-"+u.order:u.order,is_team:e.isTeam||o.isTeam};return t.get(e.apiUrl+"/go/boards",l,{withCredentials:!0,headers:o.headers||{}}).then((e=>ao(e.data))).catch(so)},remove:function(n,r){r=r||{};const i=e.apiUrl+"/v3/boards",o={withCredentials:!0,headers:r.headers||{}};return t.del(i,{boards:n.map((e=>no(e)[1]))},null,o).then((()=>({id:n}))).catch(so)},create:function(n,r){if(!n||!n.name)return so({status:-200,statusText:"Internal JS Error",data:{message:"Please specify name"}});r=r||{};const i=e.apiUrl+"/v3/boards",o=io(n),a={headers:r.headers||{},withCredentials:!0};return t.post(i,o,null,a).then((e=>{const r=e.data&&e.data.board_id;return r&&n.fileThumbnail?s(r,n.fileThumbnail).then((n=>t.put(i,{...e.data,cover_url:n},null,a))):e})).then((e=>ro(e.data))).catch(so)},update:function(n,r,i){if(!r||!r.name)return so({status:-200,statusText:"Internal JS Error",data:{message:"Please specify name"}});i=i||{};const o=e.apiUrl+"/v3/boards",a=io(r),u={headers:i.headers||{},withCredentials:!0};return(r.fileThumbnail?s(a.board_id,r.fileThumbnail).then((e=>t.put(o,{...a,cover_url:e},null,u))):t.put(o,a,null,u)).then((e=>ro(e.data))).catch(so)},addItems:function(r,i,o){o=o||{};const a=e.apiUrl+"/v3/boards/refs",s={boards:r.map((e=>no(e)[1])),items:i.map(lo)},u={headers:o.headers||{},withCredentials:!0};return t.post(a,s,null,u).then((e=>n(e,o.thumbnails))).catch(so)},listItems:a,deleteItems:function(n,r,i){i=i||{};const o=e.apiUrl+"/v3/boards/"+no(n)[1]+"/refs",a={items:r},s={headers:i.headers||{},withCredentials:!0};return t.del(o,a,null,s).catch(so)}}}function ho(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t={params:{site_token:e.siteMediaToken}},n=u(ir,e),r=G(t),i=function(e,t){return{get:function(n,r){r=r||{};const[,i]=no(n);return t.get(e.apiUrl+"/v3/boards/"+i,null,{withCredentials:!0,headers:r.headers||{}}).then((e=>({...e,data:ro(e.data)}))).catch(so)}}}(n,r),o=fo(n,r),a=function(e,t){return{getBoards:function(n,r){r=r||{};const[i]=n.split("/");return t.get(e.apiUrl+"/v3/boards/source/"+i,null,{withCredentials:!0,headers:r.headers||{}}).then((e=>({...e,data:e.data.items.map(ro)}))).catch(so)}}}(n,r);this.name=Xi,this.item=ln(this,te.ITEM,i),this.items=ln(this,te.ITEMS,o),this.source=ln(this,te.SOURCE,a)}function mo(e,t){const n=t.data.next_offset;return t.data.results=t.data.results||[],t.data.results=t.data.results.filter((e=>Boolean(e.folderid))),t.data=t.data.results.map((function(e){return function(e){return{id:e.folderid,name:e.name,kind:dn.Folder,source:"deviantArt",mediaType:xn.Picture,parentId:e.parent,filesCount:1,createdAt:null}}(e)})),t.paging={cursor:n||null,size:null},t}function go(e){return 400===e.code&&e.data&&190===e.data.code&&(e.code=403),Promise.reject(e)}function vo(e){const t=O(e);if(e&&403===e.code&&"Missing Wix session"===t?(e.code=401,e.message="Wix Session required",e.data.message="Wix Session required"):"site_token"===t?(e.message="Site token has expired",e.data.message="Site token has expired"):"Tokens mismatch"===t&&(e.message="Tokens mismatch",e.data.message="Tokens mismatch"),400===e.code){const{code:t,message:n,info:r}=c(e,"data.data.ext_response.payload.0",{});e.code=406,e.message=n,e.data={error_code:t,error_description:n,error_info:r}}return Promise.reject(e)}const yo=(e,t)=>{if(!e)throw new Error("createImportAsyncMethod: settings are required");if(!t)throw new Error("createImportAsyncMethod: http is required");const n=(e=u({siteFilesSettings:ir},e)).namespace?rr.PRVATE:rr.PUBLIC;function r(t){return t.data=tr(t.data.file,e.siteFilesSettings),t}return(i,o)=>{if(!i.file.id)throw new Error("importAsync: fileSource.file.id is required");o=o||{};const a={file_id:i.file.id,acl:i.acl||n};e.siteMediaToken&&(a.site_token=e.siteMediaToken),i.language&&(a.language=i.language),i.folderId&&(a.parent_folder_id=i.folderId),i.tags&&i.tags.length&&(a.labels=i.tags.join(",")),i.systemTags&&i.systemTags.length&&(a.tags=i.systemTags.join(","));const s=o.vision||e.vision;s&&(a.vision=s.join(",")),e.namespace&&(a.ns=e.namespace);const u={withCredentials:!0,headers:{"Content-Type":F.UrlEncoded}};return t.post(""+e.apiUrl+e.apiPath+"/download_async",a,null,u).then(r).catch(vo)}};function _o(e){return{id:e.deviationid,name:e.title||"",kind:dn.File,source:"deviantArt",mediaType:xn.Picture,thumbnailUrl:_((t=e.thumbs,E(t,(function(e){return e.width+e.height})).src)),createdAt:e.published_time,previewUrl:_(c(e,"preview.src","")),fileUrl:_(c(e,"content.src","")),width:c(e,"content.width",null),height:c(e,"content.height",null),tags:[]};var t}function bo(e){const t=e.data.next_offset;return e.data.results=e.data.results||[],e.data.results=e.data.results.filter((e=>!e.folderid)),e.data=e.data.results.map(_o),e.paging={cursor:t||null,size:null},e}const wo={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/deviantart",foldersLimit:20,itemsLimit:20};function Uo(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(wo,e),n=G(),r=function(e,t){return{list:function(n,r){if(n)return Promise.resolve({data:[]});(r=r||{}).paging=r.paging||{};const i={limit:r.paging.size||e.foldersLimit,offset:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/gallery/folders",i,{withCredentials:!0,headers:r.headers||{}}).then(d(mo,e)).then((e=>({...e,data:e.data.map((e=>({...e,parentId:n})))}))).catch(go)}}}(t,n),i=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={limit:r.paging.size||e.itemsLimit,offset:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/gallery/"+(n||"all"),i,{withCredentials:!0,headers:r.headers||{}}).then(bo).catch(go)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="deviant-art",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}function To(e){const t=Boolean(c(e,"images.hidpi"));return{id:e.id,name:e.title,kind:dn.File,source:"dribbble",mediaType:xn.Picture,fileUrl:c(e,t?"images.hidpi":"images.normal"),previewUrl:c(e,"images.normal"),thumbnailUrl:c(e,"images.teaser"),createdAt:T(e.created_at),tags:e.tags,width:t?2*e.width:e.width,height:t?2*e.height:e.height}}function xo(e){const t=function(e){if(!e)return null;const t=e.split(/,\s+/).filter((e=>e.indexOf('rel="next"')>-1))[0];if(!t)return null;const n=t.match(/[?&]page=(\d+)/);return n&&n[1]?parseInt(n[1],10):null}(c(e,"data.headers.link",null));return e.data=(e.data.result||[]).map(To),e.paging={cursor:t},e}function ko(e){return 500===e.code&&(e.code=403,e.data={message:"Unauthorized",result:"error"}),Promise.reject(e)}const So={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/dribble",itemsLimit:50};function Eo(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(So,e),n=G(),r={list(){return Promise.resolve({data:[]})}},i=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={per_page:r.paging.size||e.itemsLimit,page:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/shots",i,{withCredentials:!0,headers:r.headers||{}}).then(xo).catch(ko)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="dribbble",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}const Po=e=>({id:e.id,name:e.title,kind:dn.Folder,source:"drive",parentId:e.parents[0].id,filesCount:1,createdAt:e.createdDate}),Oo=e=>({...e,data:(e.data.items||[]).map(Po)}),Io=Promise.reject.bind(Promise);const Ao=["wav","mp3","flac","m4a","wma","aac"],Ro=["avi","mpeg","mpg","mpe","mp4","mkv","webm","mov","ogv","vob","m4v","3gp","divx","xvid","mxf","wmv","m1v"],Mo=["gif","jpeg","jpg","png"],Co=["svg"],jo=["swf"],zo=["zip"],Fo=e=>t=>-1!==e.indexOf(t),No=(Fo([].concat(Ao,Ro,["ttf","otf","woff","woff2"],["pdf","odp","odt","epub","doc","xls","ppt","docx","xlsx","pptx","dot","dotx","xlt","xltx","xlw","pot","potx","pps","ppsx","sldx"],Mo,Co,jo,zo)),Fo(Ao)),Lo=Fo(Ro),Do=Fo(zo),qo=Fo(jo),Bo=Fo(Co),Vo=Fo(Mo),Ho=function(e){return void 0===e&&(e=""),e=e.toLowerCase(),No(e)?xn.Music:Lo(e)?xn.Video:Vo(e)?xn.Picture:Do(e)?xn.Archive:qo(e)?xn.SWF:Bo(e)?xn.Shape:xn.Document},Wo=e=>{const{imageMediaMetadata:t={}}=e,{width:n,height:r}=t;return{id:e.id,name:e.title,kind:dn.File,source:"drive",mediaType:Ho(e.fileExtension),fileUrl:_(e.webContentLink||e.selfLink||e.downloadUrl||e.thumbnailLink),thumbnailUrl:e.thumbnailLink?_(e.thumbnailLink):null,previewUrl:e.thumbnailLink?_(e.thumbnailLink):null,createdAt:e.createdDate,tags:[],...void 0===r?{}:{height:r},...void 0===n?{}:{width:n}}},Go=e=>({...e,paging:{cursor:e.data.nextPageToken},data:(e.data.items||[]).map(Wo)});const Jo={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/gdrive",foldersLimit:500,itemsLimit:50};function Ko(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(Jo,e),n=G(),r=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={maxResults:r.paging.size||e.foldersLimit,pageToken:r.paging.cursor||""};return n&&(i.album_id=n),t.get(""+e.apiUrl+e.apiPath+"/albums",i,{withCredentials:!0}).then(Oo).then((e=>({...e,data:e.data.map((e=>({...e,parentId:n})))}))).catch(Io)}}}(t,n),i=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={album_id:n||null,maxResults:r.paging.size||e.itemsLimit,pageToken:r.paging.cursor||""};return t.get(""+e.apiUrl+e.apiPath+"/files",i,{withCredentials:!0}).then(Go).catch(Io)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="drive",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}const Qo={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/dropbox2",foldersLimit:500,itemsLimit:50},Yo=e=>({id:e.path_lower,name:e.name,kind:dn.Folder,source:"dropbox",parentId:e.path_lower&&e.path_lower.split("/").slice(0,-1).join("/")||null,filesCount:1,createdAt:null}),$o=e=>"folder"===e[".tag"],Xo=e=>({...e,data:(e.data.entries||[]).filter($o).map(Yo)}),Zo=Promise.reject.bind(Promise),ea=(e,t)=>({list:function(n,r){(r=r||{}).paging=r.paging||{};const i={"max-results":r.paging.size||e.foldersLimit,"start-index":r.paging.cursor||1};return n&&(i.album_id=n),t.get(""+e.apiUrl+e.apiPath+"/albums",i,{withCredentials:!0}).then(Xo).catch(Zo)}}),ta=[xn.Video,xn.Picture],na=(e,t)=>{const n=(e=>-1===e.name.indexOf(".")?"":e.name.toLowerCase().split(".").pop())(e),r=Ho(n),i=(o=e.path_lower,encodeURIComponent(o).replace("'","%27"));var o;const a={id:e.id,name:e.name,kind:dn.File,source:"dropbox",mediaType:r,fileUrl:e.url,thumbnailUrl:""+t.apiUrl+t.apiPath+"/thumbnail?path="+i,createdAt:e.client_modified,tags:[],pathLower:e.path_lower};var s;return(["pdf","rtf"].indexOf(s=n)>=0||ta.indexOf(Ho(s))>=0)&&(a.previewUrl=""+t.apiUrl+t.apiPath+"/thumbnail?path="+i+"&size=w640h480"),a};function ra(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function ia(e){return function t(n){return 0===arguments.length||ra(n)?t:e.apply(this,arguments)}}function oa(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return ra(n)?t:ia((function(t){return e(n,t)}));default:return ra(n)&&ra(r)?t:ra(n)?ia((function(t){return e(t,r)})):ra(r)?ia((function(t){return e(n,t)})):e(n,r)}}}var aa=oa((function(e,t){var n,r=Number(t),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=e(i),i+=1;return n})),sa=aa,ua=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};var ca=ia((function(e){return!!ua(e)||!!e&&("object"==typeof e&&(!function(e){return"[object String]"===Object.prototype.toString.call(e)}(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))}));function la(e){return function t(n){for(var r,i,o,a=[],s=0,u=n.length;s<u;){if(ca(n[s]))for(o=0,i=(r=e?t(n[s]):n[s]).length;o<i;)a[a.length]=r[o],o+=1;else a[a.length]=n[s];s+=1}return a}}var da=ia(la(!0));const pa=(e,t)=>{async function n(n){const r=Math.ceil(n.data.length/25),i=await Promise.all(sa(function(n,r){return function(i){const o=(n.data||[]).slice(i*r,(i+1)*r);return t.post(""+e.apiUrl+e.apiPath+"/get_thumbnail_batch",{paths:o.map((e=>e.pathLower))},null,{withCredentials:!0}).then((e=>e.data))}}(n,25),r)),o=da(i.map((e=>e.entries)));return{...n,data:(n.data||[]).map(((e,t)=>({...e,thumbnailUrl:o[t]&&"success"===o[t][".tag"]&&"data:image/jpeg;base64,"+o[t].thumbnail})))}}return{list:function(r,i){(i=i||{}).paging=i.paging||{};const o={album_id:r||null,cursor:i.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/files",o,{withCredentials:!0}).then((t=>((e,t)=>({...e,paging:{cursor:e.data.has_more?e.data.cursor:null},data:(e.data.entries||[]).map((e=>na(e,t)))}))(t,e)),Zo).then(n)}}};function fa(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(Qo,e),n=G(),r=ea(t,n),i=pa(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="dropbox",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}const ha={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/facebook2",itemsLimit:50,thumbnailSizes:{thumbnail:{width:210,height:210,mode:"fill"},preview:{width:375,height:375,mode:"fit"}}};function ma(){return{list:function(){return Promise.resolve({data:[{id:"FacebookVideo",name:"FacebookVideo",mediaType:xn.Video,parentId:null,filesCount:null,createdAt:null}]})}}}function ga(e,t){function n(e,t){const n=new RegExp(t+'="(.+?)"',"i"),r=e.match(n);return r?r[1]:""}const r={id:Number(t.id),name:U(t.title),iframeSrc:n(t.embed_html,"src"),embedHtml:t.embed_html,width:Number(n(t.embed_html,"width")),height:Number(n(t.embed_html,"height")),createdAt:(i=t.created_time,T(i.replace(/([+-]\d\d)(\d\d)$/,"$1:$2"))),folderId:null,mediaType:xn.Video};var i;if(!t.format)return r;const o=w(t.format.map((function(e){return{...e,url:e.picture}})),e.thumbnailSizes);return{...r,...o}}function va(e,t){let n=null,r=null;return t.data.paging&&t.data.paging.cursors&&t.data.paging.cursors.after&&t.data.paging.next&&(n=t.data.paging.cursors.after,r=Number(p(t.data.paging.next,"limit"))),t.data=(t.data.data||[]).map(d(ga,e)),t.paging={cursor:n,size:r},t}function ya(e){return Promise.reject(e)}function _a(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t={...ha,...e},n=G(),r=ma(),i=function(e,t){return{list:function(n,r){const i=r.thumbnailSizes?{thumbnailSizes:r.thumbnailSizes}:{},o={...e,...i};(r=r||{}).paging=r.paging||{};const a={limit:r.paging.size||e.itemsLimit,after:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/videos",a,{withCredentials:!0,headers:r.headers||{}}).then(d(va,o)).catch(ya)}}}(t,n);this.name="facebookVideo",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i)}const ba={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/facebook2",foldersLimit:50,itemsLimit:50};function wa(e,t){return t.data=(t.data.data||[]).map((function(t){return function(e,t){return{id:e.id,name:e.name,kind:dn.Folder,source:"facebook",mediaType:xn.Picture,parentId:null,thumbnailUrl:_(""+t.apiUrl+t.apiPath+"/picture?type=album&album_id="+e.id),filesCount:e.count,createdAt:e.created_time}}(t,e)})),t}function Ua(e){return 400===e.code&&e.data&&190===e.data.code&&(e.code=403),Promise.reject(e)}function Ta(e,t,n){if(n=n||190,t=t||190,1===e.length)return e[0].source;const r=e.filter((function(e){return e.width>t&&e.height>n})),i=S(r,(function(e){return e.width+e.height}));if(i)return i.source;return E(e,(function(e){return e.width+e.height})).source}function xa(e){return{id:e.id,folderId:null,name:e.name||"",kind:dn.File,source:"facebook",mediaType:xn.Picture,fileUrl:_(e.source),thumbnailUrl:_(Ta(e.images)),previewUrl:_(e.source),createdAt:e.created_time,tags:[],width:e.width,height:e.height}}function ka(e){let t;return e.data.paging&&e.data.paging.cursors&&(t=e.data.paging.cursors.after),e.data=(e.data.data||[]).map(xa),e.paging={cursor:t||null,size:null},e}function Sa(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(ba,e),n=G(),r=function(e,t){return{list:function(n,r){if(n)return Promise.resolve({data:[]});(r=r||{}).paging=r.paging||{};const i={limit:r.paging.size||e.foldersLimit,after:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/albums",i,{withCredentials:!0,headers:r.headers||{}}).then(d(wa,e)).catch(Ua)}}}(t,n),i=function(e,t){return{list:function(n,r){if(!n)return Promise.resolve({data:[]});(r=r||{}).paging=r.paging||{};const i={album_id:n,limit:r.paging.size||e.itemsLimit,after:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/photos",i,{withCredentials:!0,headers:r.headers||{}}).then(ka).catch(Ua)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="facebook",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}function Ea(e){return{id:e.id,name:e.title._content,kind:dn.Folder,source:"flickr",mediaType:xn.Picture,thumbnailUrl:e.primary_photo_extras.url_m||e.primary_photo_extras.url_s||e.primary_photo_extras.url_t,parentId:null,filesCount:Number(e.photos)+Number(e.videos),createdAt:1e3*Number(e.date_create)}}function Pa(e){return e.data=c(e,["data","photosets","photoset"],[]).map(Ea),e}function Oa(e){return Promise.reject(e)}const Ia=e=>"video"===e?xn.Video:xn.Picture;function Aa(e){const t=function(e){const t=e.url_m||e.url_s||e.url_t,n=e.url_b||t;return{fileUrl:e.url_o||n,thumbnailUrl:t,previewUrl:n}}(e);return{id:e.id,name:e.title,kind:dn.File,source:"flickr",folderId:null,mediaType:Ia(e.media),fileUrl:_(t.fileUrl),thumbnailUrl:_(t.thumbnailUrl),previewUrl:_(t.previewUrl),createdAt:null,tags:[],width:Number(e.width_o||e.width_m||e.width_s||e.width_t),height:Number(e.height_o||e.height_m||e.height_s||e.height_t)}}function Ra(e){const{page:t,pages:n,perpage:r,photo:i=[]}=e.data.photoset||{},o=t<n?Number(t)+1:null,a=Number(r);return e.data=i.map(Aa),e.paging={cursor:o,size:a},e}function Ma(e){const{page:t,pages:n,perpage:r,photo:i=[]}=e.data.photos||{},o=t<n?Number(t)+1:null,a=Number(r);return e.data=i.map(Aa),e.paging={cursor:o,size:a},e}const Ca={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/flickr",foldersLimit:50,itemsLimit:50};function ja(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(Ca,e),n=G(),r=function(e,t){return{list:function(n,r){if(n)return Promise.resolve({data:[]});(r=r||{}).paging=r.paging||{};const i={per_page:r.paging.size||e.foldersLimit,page:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/albums",i,{withCredentials:!0,headers:r.headers||{}}).then(Pa).catch(Oa)}}}(t,n),i=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={per_page:r.paging.size||e.itemsLimit,page:r.paging.cursor||null};return n?t.get(""+e.apiUrl+e.apiPath+"/photoset",{...i,set_id:n},{withCredentials:!0,headers:r.headers||{}}).then(Ra).catch(Oa):t.get(""+e.apiUrl+e.apiPath+"/photostream",i,{withCredentials:!0,headers:r.headers||{}}).then(Ma).catch(Oa)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="flickr",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}const za={IMAGE:"IMAGE",VIDEO:"VIDEO",CAROUSEL_ALBUM:"CAROUSEL_ALBUM"};function Fa(e){const t=e.media_type===za.VIDEO,n=t?xn.Video:xn.Picture;return{id:e.id,name:e.caption,kind:dn.File,source:"instagram",mediaType:n,fileUrl:e.media_url,thumbnailUrl:_(t?e.thumbnail_url:e.media_url),previewUrl:_(e.media_url)}}function Na(e){const t=e.data.cursors||null;return e.data=da((e.data.data||[]).map((e=>e.media_type===za.CAROUSEL_ALBUM?(e.children.data||[]).map((t=>Fa({...t,caption:e.caption}))):Fa(e)))),e.paging={cursor:t&&t.after},e}function La(e){return 500===e.code&&(e.code=403,e.data={message:"Unauthorized",result:"error"}),Promise.reject(e)}const Da={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/instagram",itemsLimit:50};function qa(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(Da,e),n=G(),r={list(){return Promise.resolve({data:[]})}},i=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={after:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/media",i,{withCredentials:!0,headers:r.headers||{}}).then(Na).catch(La)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="instagram",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}const Ba={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/google_photos",foldersLimit:50,itemsLimit:100};function Va(e){return{id:e.id,name:e.title,kind:dn.Folder,source:"googlePhotos",mediaType:xn.Picture,thumbnailUrl:e.coverPhotoBaseUrl,parentId:null,filesCount:parseInt(e.mediaItemsCount,10),createdAt:null}}function Ha(e){const{nextPageToken:t,albums:n}=e.data,r={cursor:t};return{data:(n||[]).map(Va),paging:r}}function Wa(e){return Promise.reject(e)}const Ga=e=>-1!==e.mimeType.indexOf("video/");function Ja(e){return{id:e.id,name:e.filename,kind:dn.File,source:"googlePhotos",mediaType:Ga(e)?xn.Video:xn.Picture,fileUrl:Ga(e)?e.baseUrl+"=dv":e.baseUrl+"=d",thumbnailUrl:e.baseUrl+"=w150-h150",previewUrl:e.baseUrl+"=w300-h300",createdAt:e.mediaMetadata&&e.mediaMetadata.creationTime,tags:[],width:e.mediaMetadata&&parseInt(e.mediaMetadata.width,10)||1024,height:e.mediaMetadata&&parseInt(e.mediaMetadata.height,10)||768}}function Ka(e){const{nextPageToken:t,mediaItems:n}=e.data,r={cursor:t||null};return{data:(n||[]).map(Ja),paging:r}}function Qa(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(Ba,e),n=G(),r=function(e,t){return{list:function(n,r){if(n)return Promise.resolve({data:[]});(r=r||{}).paging=r.paging||{};const i={pageSize:Math.min(r.paging.size||e.foldersLimit,e.foldersLimit),pageToken:r.paging.cursor};return t.get(""+e.apiUrl+e.apiPath+"/albums",i,{withCredentials:!0,headers:r.headers||{}}).then(Ha).catch(Wa)}}}(t,n),i=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={albumId:n||null,pageSize:Math.min(r.paging.size||e.itemsLimit,e.itemsLimit),pageToken:r.paging.cursor};return t.get(""+e.apiUrl+e.apiPath+"/media",i,{withCredentials:!0,headers:r.headers||{}}).then(Ka).catch(Wa)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="google-photos",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}function Ya(e){return/\d+/g.exec(e)[0]}function $a(e){const t=function(e){const t=new RegExp("page=(\\d+)");return e.data.paging.next&&t.exec(e.data.paging.next)[1]}(e);return e.data=da((e.data.data||[]).map((e=>function(e){return{id:Ya(e.uri),name:e.name,kind:"file",mediaType:"video",source:"vimeo",thumbnailUrl:e.pictures.base_link,previewUrl:_(e.uri),fileUrl:_(e.uri)}}(e)))),e.paging={cursor:t},e}function Xa(e){return Promise.reject(e)}const Za={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/vimeo2",itemsLimit:50};function es(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(Za,e),n=G(),r={list(){return Promise.resolve({data:[]})}},i=function(e,t){return{list:function(n,r){(r=r||{}).paging=r.paging||{};const i={page:r.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/videos",i,{withCredentials:!0,headers:r.headers||{}}).then($a).catch(Xa)}}}(t,n),o=function(e,t){return{importAsync:yo(e,t)}}(t,n);this.name="vimeo",this.folders=ln(this,te.FOLDERS,r),this.items=ln(this,te.ITEMS,i),this.item=ln(this,te.ITEM,o)}function ts(e){return void 0===e&&(e={}),new Tr({...e,name:"visitors-uploads",sourceName:"visitorsUploads"})}const ns=nr?"pix.editorx.com":"pix.wix.com",rs={pictureApi:"https://"+ns+"/services/shutterstock",videoApi:"https://"+ns+"/services/shutterstock/video",pricesApi:"/_api/premium-store/v1/digital-goods-prices",itemsLimit:50};function is(e){e.data=e.data||{};const t=e.data;let n;return n=Array.isArray(t)?t[0].code||t[0]:t.code,e.data.message=n,Promise.reject(e)}function os(e){const[t,n,r,i]=(e||"").split("_"),o=as(t,[xn.Video,xn.Picture],xn.Picture);return{mediaType:o,orientation:o===xn.Picture?as(n,[Hr.Vertical,Hr.Horizontal],null):null,category:"any"===r?null:r,color:o===xn.Picture?i:null}}function as(e,t,n){return-1===t.indexOf(e)?n:e}function ss(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,a,s){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,a,s,u){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,a,s,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,a,s,u,c,l){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function us(e,t,n){return function(){for(var r=[],i=0,o=e,a=0;a<t.length||i<arguments.length;){var s;a<t.length&&(!ra(t[a])||i>=arguments.length)?s=t[a]:(s=arguments[i],i+=1),r[a]=s,ra(s)||(o-=1),a+=1}return o<=0?n.apply(this,r):ss(o,us(e,r,n))}}var cs=oa((function(e,t){return 1===e?ia(t):ss(e,us(e,[],t))}));function ls(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function ds(e,t,n){for(var r=0,i=n.length;r<i;){if(e(t,n[r]))return!0;r+=1}return!1}function ps(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var fs="function"==typeof Object.is?Object.is:function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},hs=Object.prototype.toString,ms=function(){return"[object Arguments]"===hs.call(arguments)?function(e){return"[object Arguments]"===hs.call(e)}:function(e){return ps("callee",e)}}(),gs=ms,vs=!{toString:null}.propertyIsEnumerable("toString"),ys=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],_s=function(){return arguments.propertyIsEnumerable("length")}(),bs=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},ws="function"!=typeof Object.keys||_s?ia((function(e){if(Object(e)!==e)return[];var t,n,r=[],i=_s&&gs(e);for(t in e)!ps(t,e)||i&&"length"===t||(r[r.length]=t);if(vs)for(n=ys.length-1;n>=0;)ps(t=ys[n],e)&&!bs(r,t)&&(r[r.length]=t),n-=1;return r})):ia((function(e){return Object(e)!==e?[]:Object.keys(e)})),Us=ws,Ts=ia((function(e){return null===e?"Null":void 0===e?"Undefined":Object.prototype.toString.call(e).slice(8,-1)}));function xs(e,t,n,r){var i=ls(e);function o(e,t){return ks(e,t,n.slice(),r.slice())}return!ds((function(e,t){return!ds(o,t,e)}),ls(t),i)}function ks(e,t,n,r){if(fs(e,t))return!0;var i,o,a=Ts(e);if(a!==Ts(t))return!1;if(null==e||null==t)return!1;if("function"==typeof e["fantasy-land/equals"]||"function"==typeof t["fantasy-land/equals"])return"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t)&&"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e);if("function"==typeof e.equals||"function"==typeof t.equals)return"function"==typeof e.equals&&e.equals(t)&&"function"==typeof t.equals&&t.equals(e);switch(a){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===(i=e.constructor,null==(o=String(i).match(/^function (\w*)/))?"":o[1]))return e===t;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof t||!fs(e.valueOf(),t.valueOf()))return!1;break;case"Date":if(!fs(e.valueOf(),t.valueOf()))return!1;break;case"Error":return e.name===t.name&&e.message===t.message;case"RegExp":if(e.source!==t.source||e.global!==t.global||e.ignoreCase!==t.ignoreCase||e.multiline!==t.multiline||e.sticky!==t.sticky||e.unicode!==t.unicode)return!1}for(var s=n.length-1;s>=0;){if(n[s]===e)return r[s]===t;s-=1}switch(a){case"Map":return e.size===t.size&&xs(e.entries(),t.entries(),n.concat([e]),r.concat([t]));case"Set":return e.size===t.size&&xs(e.values(),t.values(),n.concat([e]),r.concat([t]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var u=Us(e);if(u.length!==Us(t).length)return!1;var c=n.concat([e]),l=r.concat([t]);for(s=u.length-1;s>=0;){var d=u[s];if(!ps(d,t)||!ks(t[d],e[d],c,l))return!1;s-=1}return!0}var Ss=oa((function(e,t){return ks(e,t,[],[])}));function Es(e,t){return function(e,t,n){var r,i;if("function"==typeof e.indexOf)switch(typeof t){case"number":if(0===t){for(r=1/t;n<e.length;){if(0===(i=e[n])&&1/i===r)return n;n+=1}return-1}if(t!=t){for(;n<e.length;){if("number"==typeof(i=e[n])&&i!=i)return n;n+=1}return-1}return e.indexOf(t,n);case"string":case"boolean":case"function":case"undefined":return e.indexOf(t,n);case"object":if(null===t)return e.indexOf(t,n)}for(;n<e.length;){if(Ss(e[n],t))return n;n+=1}return-1}(t,e,0)>=0}function Ps(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}function Os(e){return'"'+e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var Is=function(e){return(e<10?"0":"")+e},As="function"==typeof Date.prototype.toISOString?function(e){return e.toISOString()}:function(e){return e.getUTCFullYear()+"-"+Is(e.getUTCMonth()+1)+"-"+Is(e.getUTCDate())+"T"+Is(e.getUTCHours())+":"+Is(e.getUTCMinutes())+":"+Is(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function Rs(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!ua(i)){for(var o=0;o<e.length;){if("function"==typeof i[e[o]])return i[e[o]].apply(i,r);o+=1}if(function(e){return null!=e&&"function"==typeof e["@@transducer/step"]}(i))return t.apply(null,r)(i)}return n.apply(this,arguments)}}var Ms=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var Cs=oa((function(e,t){return ss(e.length,(function(){return e.apply(t,arguments)}))})),js=Cs;function zs(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function Fs(e,t,n,r){return e["@@transducer/result"](n[r](js(e["@@transducer/step"],e),t))}var Ns="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function Ls(e,t,n){if("function"==typeof e&&(e=function(e){return new Ms(e)}(e)),ca(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return Fs(e,t,n,"fantasy-land/reduce");if(null!=n[Ns])return zs(e,t,n[Ns]());if("function"==typeof n.next)return zs(e,t,n);if("function"==typeof n.reduce)return Fs(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Ds=function(){return this.xf["@@transducer/init"]()},qs=function(e){return this.xf["@@transducer/result"](e)},Bs=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=Ds,e.prototype["@@transducer/result"]=qs,e.prototype["@@transducer/step"]=function(e,t){return this.f(t)?this.xf["@@transducer/step"](e,t):e},e}(),Vs=oa(Rs(["filter"],oa((function(e,t){return new Bs(e,t)})),(function(e,t){return n=t,"[object Object]"===Object.prototype.toString.call(n)?Ls((function(n,r){return e(t[r])&&(n[r]=t[r]),n}),{},Us(t)):function(e,t){for(var n=0,r=t.length,i=[];n<r;)e(t[n])&&(i[i.length]=t[n]),n+=1;return i}(e,t);var n}))),Hs=Vs,Ws=oa((function(e,t){return Hs((n=e,function(){return!n.apply(this,arguments)}),t);var n})),Gs=Ws;function Js(e,t){var n=function(n){var r=t.concat([e]);return Es(n,r)?"<Circular>":Js(n,r)},r=function(e,t){return Ps((function(t){return Os(t)+": "+n(e[t])}),t.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+Ps(n,e).join(", ")+"))";case"[object Array]":return"["+Ps(n,e).concat(r(e,Gs((function(e){return/^\d+$/.test(e)}),Us(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+n(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?n(NaN):Os(As(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+n(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+n(e.valueOf())+")":Os(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var i=e.toString();if("[object Object]"!==i)return i}return"{"+r(e,Us(e)).join(", ")+"}"}}var Ks=ia((function(e){return Js(e,[])})),Qs=oa((function(e,t){return cs(e+1,(function(){var n,r=arguments[e];if(null!=r&&(n=r[t],"[object Function]"===Object.prototype.toString.call(n)))return r[t].apply(r,Array.prototype.slice.call(arguments,0,e));throw new TypeError(Ks(r)+' does not have a method named "'+t+'"')}))})),Ys=Qs(0,"toLowerCase"),$s=oa((function(e,t){for(var n=t,r=0;r<e.length;){if(null==n)return;n=n[e[r]],r+=1}return n})),Xs=oa((function(e,t){return $s([e],t)}));const Zs={PICTURE:"31396262-3737-3438-2d31-3131312d3434",VIDEO:"32313337-3765-3164-2D66-6164332D3131"};function eu(e){if("image"===e.media_type){const t=_(e.mosaic_url),n=_(c(e,"assets.preview_1000.url"));return{id:e.id,name:e.description,source:"shutterStock",kind:dn.File,folderId:null,mediaType:xn.Picture,fileUrl:null,thumbnailUrl:t,previewUrl:n,createdAt:null,tags:[],fileInfo:{aspect:e.aspect},width:null,height:null}}const t=_(c(e,"assets.thumb_jpg.url")),n=_(c(e,"assets.preview_mp4.url"));return{id:e.id,name:e.description,source:"shutterStock",kind:dn.File,folderId:null,mediaType:xn.Video,fileUrl:null,thumbnailUrl:t,previewUrl:t,videoPreviewUrls:[n],createdAt:null,tags:c(e,"keywords",[]),fileInfo:{aspect:e.aspect},fileInput:{duration:1e3*e.duration},width:c(e,"assets.hd.width",null),height:c(e,"assets.hd.height",null)}}function tu(e){const t=e.data,n=t.total_count-t.page*t.per_page>0?t.page+1:null,r=t.per_page;return e.data=(t.data||[]).map((e=>({...eu(e),hasMoreItemsInThisCategory:null!==n}))),e.paging={cursor:n,size:r},e}function nu(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t={...rs,...e},n=new cn,r=G(),i=function(e,t){const n={size:50,cursor:null};return{list:function(r,i){void 0===i&&(i={});const o={...n,...i.paging},{mediaType:a}=os(r),s=a===xn.Picture?e.pictureApi:e.videoApi;return t.get(s+"/categories").then((e=>(e.data=[{id:"any",name:"All"},...e.data.data].map((e=>function(e,t){return{id:e.id,name:e.name,mediaType:t,parentId:null,filesCount:null,createdAt:null}}(e,a))),e.paging={size:o.size,cursor:null},e))).catch(is)}}}(t,r),o=function(e,t){const n=new ti;function r(r,i,o){if(void 0===o&&(o=null),(i=i||{}).paging=i.paging||{},i.sort=i.sort||{},n.isNextCallDataExists(i.paging,o,r))return n.getPromiseAndReset();const{mediaType:a,category:s,orientation:u,color:c}=os(r),l={per_page:i.paging.size||e.itemsLimit,page:i.paging.cursor||null,order:i.sort.field||null,category:s,orientation:u||null,color:c||null,language:i.language||null};e.country&&(l.country=e.country),null!==o&&(l.query=o);const d=a===xn.Picture?e.pictureApi+"/search":e.videoApi+"/search";return t.get(d,l,{headers:i.headers||{}}).then(tu).catch(is)}return{list:function(t,i){const o=r(t,i,null);return e.prefetchNextPage&&o.then((e=>{e.paging.cursor&&n.set(e.paging,r(t,{...i,paging:e.paging},null),null,t)})),o},search:function(t,i,o){const a=r(t,o,i);return e.prefetchNextPage&&a.then((e=>{e.paging.cursor&&n.set(e.paging,r(t,{...o,paging:e.paging},i),i,t)})),a},prices:function(n){void 0===n&&(n={});const r=[Zs.VIDEO,Zs.PICTURE],i=e.pricesApi;return t.get(i+"?"+r.map((e=>"skuIds="+e)).join("&"),{},{headers:n.headers||{}}).then(Xs("data")).then((e=>e.digitalGoodsPrices.reduce(((t,n)=>{return{...t,[(r=n.skuId,Ys(Object.keys(Zs).find((e=>Zs[e]===r))))]:{priceValue:n.priceValue,priceWithTax:n.priceWithTax,currencyCode:e.currencySettings.code,currencySymbol:e.currencySettings.symbol,...e.currencySettings,...e.taxSettings}};var r}),{})))}}}(t,r),a={get:function(e){const{mediaType:t}=os(e);return Promise.resolve({data:{id:e,kind:dn.Folder,source:"shutterStock",name:"Shutterstock",mediaType:t,filesCount:null,createdAt:null,parentId:null}})}};this.name="shutterstock",this.correlationId=n,this.folders=ln(this,te.FOLDERS,i),this.items=ln(this,te.ITEMS,o),this.folder=ln(this,te.FOLDER,a)}const ru={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/vimeo2",itemsLimit:50,thumbnailSizes:{thumbnail:{width:210,height:210,mode:"fill"},preview:{width:375,height:375,mode:"fit"}}};function iu(e,t){const n={id:(i=t.uri,Number(i.match(/\/videos\/(\d+)/i)[1])),name:U(t.name),description:U(t.description),link:_(t.link),iframeSrc:function(e){const t=e.match(/src="(.+?)"/i);return t?t[1]:""}(t.embed.html),embedHtml:t.embed.html,tags:(r=t.tags,null!==r&&r.length?r.reduce((function(e,t){return t&&e.push(t.tag),e}),[]):[]),width:Number(t.width)||0,height:Number(t.height)||0,createdAt:T(t.created_time),folderId:null,mediaType:xn.Video};var r,i;if(!t.pictures||!t.pictures.sizes)return n;const o=w(t.pictures.sizes.map((function(e){return{...e,url:e.link}})),e.thumbnailSizes);return{...n,...o}}function ou(e,t){let n=null,r=null;return t.data.paging&&t.data.paging.next&&(n=Number(t.data.paging.next.match(/&page=(\d+)/i)[1]),r=t.data.per_page),t.data=(t.data.data||[]).filter((function(e){return e&&e.embed&&e.embed.html})).map(d(iu,e)),t.paging={cursor:n,size:r},t}function au(e){return Promise.reject(e)}function su(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=G(),n=function(e,t){return{search:function(n,r,i){const o=i.thumbnailSizes?{thumbnailSizes:i.thumbnailSizes}:{},a={...e,...o};(i=i||{}).paging=i.paging||{};const s={query:r,per_page:i.paging.size||e.itemsLimit,page:i.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/search",s,{withCredentials:!1,headers:i.headers||{}}).then(d(ou,a)).catch(au)}}}({...ru,...e},t);this.name="vimeoSearch",this.items=ln(this,te.ITEMS,n)}const uu={apiUrl:nr?"https://pix.editorx.com":"https://pix.wix.com",apiPath:"/services/youtube",itemsLimit:50,thumbnailSizes:{thumbnail:{width:210,height:210,mode:"fill"},preview:{width:375,height:375,mode:"fit"}}};function cu(e,t){const n=t.snippet,r=t.id.videoId;const i=Object.keys(n.thumbnails).map((function(e){return n.thumbnails[e]})),o=w(i,e.thumbnailSizes);return{id:r,name:U(n.title),iframeSrc:function(e){return"//www.youtube.com/embed/"+e}(r),folderId:null,mediaType:xn.Video,...o}}function lu(e,t){let n=null,r=null;return t.data&&t.data.nextPageToken&&(n=t.data.nextPageToken,r=t.data.pageInfo.resultsPerPage),t.data=(t.data.items||[]).map(d(cu,e)),t.paging={cursor:n,size:r},t}function du(e){return Promise.reject(e)}function pu(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=function(e,t){return{search:function(n,r,i){const o=i.thumbnailSizes?{thumbnailSizes:i.thumbnailSizes}:{},a={...e,...o};(i=i||{}).paging=i.paging||{};const s={f:"ext",q:r,maxResults:i.paging.size||e.itemsLimit,pageToken:i.paging.cursor||null};return t.get(""+e.apiUrl+e.apiPath+"/search",s,{withCredentials:!1,headers:i.headers||{}}).then(d(lu,a)).catch(du)}}}({...uu,...e},G());this.name="youtubeSearch",this.items=ln(this,te.ITEMS,t)}var fu=function(){function e(e,t){this.xf=t,this.f=e,this.found=!1}return e.prototype["@@transducer/init"]=Ds,e.prototype["@@transducer/result"]=function(e){return this.found||(e=this.xf["@@transducer/step"](e,void 0)),this.xf["@@transducer/result"](e)},e.prototype["@@transducer/step"]=function(e,t){var n;return this.f(t)&&(this.found=!0,e=(n=this.xf["@@transducer/step"](e,t))&&n["@@transducer/reduced"]?n:{"@@transducer/value":n,"@@transducer/reduced":!0}),e},e}(),hu=oa(Rs(["find"],oa((function(e,t){return new fu(e,t)})),(function(e,t){for(var n=0,r=t.length;n<r;){if(e(t[n]))return t[n];n+=1}}))),mu=hu;function gu(e,t){return JSON.stringify({siteMediaToken:e,id:t})}function vu(e){return JSON.parse(e)}const yu="wix-video-library-link",_u=e=>({id:gu(e,yu),kind:dn.Folder,source:"wixSite",parentId:gu(e,pn.SiteFiles),name:"Video Library",createdAt:0,updatedAt:0,userId:null,tags:["_wix_video_library"]});function bu(e,t){const{siteMediaToken:n}=vu(t);return{...e,kind:dn.Folder,id:gu(n,e.id),source:"wixSite",parentId:gu(n,e.parentId)}}function wu(e){return{id:gu(e.site_token,pn.SiteFiles),kind:dn.Folder,source:"wixSite",parentId:"wix-sites",name:e.display_name||e.name,createdAt:e.created,updatedAt:e.updated,siteId:e.id,userId:e.user_id,tags:[]}}function Uu(e,t,n,r){const i={page_size:50,cursor:null},o=(n,r)=>(t.setRequestOptionsOnce({params:{site_token:null}}),t.get(e.apiUrl+"/go/folders",{media_type:r.mediaType},{cache:!1,headers:r.headers||{}}).then((e=>({...e,data:(e.data.folders||[]).map((e=>function(e){return{...e,kind:dn.Folder,name:e.folder_name,id:gu(null,e.folder_id),source:"wixSite",parentId:gu(null,null),tags:e.tags||[]}}(e)))}))).catch(hn)),a=t=>{const n=[...t],r=mu((t=>h(e.siteMediaToken,t.site_token)),n);return r?[r,...Hs((e=>e.site_token!==r.site_token),n)]:t};return{list:function(s,u){if(void 0===u&&(u={}),s===pn.WixSite)return(n=>{const r={...i,...(n=n||{}).paging};return e.namespace&&(r.ns=e.namespace),n.includeCurrentSite&&(r.includeCurrentSite=!0),t.get(e.apiUrl+"/site/media/user/sites",r,{cache:!1,headers:n.headers||{}}).then((e=>({...e,data:a(e.data.sites||[]).map(wu),paging:{cursor:e.data.cursor}}))).catch(hn)})(u);const{id:c,siteMediaToken:l}=vu(s);if(!c&&!l)return o(0,u);if(c===yu)return r.list(l,u);if(!l)return Promise.resolve({data:[]});const d=h(e.siteMediaToken,l);return n.list(c,{...u,siteMediaToken:l}).then((e=>c===pn.SiteFiles?r.exist(l).then((t=>[t,e])):Promise.resolve([!1,e]))).then((e=>{let[t,n]=e;return{...n,data:[...t?[_u(l)]:[],...d?[]:n.data.map((e=>bu(e,s)))]}}))},search:function(e,t,r){const{id:i,siteMediaToken:o}=vu(e);return o&&i!==yu?n.search(i,t,{...r,siteMediaToken:o}).then((t=>({...t,data:t.data.map((t=>bu(t,e)))}))):Promise.resolve({data:[]})}}}function Tu(e,t){const{siteMediaToken:n}=vu(t);return{...e,kind:dn.File,id:gu(n,e.id),folderId:t,source:"wixSite"}}function xu(e,t,n,r){const i={size:50,cursor:null},o={order:"date",direction:"desc"};function a(n,r,a,s){void 0===a&&(a={}),void 0===s&&(s={});const c={...o,...a.sort},l={...i,...a.paging},d={page_size:l.size,cursor:l.cursor,media_type:a.mediaType||xn.Picture};return d.order="desc"===c.direction?"-"+c.order:c.order,r&&(d.parent_folder_id=vu(r).id),t.setRequestOptionsOnce({params:{site_token:null}}),t.get(n,u(d,s),{headers:a.headers||{}}).then((function(t){return t.paging={size:l.size,cursor:t.data.cursor},{...t,data:(t.data.files||[]).map((t=>Tu(tr(t,e,a.thumbnails),r)))}})).catch(nn)}return{list:function(t,r){if(!t||"wix-sites"===t)return Promise.resolve({data:[]});const{id:i,siteMediaToken:o}=vu(t);if(!o)return function(t,n){return void 0===n&&(n={}),a(e.apiUrl+"/media/files/list",t,n)}(t,r);const s=h(e.topLevelMediaToken||e.siteMediaToken,o)&&i!==pn.Purchased;return n.list(i,{...r,siteMediaToken:o}).then((e=>({...e,data:[...s?[]:e.data.map((e=>Tu(e,t)))]})))},search:function(t,i,o){if(!t||"wix-sites"===t)return Promise.resolve({data:[]});const{id:s,siteMediaToken:u}=vu(t);return u?s===yu?r.search(s,i,{...o,siteMediaToken:u}):n.search(s,i,{...o,siteMediaToken:u}).then((e=>({...e,data:e.data.map((e=>Tu(e,t)))}))):function(t,n,r){return void 0===r&&(r={}),a(e.apiUrl+"/media/files/search",t,r,{query:n})}(t,i,o)},importToSite:function(e,t,r){void 0===t&&(t={}),void 0===r&&(r={});const i=vu(e.id);return n.copy([{...e,id:i.id}],t,{...r,isFromG6:Boolean(i.siteMediaToken)})}}}const ku=G();function Su(e){let t={},n=0;return function(r){return ku.catchError((function(){const e=(arguments[2]||{}).headers||{};return r.call(this,arguments[0],arguments[1]||{},{...arguments[2],headers:{...t,...e}})}),(function(r,i){return 403!==r.code||(new Date).valueOf()-n<1e4?Promise.reject(r):ku.post(e).then((function(e){return t=e.data.set_headers||{},n=(new Date).valueOf(),i()}))}))}}const Eu={id:gu(null,null),kind:dn.Folder,source:"wixSite",parentId:"wix-sites",name:"All My Files",createdAt:0,updatedAt:0,siteId:null,userId:null,tags:["_all-my-files-folder"]};var Pu=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=Ds,e.prototype["@@transducer/result"]=qs,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),Ou=oa(Rs(["fantasy-land/map","map"],oa((function(e,t){return new Pu(e,t)})),(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return cs(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return Ls((function(n,r){return n[r]=e(t[r]),n}),{},Us(t));default:return Ps(e,t)}}))),Iu=Ou;const Au=(e,t)=>({...e,kind:dn.File,mediaType:xn.Video,id:e.item_id,source:"wixVideo",name:e.title,thumbnailUrl:e.cover_url&&Yn(e.cover_url).replace("/file.jpg",""),fileSize:e.file_size,folderId:JSON.stringify({siteMediaToken:t,id:yu}),createdAt:Date.parse(e.created_at)});function Ru(e,t){const n={page_size:25,cursor:null};return{search:function(r,i,o){const{siteMediaToken:a}=o,s=e.apiUrl+"/v3/vod/gallery/search",u={query:i,...n,...o.paging};return u.page_size=Math.min(25,u.page_size),t.setRequestOptionsOnce({params:{site_token:a}}),t.get(s,u,{headers:o.headers||{}}).then((function(e){return e.paging={cursor:e.data.cursor},{...e,data:(e.data.items||[]).map((e=>Au(e,a)))}})).catch(nn)},list:function(r,i){const o=e.apiUrl+"/v3/vod/gallery/items",a={...n,...i.paging};return a.page_size=Math.min(25,a.page_size),t.setRequestOptionsOnce({params:{site_token:r}}),t.get(o,a,{headers:i.headers||{}}).then((function(e){return e.paging={cursor:e.data.cursor},{...e,data:(e.data.items||[]).map((e=>Au(e,r)))}})).catch(nn)},importToSite:function(n,r,i){void 0===i&&(i={});const o=e.apiUrl+"/v3/vod/files/import",{src_site_id:a,src_site_token:s}=i;return t.post(o,{siteToken:r,...a?{src_site_id:a}:{},...s?{src_site_token:s}:{},files:Iu((e=>({item_id:e.item_id,file_name:e.file_name,...e.code_source?{code_source:e.code_source}:{}})),n)}).then((t=>({...t,data:Iu((t=>tr(t,e)),t.data)})))},exist:function(n){const r=e.apiUrl+"/v3/vod/gallery/has/items";return t.get(r,{siteToken:n}).then((e=>e.data&&!0===e.data.has_items))}}}function Mu(e){if(void 0===e&&(e={}),!e.siteMediaToken)throw new Error("siteMediaToken param is missing");this.siteMediaToken=e.siteMediaToken;const t=u({requestOptions:{params:{site_token:e.siteMediaToken}}},ir,e),n=Su(t.refreshTokenUrl),r=t.requestOptions;c(r,"params.ns")&&(t.ns=r.params.ns);const i=G(r),o={get:n(i.get),post:n(i.post),upload:n(i.upload)},a=t.refreshTokenUrl?o:i,s=vn(t,i),l=dr(t,i),d=gn(t,i),p=Ru(t,a),f=Uu(t,a,s,p),h=xu(t,a,l,p),m=function(e,t,n){return{get:function(t){const{id:r,siteMediaToken:i}=vu(t);if(!i)return Promise.resolve({data:{}});const o={siteMediaToken:i};return e.namespace&&(o.ns=e.namespace),n.get(r,o).then((e=>({...e,data:bu(e.data,t)}))).catch(hn)}}}(t,0,d);this.name="wix-site",this.folders=ln(this,te.FOLDERS,f),this.items=ln(this,te.ITEMS,h),this.folder=ln(this,te.FOLDER,m)}function Cu(e){void 0===e&&(e={});const t=u(ir,e),n=Ru(t,G(t.requestOptions));this.name="wix-video",this.items=ln(this,te.ITEMS,n)}Mu.oldMediaManagerFolder=Eu;class ju{constructor(e){void 0===e&&(e=0),this._cache=new Map,this._keysKeeper=[],this._capacity=Math.max(e,0)}set(e,t){if(0===this._capacity)return;if(-1===this._keysKeeper.indexOf(e)){if(this._keysKeeper.push(e)>this._capacity){const e=this._keysKeeper.shift();this.delete(e)}}this._cache.set(e,t)}delete(e){this._cache.delete(e)}clear(){this._cache.clear(),this._keysKeeper.length=0}get(e){return this._cache.get(e)}has(e){return this._cache.has(e)}size(){return this._keysKeeper.length}}function zu(e){return{id:e.id,name:e.title||"",source:"unsplash",kind:dn.File,folderId:null,mediaType:xn.Picture,fileUrl:_(c(e,"urls.full")),thumbnailUrl:_(c(e,"urls.small")),previewUrl:_(c(e,"urls.regular")),createdAt:null,tags:e.tags,width:e.width,height:e.height,creator:c(e,"photographer.name"),creatorPicture:c(e,"photographer.profileImage"),creatorUrl:c(e,"photographer.portfolioUrl")}}const Fu={PreferredTopics:"PREFERRED_TOPICS"},Nu={Free:"FREE",Paid:"PAID",All:"ALL"},Lu={WixPublicMedia:"WIX_PUBLIC_MEDIA",Shutterstock:"SHUTTERSTOCK",Unsplash:"UNSPLASH"};function Du(e,t,n){const r=e.data;return e.data=(r.data||[]).map((e=>function(e,t,n){const{data:r,provider:i}=e;return i===Lu.WixPublicMedia?ni(r,t.publicMedia,n.publicMedia):i===Lu.Unsplash?zu(r):i===Lu.Shutterstock?eu(r):null}(e,t,n))),e.paging={cursor:r.nextCursor,size:e.data.length},e}function qu(e){return e.data=e.data||{},e.data.message=e.message,e.data.source="recommended",Promise.reject(e)}function Bu(e){return'"'+e+'" is required on Recommended source initialization!'}const Vu={apiUrl:nr?"https://www.editorx.com":"https://www.wix.com",recommendedPreferencesApiUrl:nr?"https://files.editorx.com":"https://files.wix.com",itemsLimit:50,itemsCacheCapacity:0,topicsListApiUrl:nr?"https://www.editorx.com":"https://www.wix.com",publicMedia:{filesUrl:"https://static.wixstatic.com",videoFilesUrl:"https://video.wixstatic.com",imageOperationsApi:Cn.Vanbrandt,thumbnailSizes:{thumbnail:{width:210,height:210,mode:"fill"},thumbnailFit:{width:210,height:210,mode:"fit"},preview:{width:375,height:375,mode:"fit"}}}};function Hu(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(e.metaSiteToken?{requestOptions:{headers:{Authorization:e.metaSiteToken}}}:{},Vu,e);!function(e){if(e.xsrfToken||console.warn(Bu("xsrfToken")),!e.siteMediaToken)throw new Error(Bu("siteMediaToken"))}(t);const n=new cn,r=G(t.requestOptions),i=function(e,t){const n=new ju(e.itemsCacheCapacity);return{list:function(r){const i=c(r=r||{},"paging",{}),o={basedOn:c(r,["basedOn"],Fu.PreferredTopics),pageSize:i.size||e.itemsLimit,language:c(r,["language"],"en"),siteToken:e.siteMediaToken,pricing:Nu.All,wixMediaRoots:"all",shutterstockMediaTypes:"all",unsplashMediaTypes:"images"};i.cursor&&(o.cursor=i.cursor);const a=r.cacheId+(i.cursor?":"+i.cursor:"");return r.wixMediaRoots&&r.wixMediaRoots.length?o.wixMediaRoots=r.wixMediaRoots.join(","):null===r.wixMediaRoots&&(o.wixMediaRoots=void 0),r.shutterstockMediaTypes&&r.shutterstockMediaTypes.length?o.shutterstockMediaTypes=r.shutterstockMediaTypes.join(","):null===r.shutterstockMediaTypes&&(o.shutterstockMediaTypes=void 0),r.unsplashMediaTypes&&r.unsplashMediaTypes.length?o.unsplashMediaTypes=r.unsplashMediaTypes.join(","):null===r.unsplashMediaTypes&&(o.unsplashMediaTypes=void 0),r.pricing&&(o.pricing=r.pricing),n.has(a)?Promise.resolve(n.get(a)):t.get(e.apiUrl+"/_api/media-explorer-server/v1/recommend",o,{withCredentials:!0,headers:{Accept:"application/json","x-xsrf-token":e.xsrfToken}}).then((t=>Du(t,{publicMedia:e.publicMedia},{publicMedia:r.thumbnails}))).then((e=>(n.set(a,e),e))).catch(qu)}}}(t,r),o=function(e,t){function n(e){if(!e.msid)throw new Error('"msid" is required on '+t+" method options!");var t}function r(t){return e.recommendedPreferencesApiUrl+"/_api/site-preferences/"+t}return{mediaCategories:function(i){n(i=i||{});const o={siteToken:e.siteMediaToken};return t.get(r(i.msid),o,{withCredentials:!0,headers:{"x-xsrf-token":e.xsrfToken}}).then((e=>({...e,data:c(e,"data.payload.mediaCategories",[])}))).catch(qu)},updateMediaCategories:function(i,o){n(o=o||{});const a={siteToken:e.siteMediaToken},s={mediaCategories:i};return t.put(r(o.msid),s,a,{withCredentials:!0,headers:{"x-xsrf-token":e.xsrfToken}}).then((e=>({...e,data:null}))).catch(qu)}}}(t,r),a=function(e,t){return{list:function(n){const r={locale:(n=n||{}).locale||"en"};return t.get(e.topicsListApiUrl+"/_api/recommended-topics-server/topics",r,{withCredentials:!0}).then((e=>({...e,data:c(e,"data",[])}))).catch(qu)}}}(t,r);this.name="recommended",this.correlationId=n,this.items=ln(this,te.ITEMS,i),this.preferences=ln(this,te.PREFERENCES,o),this.topics=ln(this,te.TOPICS,a)}const Wu={apiUrl:nr?"https://www.editorx.com":"https://www.wix.com",itemsLimit:30},Gu="unsplash";function Ju(e){e.data=e.data||{};const t=e.data;let n;return n=Array.isArray(t)?t[0].code||t[0]:t.code,e.data.message=n,Promise.reject(e)}function Ku(e){const{photos:t=[],limit:n,offset:r}=e.data,i=t.length===n?r+n:null;return e.data=t.map((e=>({...zu(e),hasMoreItemsInThisCategory:null!==i}))),e.paging={cursor:i,size:n},e}const Qu=[{id:"all",name:"any"},{id:"1065976",name:"wallpapers"},{id:"3330445",name:"textures-patterns"},{id:"3330448",name:"nature"},{id:"3356631",name:"current-events"},{id:"3348849",name:"architecture"},{id:"3348877",name:"business-work"},{id:"3330452",name:"animals"},{id:"3356570",name:"travel"},{id:"3356576",name:"fashion"},{id:"3330455",name:"food-drink"},{id:"3356581",name:"spirituality"},{id:"3356584",name:"experimental"},{id:"3356568",name:"people"},{id:"3356594",name:"health"},{id:"3330461",name:"arts-culture"}];function Yu(e){void 0===e&&(e={}),this.siteMediaToken=e.siteMediaToken;const t=u(e.metaSiteToken?{requestOptions:{headers:{Authorization:e.metaSiteToken}}}:{},Wu,e),n=new cn,r=G(t.requestOptions),i=function(e,t){const n=new ti;function r(r,i,o){if(void 0===o&&(o=null),(i=i||{}).paging=i.paging||{},i.sort=i.sort||{},n.isNextCallDataExists(i.paging,o,r))return n.getPromiseAndReset();const{category:a,orientation:s}=function(e){const[t,n]=(e||"").split("_");return{orientation:t,category:"all"===n?null:n}}(r),u={limit:i.paging.size||e.itemsLimit,offset:i.paging.cursor||0,...s&&s!==Hr.All?{orientation:s}:{},...a&&"all"!==a?{category:a}:{}};e.language&&(u.lang=e.language),null!==o&&(u.query=o);const c=e.apiUrl+"/_api/media-unsplash-service-server/v1/unsplash/photos"+(o?"/search":"");return t.get(c,u,{withCredentials:!0,headers:i.headers||{}}).then(Ku).catch(Ju)}return{list:function(t,i){const o=r(t,i,null);return e.prefetchNextPage&&o.then((e=>{e.paging.cursor&&n.set(e.paging,r(t,{...i,paging:e.paging},null),null,t)})),o},search:function(t,i,o){const a=r(t,o,i);return e.prefetchNextPage&&a.then((e=>{e.paging.cursor&&n.set(e.paging,r(t,{...o,paging:e.paging},i),i,t)})),a},importToSite:function(n){const r=e.apiUrl+"/_api/media-unsplash-service-server/v1/unsplash/photos/"+n+"/import";return t.post(r,null,null,{withCredentials:!0}).then((e=>{const{data:{photoInfo:t}}=e;return{...t,id:t.fileName,kind:dn.File,source:Gu,name:""}}))}}}(t,r),o={list:function(){return Promise.resolve({data:Qu.map((e=>{return t=e,n=xn.Picture,{id:t.id,name:t.name,mediaType:n,parentId:null,filesCount:null,createdAt:null};var t,n}))})}};this.name=Gu,this.correlationId=n,this.items=ln(this,te.ITEMS,i),this.folders=ln(this,te.FOLDERS,o)}}(),r}()}));
//# sourceMappingURL=media-manager-sdk.min.js.map