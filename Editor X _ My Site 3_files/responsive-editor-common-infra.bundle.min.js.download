!function(){var e={382:function(e,t,r){"use strict";r.d(t,{P$0:function(){return s},PZ4:function(){return n},hdS:function(){return i},tSk:function(){return o},zgI:function(){return a}});var n=function(e){return{evid:90,src:110,endpoint:"editor-x",params:e}},o=function(e){return{evid:7,src:110,endpoint:"editor-x",params:e}},a=function(e){return{evid:990,src:110,endpoint:"editor-x",params:e}},i=function(e){return{evid:11,src:110,endpoint:"editor-x",params:e}},s=function(e){return{evid:91,src:110,endpoint:"editor-x",params:e}}},159:function(e,t,r){"use strict";r.d(t,{T:function(){return _}});var n=r(170);const o={name:"Mouse API",layer:"REPLUGGABLE",public:!0},a={name:"Panels API",layer:"REPLUGGABLE",public:!0},i={name:"Pages API",layer:"DATA_SERVICE",public:!0};var s=r(817),c=r(989);const u={name:"COMPONENT_RESIZE_FLOWS_BUILDER_API",public:!0,layer:"FLOWS"},l={name:"COMPONENT_DRAG_FLOWS_BUILDER_API",public:!0,layer:"FLOWS"};var d=r(611),p=r.n(d);const g={name:"Preview Runtime API",layer:"SITE",public:!0},f={name:"Scrolled Components Derivative State API",layer:"DERIVATIVE_STATE",public:!0},m={name:"Preview Display API",layer:"DATA_SERVICE",public:!0};var h=r(213),y=r.n(h);const v=e=>{const t=e.getAPI(o),r=e.getAPI(f);return{scrollFpsMeasurementStrategy:new class{constructor(){y()(this,"currScroll",{x:0,y:0}),y()(this,"lastScroll",{x:0,y:0})}onMeasureStart(){this.lastScroll=r.getSiteScroll()}wasMovementRecorded(){return this.currScroll=r.getSiteScroll(),this.currScroll.x!==this.lastScroll.x||this.currScroll.y!==this.lastScroll.y}updateLastMovement(){this.lastScroll=this.currScroll}onMeasureEnd(){}},mouseMoveFpsMeasurementStrategy:new class{constructor(){y()(this,"mouseMoveTracker",0),y()(this,"lastRecordedMouseMove",0),y()(this,"callbackId",void 0)}onMeasureStart(){this.mouseMoveTracker=0,this.lastRecordedMouseMove=0,this.callbackId=t.addEventListener("mousemove",(()=>++this.mouseMoveTracker))}wasMovementRecorded(){return this.lastRecordedMouseMove!==this.mouseMoveTracker}updateLastMovement(){this.lastRecordedMouseMove=this.mouseMoveTracker}onMeasureEnd(){this.callbackId&&(t.removeEventListener("mousemove",this.callbackId),this.callbackId=void 0),this.mouseMoveTracker=0,this.lastRecordedMouseMove=0}}}};var P=r(382);const I=e=>{const t=e.getAPI(i),r=e.getAPI(c.ny),n=new Set([t.getCurrentPageId(),t.getFocusedPageId()]);let o=0;return n.forEach((e=>{o+=r.components.getAllComponents(e).length})),o},E=e=>p().values(e.getAPI(a).getOpenedPanels()),w={name:"FPS_MEASUREMENT",layer:"UI",getDependencyAPIs(){return[o,i,a,s.ts,c.ny,u,l,g,f,m]},extend(e){const t=e.getAPI(o),r=e.getAPI(c.ny),n=e.getAPI(l),a=e.getAPI(u),i=e.getAPI(g);let d=!1;const f={scroll:Date.now()-36e5,drag:Date.now()-36e5,resize:Date.now()-36e5};let h,y,w,S,A=0,b=0;const{scrollFpsMeasurementStrategy:T,mouseMoveFpsMeasurementStrategy:M}=v(e),x={drag:M,resize:M,scroll:T},D=()=>{A++,y=void 0,w=void 0,b=0,h&&(t.removeEventListener("mousemove",h),h=void 0)},_=e=>{window.requestAnimationFrame((()=>{if(e===A){const t=performance.now();S.wasMovementRecorded()?(w&&window.diffs.push(t-w),S.updateLastMovement(),w=t):(w&&window.diffs.push(t-w),w=void 0),_(e)}}))},O=e=>{Date.now()-f[e]<3e5||d||(d=!0,f[e]=Date.now(),D(),window.diffs=[],y=e,w=performance.now(),h=t.addEventListener("mousemove",(()=>++b)),S=x[e],S.onMeasureStart(),_(A))},C=(t,r,n)=>{d&&n===y&&(d=!1,S.onMeasureEnd(),D(),!window.diffs||window.diffs.length<4||(((e,t,r,n,o)=>{const a=e.getAPI(m),i=e.getAPI(g),c=e.getAPI(s.ts),u=a.isPreviewMode()?"preview":"edit",l=Math.floor(i.getSiteMeasuredHeight()),d=o.map((e=>e<10?10:e>65?65:e)).map((e=>Math.floor(1e3/e))).sort(((e,t)=>e-t));c.report((0,P.PZ4)({action:n,componentType:r,componentCount:t,fpsAverage:Math.floor(p().sum(d)/d.length),fpsPercentile25:d[Math.floor(o.length/4)],fpsPercentile50:d[Math.floor(o.length/2)],fpsPercentile75:d[Math.floor(o.length/4*3)],fpsPercentile95:d[Math.floor(o.length/100*95)],origin:u,pageSize:l,isMultiSelect:t>1,pageComponentCount:I(e),panelState:JSON.stringify(E(e))}))})(e,t,r,n,window.diffs),window.diffs=[]))};n.contributeOnDragStart(e,(()=>O("drag"))),a.contributeOnResizeStart(e,(()=>O("resize"))),n.contributeOnDragEnd(e,{beforeCommit:e=>C(e.data.draggedPeers.length+1,0===e.data.draggedPeers.length?r.components.getType(e.data.draggedComponent.compRef):void 0,"drag")}),a.contributeOnResizeEnd(e,(e=>{(e=>{var t;return!!(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.hasOwnProperty("resizedComponent"))})(e)?C(1,r.components.getType(e.data.resizedComponent.ref),"resize"):(e=>{var t;return!!(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.hasOwnProperty("resizedComponents"))})(e)&&C(e.data.resizedComponents.length,void 0,"resize")})),i.contributeScrollExtension(e,{onScrollStart:()=>O("scroll"),onScrollEnd:()=>C(0,void 0,"scroll")})}};var S=r(749);function A(e){const t=function(){const e=()=>{const e=window.performance.memory;return{totalJSHeapSize:e.totalJSHeapSize,usedJSHeapSize:e.usedJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit}};let t={},r={},n=e(),o=0;const a=()=>{t={},r={},n=e(),o=0},i=(e,t,r,n)=>{const o=e[t];o?(o.occurrences++,o.totalDurationMs+=Math.round(r),o.errorCount+=n?1:0):e[t]={id:t,occurrences:1,totalDurationMs:Math.round(r),errorCount:n?1:0}},s=()=>({apis:t,interactions:r,memory:{start:n,end:e()},consoleErrorCount:o}),c=()=>{const e=s();return a(),e},u={addApi(e,r,n){i(t,e,r,n)},addInteraction(e,t,n){i(r,e,t,n)},addConsoleError(){o++},peekReport:s,takeReport:c};return u}();window.longMetrics=function(e){const t=e=>`longMetricReport_${e}`;return{peekReport:e.peekReport,takeReport:e.takeReport,saveReport:r=>{const n=t(r),o=e.peekReport();localStorage.setItem(n,JSON.stringify(o,null,2))},getSavedReport:e=>{const r=t(e),n=localStorage.getItem(r);return n?JSON.parse(n):void 0}}}(t),e.log=function(e){const t=(t,r,n)=>{const o=performance.now();return{end(a,i,s){const c=performance.now()-o;r?e.addInteraction(t,c,i):(null==n?void 0:n.$api)&&e.addApi(n.$api,c,i)}}};return{type:"long-running-test-metrics-logger",log(){},spanChild(e,r){return t(e,!1,r)},spanRoot(e,r){return t(e,!0,r)}}}(t);const r={};window.fedopsLogger.interactionStarted=e=>(r[e]=performance.now(),{timeoutId:0}),window.fedopsLogger.interactionEnded=e=>{t.addInteraction(e,performance.now()-r[e])};const n=console.error;console.error=(...e)=>{t.addConsoleError(),n(e)}}const b={name:"LONG_RUNNING_TEST_METRICS",layer:"SITE",getDependencyAPIs:()=>[S.G],extend:e=>{e.getAPI(S.G).getUrlParams().has("isQALongRun")&&A(window.repluggableAppDebug.host)}},T={name:"PLATFORM_DATA_SERVICE_API",public:!0,layer:"DATA_SERVICE"},M={name:"Component Interaction API",layer:"DATA_SERVICE",public:!0},x={name:"Pages Flows Contribution API",layer:"FLOWS",public:!0},D={name:"PAGE_NAVIGATION_MEASUREMENT",layer:"UI",getDependencyAPIs(){return[i,a,s.ts,c.ny,T,M,x]},extend(e){const t=e.getAPI(i),r=e.getAPI(s.ts),n=e.getAPI(c.ny),o=e.getAPI(T),a=e.getAPI(M),u=e.getAPI(x);let l=!1,d=Date.now()-36e5,p="",g="",f=Date.now(),m="",h=0;u.contributeGoToPageCallbacks(e,{onBeforeGoToPage:function(){Date.now()-d<3e5||(l=!0,d=Date.now(),p=t.getCurrentPageId(),g=JSON.stringify(E(e)),h=I(e),m=a.getSelected().map((e=>n.components.getType(e))).filter((e=>!!e)).sort().join("|"),f=Date.now())},onAfterGoToPage:function(){if(!l)return;l=!1;const n=Date.now()-f,a=t.getCurrentPageId(),i=JSON.stringify(E(e)),s=I(e),c=t.getPageData(a),u=null==c?void 0:c.managingAppDefId,d=null==c?void 0:c.tpaPageId,y=t.getAllPages().length,v=o.getInstalledApps().map((e=>e.appDefinitionName)).filter((e=>!!e)).sort().join("|");r.report((0,P.hdS)({sourcePageId:p,sourcePanelState:g,sourcePageComponentCount:h,targetPageId:a,targetPanelState:i,targetPageComponentCount:s,selectedComponentTypes:m,navigationTime:n,pagesCount:y,installedApps:v,managingAppDefId:u,targetTpaPageId:d}))}})}};e=r.hmd(e);const _=(0,n.hot)(e,[D,w,b,(()=>{let e;return{name:"MEMORY_SNAPSHOT",layer:"UI",getDependencyAPIs(){return[s.ts,i,c.ny,a]},extend(t){var r;const n=t.getAPI(s.ts);null!=(r=window.performance)&&r.memory&&(e=setInterval((()=>{var e;const r=null==(e=window.performance)?void 0:e.memory;n.report((0,P.tSk)({totalJsHeapSize:""+r.totalJSHeapSize,usedJsHeapSize:""+r.usedJSHeapSize,sessionTime:Math.round(window.performance.now()),panelState:JSON.stringify(E(t)),pageComponentCount:I(t)}))}),18e4))},detach(){e&&clearInterval(e)}}})()])},328:function(e,t,r){"use strict";r.d(t,{f:function(){return i}});var n=r(170);const o={name:"Local Data API",layer:"SITE",public:!0};const a={name:"local-data-entry-point",layer:"SITE",declareAPIs(){return[o]},attach(e){e.contributeAPI(o,(()=>({get:function(e,t){try{const t=localStorage.getItem(e);if(t){const e=JSON.parse(t);if(e)return e}}catch(e){return t()}return t()},set:(e,t,r)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){r()}},hasStoredData:e=>{try{return null!==localStorage.getItem(e)}catch(e){return!1}}})))}};e=r.hmd(e);const i=(0,n.hot)(e,[a])},544:function(e,t,r){"use strict";r.d(t,{n:function(){return p}});var n=r(170),o=r(653),a=r(382),i=r(817);const s={name:"no_experiments_check_entry_point",getDependencyAPIs(){return[o.Q,i.ts]},layer:"SITE",extend:e=>{const t=e.getAPI(o.Q),r=e.getAPI(i.ts),n=t.enabled("specs.responsive-editor.test_no_experiments"),s=Object.keys(t.all()).length;!n&&s<10&&r.report((0,a.zgI)({}))}};var c=wixExperiments,u=r.n(c);function l(){const e=new URLSearchParams(window.location.search),t=(decodeURIComponent(e.get("experiments")||"").split(",")||[]).reduce(((e,t)=>(t&&(e[t]="true"),e)),{}),r=(decodeURIComponent(e.get("experimentsoff")||"").split(",")||[]).reduce(((e,t)=>(t&&(e[t]="false"),e)),{}),n=(e.get("petri_ovr")||"").split(";").reduce(((e,t)=>{const[r,n]=t.split(":");return r&&(e[r]=n),e}),{}),o=(document.cookie||"").split(";").map((e=>e.trim())).filter((e=>e.startsWith("petri_ovr"))).map((e=>e.split("=")[1].split("|").reduce(((e,t)=>{const[r,n]=t.split("#");return r&&(e[r]=n),e}),{}))).reduce(((e,t)=>({...e,...t})),{}),a=new(u());return a.add(r),a.add(t),a.add(n),a.add(o),a.add(window.automationExperiments),function(e){var t,r,n;const o=new(u());if(null!=(t=window.editorModel)&&t.runningExperiments){var a;o.add(null==(a=window.editorModel)?void 0:a.runningExperiments),Object.assign(window.editorModel.runningExperiments,e.all())}if(null!=(r=window.responsiveEditorModel)&&r.experiments){var i;o.add(null==(i=window.responsiveEditorModel)?void 0:i.experiments),Object.assign(window.responsiveEditorModel.experiments,e.all())}o.add(e.all()),null==(n=window.responsiveEditorModel.errorHandling)||n.setExtras({responsiveEditorExperiments:o.all()});const s=e=>o.get(e),c=["true","new"];return{enabled(e){const t=s(e);return!!t&&c.includes(t)},add(e,t){o.add({[e]:t})},fetchExperimentsForScope:async e=>{const t=new(u());return await t.load(e),t.all()},getValue:s,all(){return o.all()}}}(a)}e=r.hmd(e);const d={name:"EXPERIMENTS_API",layer:"SITE",declareAPIs(){return[o.Q]},attach(e){e.contributeAPI(o.Q,(()=>l()))}},p=(0,n.hot)(e,[d,s])},481:function(e,t,r){"use strict";r.d(t,{j:function(){return c}});var n=r(170);const o={name:"Headless Host API",layer:"SITE",public:!0};var a=r(611),i=r.n(a);function s(e){return{createHeadlessContext(t){let{provide:r,consume:o}=t;const a=r||[],s=()=>{const t=a.map((e=>(e=>{let{key:t,factory:r}=e;return{name:"injected API > "+t.name,layer:t.layer,declareAPIs:()=>[t],attach(e){e.contributeAPI(t,(()=>r(e)))}}})(e))),s=(t=>{const o=(e=>{const t=new Map;return i().forEach(e,(e=>{i().forEach((null==e||null==e.declareAPIs?void 0:e.declareAPIs())||[],(r=>{t.set(r.name,e)}))})),t})(e.getAPI(n.AppHostAPI).getAllEntryPoints()),a=[],s=(null==r?void 0:r.map((e=>{let{key:t}=e;return t.name})))||[],c=[...t];for(;c.length;){const e=c.shift();if(!e||s.includes(e.name))continue;s.push(e.name);const t=o.get(e.name);t&&a.push(t),c.push(...(null==t||null==t.getDependencyAPIs?void 0:t.getDependencyAPIs())||[])}return i().uniqBy(a,"name")})(o||[]);return(0,n.createAppHost)([...t,...s],e.getAPI(n.AppHostAPI).getAppHostOptions())};return{runLambda:e=>(async(e,t,r)=>{const n=t(),o=await e();return r(n),o})((()=>{const t=s();return e(t)}),(()=>({repluggableAppDebug:window.repluggableAppDebug})),(e=>{let{repluggableAppDebug:t}=e;window.repluggableAppDebug=t}))}}}}e=r.hmd(e);const c=(0,n.hot)(e,[{name:"HEADLESS_HOST",layer:"SITE",getDependencyAPIs(){return[n.AppHostAPI]},declareAPIs(){return[o]},attach(e){e.contributeAPI(o,(()=>s(e)))}}])},571:function(e,t,r){"use strict";r.d(t,{j:function(){return g}});var n=r(170),o=r(535),a=r(706),i=r(653),s=r(749),c=r(989);const u={name:"Ping API",layer:"SITE",public:!0};var l=r(611),d=r.n(l);const p=location.origin+"/_serverless/editorx-comments/notify";e=r.hmd(e);const g=(0,n.hot)(e,[{name:"ping-entry-point",layer:"SITE",getDependencyAPIs(){return[o.T,a.P,i.Q,s.G,c.ny]},declareAPIs(){return[u]},attach(e){e.contributeAPI(u,(()=>function(e){const t=e.getAPI(i.Q),r=e.getAPI(a.P),n=e.getAPI(o.T),u=e.getAPI(s.G),l=e.getAPI(c.ny);return{notify:async e=>{const o=u.getMetasiteId(),{userId:a}=l.generalInfo.getUserInfo(),{extraArguments:i,userIds:s,templateId:c,url:g,discussionId:f}=e,m={templateId:c,toWixUsers:{userIds:s},placeholders:d().mapValues(i,(e=>({text:e||""}))),topic:"root."+(h={site:o,discussionId:f,userId:a},Object.entries(h).filter((e=>{let[t,r]=e;return r})).map((e=>{let[t,r]=e;return t+"="+r})).join(".")),actionTarget:{url:g}};var h;if(!t.enabled("specs.responsive-editor.HttpClient2"))return n.postWithAuth(p,m);await r.request({method:"POST",url:p,data:m})}}}(e)))}}])},669:function(e,t,r){"use strict";r.d(t,{WZ:function(){return L}});var n=r(170),o=r(15),a=r(749);const i={name:"Save And Publish API",layer:"DATA_SERVICE",public:!0};var s=r(817),c=r(706);const u={name:"User Preferences API",layer:"DATA_SERVICE",public:!0},l=()=>{let e=!1;const t=[],r=()=>{if(!e){const n=t.shift();n&&(e=!0,n().finally((()=>{e=!1,r()})))}};return{addToQueue:e=>{t.push(e),r()}}},d=e=>"object"==typeof e,p="/_api/wix-user-preferences-webapp/",g=e=>"object"==typeof e&&d(e.global_preferences),f=e=>{const{request:t}=e.getAPI(o.D),r=l(),n=l(),a=(e,r,n)=>new Promise(((o,a)=>{e.addToQueue((()=>(async(e,r)=>(await t({method:"POST",url:e,data:r})).data)(r,n).then(o).catch(a)))}));return{loadGlobalData:async()=>(await t({method:"GET",url:p+"getVolatilePrefForKey/htmlEditor/global_preferences"},{predicate:g,typeName:"GlobalPreferencesResponse"})).data.global_preferences,loadSiteData:async e=>(await t({method:"GET",url:p+"getVolatilePrefsForSite/htmlEditor/"+e},d)).data,saveGlobalData:e=>a(n,p+"set",{nameSpace:"htmlEditor",key:"global_preferences",blob:e}),saveSiteData:(e,t)=>{const n=p+"bulkSet",o={nameSpace:"htmlEditor",siteId:e,data:{...t,version:3..toString()}};return a(r,n,o)}}},m={name:"Preferences Adapter Private API",layer:"DATA_SERVICE",public:!1};var h=r(611),y=r.n(h);const v="preference/set_bulk",P="preference/set",I="preference/load",E="preference/stop",w=(e,t)=>({type:v,preferenceType:e,data:t}),S=(e,t,r)=>({type:P,preferenceType:e,key:t,value:r}),A=e=>({type:I,status:e}),b=()=>({type:E}),T={global:{},site:{},session:{},loading:"not_started",disableSave:!1},M=(e,t)=>e+"_"+t;const x={name:"UserPreferences Callbacks Slot"},D=e=>{const t=e.declareSlot(x),r=e.getStore(),n=e.getAPI(i),o=e.getAPI(s.pE),u=e.getAPI(c.P),l=e.getAPI(m),d=()=>e.getAPI(a.G).getDocumentId(),p=async()=>{o.interactionStarted("user_preferences_load_global_data");try{const e=await l.loadGlobalData();return e&&r.dispatch(w("global",e)),o.interactionEnded("user_preferences_load_global_data"),!0}catch(t){if(e.log.error("User Preference: Load GlobalData failed",t),f(t))return o.interactionEnded("user_preferences_load_global_data"),!0}return!1},g=async()=>{o.interactionStarted("user_preferences_load_site_data");try{const e=await l.loadSiteData(d());return r.dispatch(w("site",e)),o.interactionEnded("user_preferences_load_site_data"),!0}catch(t){if(e.log.error("User Preference: Load SiteData failed",t),f(t))return o.interactionEnded("user_preferences_load_site_data"),!0}return!1},f=e=>{var t;return u.isErrorOfType(e,"NotFoundError")&&3001===(null==(t=e.extraData)?void 0:t.errorCode)},h=async t=>{try{if(P.isSaveDisabled()||"session"===t)return;const e=P.getAll(t);"global"===t?await l.saveGlobalData(e):"site"===t&&await l.saveSiteData(d(),e)}catch(n){e.log.error("User Preference: Save "+t+" Preferences failed",n),413===n.status&&r.dispatch(b())}},v=()=>(r.dispatch(A("pending")),new Promise((async o=>{const a=await Promise.all([p(),n.isFirstSave()?Promise.resolve(!0):g()]),i=y().every(a);i||(r.dispatch(b()),e.log.error("FetchPreferences Failed",void 0,{globalData:a[0],siteDate:a[1]})),r.dispatch(A(i?"success":"error")),(()=>{const e=P.getLoadingState();t.getItems().forEach((t=>t.contribution("success"===e))),t.discardBy((()=>!0))})(),o()}))),P=(I=()=>r.getState().preferences,{getAll:e=>I()[e],get:function(e,t,r){return void 0===r&&(r="def"),I()[e][M(r,t)]},getLoadingState:()=>I().loading,isSaveDisabled:()=>I().disableSave});var I;let E;const T=async()=>("not_started"===P.getLoadingState()&&(E=v()),E);return{getLoadingState:()=>P.getLoadingState(),load:async()=>T(),getAll:async e=>(await T(),P.getAll(e)),get:async(e,t,r)=>(await T(),P.get(e,t,r)),set:async function(e,t,n,o){void 0===o&&(o="def"),await T();const a=M(o,t);return r.dispatch(S(e,a,n)),h(e)},setScope:async(e,t,n)=>(await T(),y().forEach(n,((n,o)=>r.dispatch(S(e,M(t,o),n)))),h(e)),onLoad:(e,r)=>{const n=P.getLoadingState();"not_started"===n||"pending"===n?t.contribute(e,r):r("success"===P.getLoadingState())}}},_=function(e,t){switch(void 0===e&&(e=T),t.type){case v:return{...e,[t.preferenceType]:t.data};case P:const{preferenceType:r,key:n,value:o}=t;return{...e,[r]:{...e[r],[n]:o}};case I:return{...e,loading:t.status};case E:return{...e,disableSave:!0};default:return e}};e=r.hmd(e);const O={name:"PREFERENCES_ADAPTER_API",layer:"DATA_SERVICE",getDependencyAPIs(){return[o.D]},declareAPIs(){return[m]},attach(e){e.contributeAPI(m,(()=>f(e)))}},C={name:"USER_PREFERENCES_API",layer:"DATA_SERVICE",getDependencyAPIs(){return[m,a.G,i,s.pE,c.P]},declareAPIs(){return[u]},attach(e){e.contributeState((()=>({preferences:_}))),e.contributeAPI(u,(()=>D(e)))}},R={name:"USER_PREFERENCES_LOADER",layer:"DATA_SERVICE",getDependencyAPIs(){return[u]},async extend(e){await e.getAPI(u).load()}},L=(0,n.hot)(e,[O,C,R])},461:function(e,t,r){"use strict";r.d(t,{v:function(){return D}});var n=r(170),o=r(611),a=r.n(o),i=r(382);const s={name:"Page Lifecycle State API",layer:"SITE",public:!0};var c=r(653),u=r(817);const l={name:"Page Lifecycle BI Entry Point",layer:"SITE",getDependencyAPIs(){return[s,c.Q,u.ts]},extend(e){const t=e.getAPI(c.Q),r=e.getAPI(u.ts),n=e.getAPI(s),o=[{oldState:"hidden",newState:"terminated"},{oldState:"hidden",newState:"frozen"},{oldState:"passive",newState:"hidden"},{oldState:"hidden",newState:"passive"}];t.enabled("specs.responsive-editor.PageLifecycleBI")&&n.subscribeOnStateChange(e,(e=>{if(o.some((t=>a().isEqual(t,e)))){const{oldState:t,newState:n}=e;r.report((0,i.P$0)({currentValue:n,previousValue:t}),"terminated"===n||"frozen"===n)}}))}};
/*!
 Copyright 2018 Google Inc. All Rights Reserved.
 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
/*! lifecycle.mjs v0.1.1 */
let d;try{new EventTarget,d=!0}catch(e){d=!1}var p=d?EventTarget:class{constructor(){this.e={}}addEventListener(e,t,r=!1){this.t(e).push(t)}removeEventListener(e,t,r=!1){const n=this.t(e),o=n.indexOf(t);o>-1&&n.splice(o,1)}dispatchEvent(e){return e.target=this,Object.freeze(e),this.t(e.type).forEach((t=>t(e))),!0}t(e){return this.e[e]=this.e[e]||[]}};var g=d?Event:class{constructor(e){this.type=e}};class f extends g{constructor(e,t){super(e),this.newState=t.newState,this.oldState=t.oldState,this.originalEvent=t.originalEvent}}const m="active",h="passive",y="hidden",v="frozen",P="terminated",I="object"==typeof safari&&safari.pushNotification,E=["focus","blur","visibilitychange","freeze","resume","pageshow","onpageshow"in self?"pagehide":"unload"],w=e=>(e.preventDefault(),e.returnValue="Are you sure?"),S=[[m,h,y,P],[m,h,y,v],[y,h,m],[v,y],[v,m],[v,h]].map((e=>e.reduce(((e,t,r)=>(e[t]=r,e)),{}))),A=()=>document.visibilityState===y?y:document.hasFocus()?m:h;var b=new class extends p{constructor(){super();const e=A();this.s=e,this.i=[],this.a=this.a.bind(this),E.forEach((e=>addEventListener(e,this.a,!0))),I&&addEventListener("beforeunload",(e=>{this.n=setTimeout((()=>{e.defaultPrevented||e.returnValue.length>0||this.r(e,y)}),0)}))}get state(){return this.s}get pageWasDiscarded(){return document.wasDiscarded||!1}addUnsavedChanges(e){!this.i.indexOf(e)>-1&&(0===this.i.length&&addEventListener("beforeunload",w),this.i.push(e))}removeUnsavedChanges(e){const t=this.i.indexOf(e);t>-1&&(this.i.splice(t,1),0===this.i.length&&removeEventListener("beforeunload",w))}r(e,t){if(t!==this.s){const r=((e,t)=>{for(let r,n=0;r=S[n];++n){const n=r[e],o=r[t];if(n>=0&&o>=0&&o>n)return Object.keys(r).slice(n,o+1)}return[]})(this.s,t);for(let t=0;t<r.length-1;++t){const n=r[t],o=r[t+1];this.s=o,this.dispatchEvent(new f("statechange",{oldState:n,newState:o,originalEvent:e}))}}}a(e){switch(I&&clearTimeout(this.n),e.type){case"pageshow":case"resume":this.r(e,A());break;case"focus":this.r(e,m);break;case"blur":this.s===m&&this.r(e,A());break;case"pagehide":case"unload":this.r(e,e.persisted?v:P);break;case"visibilitychange":this.s!==v&&this.s!==P&&this.r(e,A());break;case"freeze":this.r(e,v)}}},T=b;const M=e=>{const t=T,r=e.declareSlot({name:"Lifecycle State Change Callback Slot"}),n=e=>{const t=(e=>a().pick(e,["newState","oldState"]))(e);r.getItems().forEach((e=>{let{contribution:r}=e;return r(t)}))};return{subscribeOnStateChange:(e,t)=>r.contribute(e,t),getState:()=>t.state,init:()=>{t.addEventListener("statechange",n)}}},x={name:"Page Lifecycle State Entry Point",layer:"SITE",declareAPIs(){return[s]},getDependencyAPIs(){return[c.Q]},attach(e){e.contributeAPI(s,(()=>M(e)))},extend(e){const t=e.getAPI(c.Q),r=e.getAPI(s);t.enabled("specs.responsive-editor.PageLifecycleBI")&&r.init()}};e=r.hmd(e);const D=(0,n.hot)(e,[x,l])},36:function(e,t,r){"use strict";r.d(t,{O:function(){return h}});var n=r(170);const o={name:"Editor Common Params API",layer:"SITE",public:!0};var a=r(749),i=r(817),s=r(611),c=r.n(s);function u(e){var t,r,n,o,a;const i=new URLSearchParams(window.location.search),s=i.get("DmSource")||"",u=i.get("BoltSource")||"",d=null==(t=window.editorModel)?void 0:t.editorSessionId,p=null==(r=window.editorModel)?void 0:r.userProfile,g=null==(n=window.editorModel)?void 0:n.permissionsInfo,f=(()=>{const e=g.permissions.includes("EDITORX.ENFORCE_PRESENCE_VISIBILITY");return!!window.responsiveEditorModel.identity.impersonatingUserId||!e})(),m="true"===i.get("presetManager"),h=window.responsiveEditorModel.environment.isDebug,y=(()=>{const e="true"===i.get("disableSave"),t="true"===i.get("forceAutoSave");return l(e,t,f)})(),v=i.get("justThisPreset")||"",P=i.get("justThisAlbum")||"",I=window.serviceTopology,E=null!=I&&I.scriptsDomainUrl?I.scriptsDomainUrl+"/services/santa-resources/dist/editor/responsive/":"",w=i.get("appMarketParams")||"",S=i.get("mainPageIdOverride")||"",A=i.get("etpa")||"",b=i.get("openPanel")||"",T="true"===i.get("autoDevMode"),M="editorXMigration",x=i.get(M),D="editorXDSLUpload",_="true"===i.get(D),O=i.get("editorXImport"),C="true"===i.get("debugMigration"),R="true"===i.get("debugTours"),L="oAuth",k=i.get(L),N="state",U=i.get(N),j="code",H=i.get(j),G="headless",F=i.get(G),z=i.get("cssPerBreakpoint"),B=z?"true"===z:void 0,V=()=>new URLSearchParams(window.location.search),J=window.location.origin+"/html/editor/web/renderer/render",W=()=>V().get("metaSiteId")||"",X={zh:{script:"Hant"}};return{oAuth:k,state:U,code:H,editorXHeadlessParamName:G,headless:F,getUrlParams:V,getMetasiteId:W,getDocumentId:()=>function(){const e=c().last(location.pathname.split("/"));return e&&c().first(/.{8}-.{4}-.{4}-.{4}-.{12}/g.exec(e))}()||V().get("documentId")||V().get("siteId")||"",getDmSource:()=>s,getBoltSource:()=>u,getESI:()=>d,getUserProfile:()=>p,getPermissionsInfo:()=>g,getLocale:function(e){var t;const r=window.editorModel.languageCode;return e?new Intl.Locale(r,{script:null==(t=X[r])?void 0:t.script}):r},getAssetsBasePath:()=>E,getCommonConfig:()=>window.commonConfig,getCommonConfigStringValue:()=>encodeURIComponent(JSON.stringify(window.commonConfig)),getResponsiveEditorModel:()=>window.responsiveEditorModel,getOpenPanel:()=>{if(!b)return{};const e=b.split(".");return{id:e.length?e[0]:"",options:e.length>1?e.slice(1):[]}},serviceTopology:I,isProduction:()=>!window.location.hostname.startsWith("local")&&window.location.hostname.endsWith(".com"),isSupportUser:f,isQA:window.responsiveEditorModel.environment.isAutomation,freeDomainBaseUrl:null==(o=window)||null==(o=o.responsiveEditorModel)||null==(o=o.configuration)||null==(o=o.site)?void 0:o.freeDomainBaseUrl,browserTitlePrefix:null==(a=window)||null==(a=a.responsiveEditorModel)||null==(a=a.configuration)||null==(a=a.application)?void 0:a.titlePrefix,isPresetManager:m,justThisPreset:v,justThisAlbum:P,isDebug:h,isDebugTours:R,isDevMode:T,disableSave:y,forcePresence:"true"===i.get("forcePresence"),appMarketParams:w,etpa:A,previewURL:J,editorXMigrationParamName:M,editorXMigration:x,editorXDSLUpload:_,editorXDSLUploadParamName:D,editorXOAuthParamName:L,editorXStateParamName:N,editorXCodeParamName:j,debugMigration:C,getEditorURL:()=>{const e=""+window.location.origin+window.location.pathname;return new URL(e+"?metaSiteId="+W())},getDisableDSCache:()=>"true"===i.get("disableDsCache"),loadOnPage:S,editorXDebugParamName:"debug",editorXResponsiveSourceParamName:"responsiveEditorPackagesSource",editorXImport:O,editorXImportParamName:"editorXImport",removeParamsFromURL:e=>{const t=new URL(window.location.href);e.forEach((e=>{t.searchParams.delete(e)})),window.history.replaceState({},"",t.toString())},cssPerBreakpoint:B}}const l=(e,t,r)=>r?!t:e;const d={name:"Sequence Loader API",layer:"SITE",public:!0},p={name:"editorx-migration-skip-ep",layer:"DATA_SERVICE",getDependencyAPIs(){return[a.G,d]},extend(e){const t=e.getAPI(a.G),r=e.getAPI(d);t.editorXMigration&&!t.oAuth||(r.skip("post-migration"),r.skip("migration-done"))}};e=r.hmd(e);const g={name:"EDITOR_COMMON_PARAMS_API",layer:"SITE",declareAPIs(){return[o]},attach(e){e.contributeAPI(o,(()=>u()))}},f={name:"EDITOR_PARAMS_API",layer:"SITE",getDependencyAPIs(){return[o]},declareAPIs(){return[a.G]},attach(e){e.contributeAPI(a.G,(()=>function(e){var t;return{...e.getAPI(o),configName:"responsive",dsOrigin:null==(t=window)||null==(t=t.responsiveEditorModel)||null==(t=t.configuration)||null==(t=t.fedops)?void 0:t.appName,editorPrefixName:"editorX"}}(e)))}},m={name:"EDITOR_PARAMS_BI",layer:"SITE",getDependencyAPIs(){return[a.G,i.m7]},attach(e){const t=e.getAPI(a.G),r=e.getAPI(i.m7);r.contributeParam(e,"esi",(()=>t.getESI())),r.contributeParam(e,"msid",(()=>t.getMetasiteId())),r.contributeParam(e,"dmVersion",(()=>t.getDmSource()))}},h=(0,n.hot)(e,[f,m,g,p])},635:function(e,t,r){"use strict";r.d(t,{J:function(){return ue}});var n=r(170);const o={name:"Editor Instance Pure API",layer:"SITE",public:!0};var a=r(989);const i={name:"Editor Instance API",layer:"SITE",public:!0},s={name:"FETCH_PURE_API",layer:"SITE",public:!0};var c=r(535),u=r(749),l=r(706),d=r(15),p=HttpClient;function g(e,t){if(t(e))return e;throw new EnhancedError("Value '"+e+"' cannot be cast to type '"+(t.typeName||t.name||t)+"'","safeCast",{value:e})}class f extends Error{constructor(e,t="",r={}){super(e),this.message=e,this.category=t,this.extraData=r,this.name="EnhancedError"}}const m=(e,t)=>e+(t.length>0?": "+t:"");class h extends f{constructor(e,t,r){var n,o;void 0===t&&(t=""),void 0===r&&(r={}),super(t,"EnhancedHttpError",{...r,url:null==(n=e.config)?void 0:n.url,method:null==(o=e.config)?void 0:o.method,cause:e}),this.name="EnhancedHttpError",Object.setPrototypeOf(this,h.prototype)}}class y extends f{constructor(e,t){void 0===e&&(e=""),void 0===t&&(t={});const r="HttpTypeError";super(m(r,e),r,t),this.name="HttpTypeError",Object.setPrototypeOf(this,y.prototype)}}class v extends h{constructor(e,t,r){void 0===t&&(t=""),void 0===r&&(r={}),super(e,m("GeneralError",t),r),this.name="GeneralError",Object.setPrototypeOf(this,v.prototype)}}class P extends h{constructor(e,t,r){void 0===t&&(t=""),void 0===r&&(r={}),super(e,m("NetworkError",t),r),this.name="NetworkError",Object.setPrototypeOf(this,P.prototype)}}class I extends h{constructor(e,t,r){void 0===t&&(t=""),void 0===r&&(r={}),super(e,m("NotFoundError",t),r),this.name="NotFoundError",Object.setPrototypeOf(this,I.prototype)}}class E extends h{constructor(e,t,r){void 0===t&&(t=""),void 0===r&&(r={}),super(e,m("BadRequestError",t),r),this.name="BadRequestError",Object.setPrototypeOf(this,E.prototype)}}class w extends h{constructor(e,t,r){void 0===t&&(t=""),void 0===r&&(r={}),super(e,m("UnauthorizedError",t),r),this.name="UnauthorizedError",Object.setPrototypeOf(this,w.prototype)}}class S extends h{constructor(e,t,r){void 0===t&&(t=""),void 0===r&&(r={}),super(e,m("ServerError",t),r),this.name="ServerError",Object.setPrototypeOf(this,S.prototype)}}const A={GeneralError:v,ServerError:S,BadRequestError:E,UnauthorizedError:w,NotFoundError:I,NetworkError:P,HttpTypeError:y},b=async function(e,t,r,n,o){void 0===r&&(r=e=>!0),void 0===n&&(n=!0);const a=await M(e,t);try{return{...a,data:T(a.data,r)}}catch(e){if(n)throw e;return null==o||o.error("HttpClient TypeCast Error",e,{requestOptions:t}),{...a,data:a.data}}},T=(e,t)=>{try{return g(e,t)}catch(e){throw new A.HttpTypeError(void 0,e)}},M=async(e,t)=>{try{const r=O(t),n=await e.request(r);return _(n)}catch(e){return p.HttpClient.isHttpError(e)?x(e):D(e)}},x=e=>{if(e.response){const{message:t}=e,r="object"==typeof e.response.data?e.response.data:{};if(400===e.response.status)throw new A.BadRequestError(e,t,r);if(401===e.response.status)throw new A.UnauthorizedError(e,t,r);if(404===e.response.status)throw new A.NotFoundError(e,t,r);if(e.response.status>=500)throw new A.ServerError(e,t,r);throw new A.GeneralError(e,t,r)}throw e.request?new A.NetworkError(e):new A.GeneralError(e,e.message)},D=e=>{if((e=>e instanceof Error)(e))throw e;throw new Error(e)},_=e=>{let{data:t,headers:r}=e;return{data:t,date:r.date}},O=e=>"function"==typeof e?t=>({...e(t),validateStatus:C}):{...e,validateStatus:C},C=e=>e>=200&&e<300;function R(e,t){const r=e.getAPI(u.G).isQA;return{async request(n,o){const a=(c=o,Boolean(c)&&"function"==typeof c.predicate?(i=o.typeName,s=o.predicate,(()=>{const e=e=>s(e);return e.typeName=i,e})()):o);var i,s,c;try{return await b(t,n,a,r,e.log)}catch(t){throw e.log.error("HttpClient Request Error",t,((e,t)=>{const r="function"==typeof e?e({isSSR:!1,host:""}):e;return{type:t.name,...r}})(n,t)),t}},isErrorOfType:(t,r)=>((t,r)=>(A[r]||e.log.error("HttpClient: Error type "+r+"does not exist"),t instanceof A[r]))(t,r)}}var L=r(611),k=r.n(L),N=r(712);function U(){return"object"==typeof self?self:r.g}function j(e){var t=function(e){return function(){var e=function(){if("object"==typeof document)return document}();if(e&&e.cookie)return decodeURIComponent(e.cookie).split(";");return[]}().filter((function(t){return e===t.split("=")[0].trim()}))[0]}(e);return t?t.split("=")[1]:""}var H="XSRF-TOKEN",G="x-xsrf-token";var F="x-wix-brand";function z(){var e,t=function(){var e=U();if(e&&e.commonConfig&&"string"==typeof e.commonConfig.brand)return e.commonConfig.brand;return""}();return(e={})[F]=t,e}function B(){return function(){var e=U();if(e&&e.consentPolicyManager&&"function"==typeof e.consentPolicyManager._getConsentPolicyHeader)return e.consentPolicyManager._getConsentPolicyHeader();return}()||function(){var e=U();if(e&&e.Wix&&e.Wix.Utils&&"function"==typeof e.Wix.Utils._getConsentPolicyHeader)return e.Wix.Utils._getConsentPolicyHeader();return}()||{}}var V=r(158);function J(){return void 0!==V&&null!=(null===(e=V.versions)||void 0===e?void 0:e.node)&&(!!V.env.TEAMCITY_VERSION||!!V.env.BUILDKITE);var e}r(158);var W=["consentPolicy","consentPolicyHeader"],X={bsi:"BSI"};var Q=function(){var e,t=function(){var e=U(),t=null==e?void 0:e.commonConfig;if(!t)return null;var r={},n=!1;return Object.keys(t).forEach((function(e){var o=X[e];o?(r[o]=t[e],n=!0):W.indexOf(e)<0&&"function"!=typeof t[e]&&(r[e]=t[e],n=!0)})),n?r:null}(),r=t?JSON.stringify(t):"";return(e={}).commonConfig=encodeURIComponent(r),e},q=r(144),$=r.n(q),Z="x-wix-linguist";function K(e){var t,r=e.lang,n=e.locale,o=e.isPrimaryLanguage,a=e.signedInstance;if(function(e){var t=e.lang,r=e.locale,n=e.isPrimaryLanguage;return t&&r&&/^(true|false)$/.test((null==n?void 0:n.toString())||"")}({lang:r,locale:n,isPrimaryLanguage:o})){var i=function(e){try{var t=null==e?void 0:e.split(".")[1];if(t)return JSON.parse($().decode(t)).instanceId}catch(e){}}(a);if(void 0!==i)return(t={})[Z]=[r,n,null==o?void 0:o.toString(),i].join("|"),t}return{}}!function(e){function t(t,r){return e.call(this,"WixHeadersParsingError: ".concat(t," evaluated with ").concat(JSON.stringify(r)," but should be a string!"))||this}(0,N.ZT)(t,e)}(Error);var Y=function(e){function t(t,r,n){return e.call(this,"WixHeadersValidationError: expected ".concat(r," to be ").concat(t," but got ").concat(JSON.stringify(n)))||this}return(0,N.ZT)(t,e),t}(Error);function ee(e){void 0===e&&(e={}),function(e){(function(e,t){if("boolean"!=typeof t)throw new Y("boolean",e,t)})("opts.csrf",e.csrf),function(e,t){if("string"!=typeof t)throw new Y("string",e,t)}("opts.signedInstance",e.signedInstance)}(e=(0,N.pi)({csrf:!0,signedInstance:""},e));var t,r,n,o,a,i=[z(),B(),(n=e.signedInstance,{authorization:n}),(t=e.artifactId,"",r="",{"X-Wix-Client-Artifact-Id":null!=t?t:J()?"":r}),Q(),K((0,N.pi)({signedInstance:e.signedInstance},e.multilingualOptions))];return e.csrf&&i.push((a=j(H),(o={})[G]=a,o)),i.filter((function(e){return Object.values(e).every((function(e){return e}))})).reduce((function(e,t){return(0,N.pi)((0,N.pi)({},e),t)}),{})}const te=async(e,t,r)=>{const n=ie(r.params);return oe("GET",""+e+n,t,r)},re=async(e,t,r)=>{const n=ie(r.params);return oe("POST",""+e+n,t,r)},ne=async(e,t,r)=>{const n=ie(r.params);return oe("DELETE",""+e+n,t,r)},oe=async(e,t,r,n)=>{try{const o=await fetch(t,{method:e,headers:{...se(!!n.useWixHeaders),authorization:r},...["POST","DELETE","PUT"].includes(e)&&{body:JSON.stringify(n.body)}});if(o.ok){const e=await o.text(),t=ae(e);return{body:t,date:o.headers.get("Date")}}throw new Error("call to "+t+" failed")}catch(e){return Promise.reject(e)}},ae=e=>{if(""===e)return{};try{return JSON.parse(e)}catch(e){return{}}},ie=e=>{if(!e||k().isEmpty(e))return"";const t=k().mapValues(e,(e=>e?e.toString():""));return k().isEmpty(t)?"":"?"+new URLSearchParams(t)},se=e=>{const t={"Content-Type":"application/json","Access-Control-Allow-Origin":"*"};if(!e)return t;const r=ee();return k().pickBy({...t,"x-wix-brand":r["x-wix-brand"],"x-wix-client-artifact-id":r["X-Wix-Client-Artifact-Id"],"x-xsrf-token":r["x-xsrf-token"]},(e=>!k().isNil(e)))};function ce(e){const t=e.getAPI(i),r=e.getAPI(s),n=()=>{var e;return null!=(e=t.getPlatformSignedInstance())?e:""},o={};return{get(e,t,a){return void 0===a&&(a=o),r.get(e,t,(e=>({...e,authorizationHeader:e.useAuth?n():""}))(a))},post:function(e,t){return void 0===t&&(t=o),re(e,t.useAuth?n():"",t)},delete:function(e,t){return void 0===t&&(t=o),ne(e,t.useAuth?n():"",t)},getWithAuth:(e,t)=>te(e,n(),{...o,params:t}),postWithAuth:(e,t,r)=>re(e,n(),{...o,params:r,body:t}),deleteWithAuth:(e,t,r)=>ne(e,n(),{...o,params:r,body:t}),putWithAuth:(e,t,r)=>(async(e,t,r)=>{const n=ie(r.params);return oe("PUT",""+e+n,t,r)})(e,n(),{...o,params:r,body:t})}}e=r.hmd(e);const ue=(0,n.hot)(e,[{name:"remote-services-pure-entry-point",layer:"SITE",getDependencyAPIs(){return[]},declareAPIs(){return[o]},attach(e){e.contributeAPI(o,(()=>function(e){return{getPlatformSignedInstance(t){const r=t.platform.editorApps.META_SITE.applicationId,n=t.platform.getAppDataByApplicationId(r).instance;return n||e.log.error("Platform instance not available"),n}}}(e)))}},{name:"remote-services-entry-point",layer:"SITE",getDependencyAPIs(){return[a.ny,o]},declareAPIs(){return[i]},attach(e){e.contributeAPI(i,(()=>function(e){const t=e.getAPI(a.ny),r=e.getAPI(o);return{getPlatformSignedInstance(){return r.getPlatformSignedInstance(t)}}}(e)))}},{name:"fetch-entry-point",layer:"SITE",getDependencyAPIs(){return[i,s]},declareAPIs(){return[c.T]},attach(e){e.contributeAPI(c.T,(function(){return ce(e)}))}},{name:"fetch-pure-entry-point",layer:"SITE",declareAPIs(){return[s]},attach(e){e.contributeAPI(s,(()=>function(e){const t={};return{get(r,n,o){var a;return void 0===o&&(o=t),e.get(n,null!=(a=o.authorizationHeader)?a:"",o).then((e=>e.body)).then((e=>g(e,r)))},post(r,n,o){var a;return void 0===o&&(o=t),e.post(n,null!=(a=o.authorizationHeader)?a:"",o).then((e=>e.body)).then((e=>g(e,r)))},_delete(r,n,o){var a;return void 0===o&&(o=t),e._delete(n,null!=(a=o.authorizationHeader)?a:"",o).then((e=>e.body)).then((e=>g(e,r)))}}}({get:te,post:re,_delete:ne})))}},{name:"http-client-api-entry-point",layer:"SITE",getDependencyAPIs(){return[i,u.G]},declareAPIs(){return[l.P]},attach(e){e.contributeAPI(l.P,(()=>function(e){const{getPlatformSignedInstance:t}=e.getAPI(i);return{...R(e,new p.HttpClient({getAppToken:()=>t()||""}))}}(e)))}},{name:"unauthorized-http-client-api-entry-point",layer:"SITE",getDependencyAPIs(){return[u.G]},declareAPIs(){return[d.D]},attach(e){e.contributeAPI(d.D,(()=>function(e){return{...R(e,new p.HttpClient)}}(e)))}}])},649:function(e,t,r){"use strict";r.d(t,{a:function(){return i}});var n=r(170);const o={name:"Async Utility API",layer:"FLOWS",public:!0};const a={name:"Async Utility Entry Point",layer:"FLOWS",getDependencyAPIs(){return[]},declareAPIs(){return[o]},attach(e){e.contributeAPI(o,(()=>function(e){async function t(e){return new Promise((t=>setTimeout(t,e)))}return{waitForCondition:async function(e,r,n){let o,a=!1;for(setTimeout((()=>{a=!0}),r);!a;){try{if(await e())return}catch(e){o=e}await t(100)}if(o)throw o;throw new Error(n||"Wait for condition failed after "+(r||45e3)/1e3+" seconds timeout.")},wait:t}}()))}};e=r.hmd(e);const i=(0,n.hot)(e,[a])},140:function(e,t,r){"use strict";r.d(t,{r:function(){return u}});var n=r(170),o=r(817),a=r(611),i=r.n(a);const s={name:"Responsive BI Extensions"},c={name:"onErrorExtensionSlotKey"};e=r.hmd(e);const u=(0,n.hot)(e,[{name:"responsive-bi-entry-point",layer:"SITE",declareAPIs(){return[o.ts,o.m7,o.gg,o.pE]},attach(e){const t=e.declareSlot(s);e.contributeAPI(o.m7,(()=>(e=>{const t=t=>{const r=e.getItems().find((e=>e.contribution.key===t));try{return null==r?void 0:r.contribution.value()}catch(e){console.error("ResponsiveBIContribution value not found",e)}};return window.responsiveEditorModel.bi.fedopsLoggerFactory.updateDefaults({customParams:()=>JSON.stringify(e.getItems().reduce(((e,t)=>{const{key:r,value:n}=t.contribution,o=n();return(0,a.isUndefined)(o)||(0,a.isNull)(o)||(e[r]=o),e}),{}))}),{contributeParam(r,n,o){"msid"===n&&window.responsiveEditorModel.bi.registerMsidProvider((()=>String(o()))),window.responsiveEditorModel.bi.fedopsLoggerFactory.updateDefaults({[n]:()=>t(n)}),window.responsiveEditorModel.bi.biLoggerFactory.updateDefaults({[n]:()=>t(n)}),window.responsiveEditorModel.bi.errorsBILoggerFactory.updateDefaults({[n]:()=>t(n)}),e.contribute(r,{key:n,value:o})}}})(t)),{disableMonitoring:!0}),e.contributeAPI(o.ts,(()=>function(e){const t=window.responsiveEditorModel.bi.biLoggerFactory.logger();return{report(r,n){void 0===n&&(n=!1);const o={...r,params:i().mapValues(r.params,(e=>i().isObject(e)?JSON.stringify(e):e))},a=t.report(o);return"catch"in a&&a.catch(e.log.error),n&&t.flush().catch(e.log.error),a}}}(e)),{disableMonitoring:!0}),e.contributeAPI(o.gg,(()=>(e=>{const t=e.declareSlot(c),{errorHandling:r}=window.responsiveEditorModel;return null==r||r.addGlobalEventProcessor(((e,n)=>{try{t.getItems().forEach((t=>t.contribution(e,n)))}catch(e){const t=e;setTimeout((()=>r.captureException(t)),0)}return e})),{contributeOnError(e,r){t.contribute(e,r)},captureException(e,t){null==r||r.captureException(e,t)}}})(e)),{disableMonitoring:!0}),e.contributeAPI(o.pE,(()=>window.responsiveEditorModel.bi.fedopsLogger),{disableMonitoring:!0})}}])},989:function(e,t,r){"use strict";r.d(t,{ny:function(){return n}});const n={name:"Document Services API",layer:"SITE",public:!0}},535:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});const n={name:"Fetch API",layer:"SITE",public:!0}},749:function(e,t,r){"use strict";r.d(t,{G:function(){return n}});const n={name:"Editor Params API",layer:"SITE",public:!0}},653:function(e,t,r){"use strict";r.d(t,{Q:function(){return n}});const n={name:"EXPERIMENTS_API",layer:"SITE",public:!0}},706:function(e,t,r){"use strict";r.d(t,{P:function(){return n}});const n={name:"Http Client API",layer:"SITE",public:!0}},15:function(e,t,r){"use strict";r.d(t,{D:function(){return n}});const n={name:"Unauthenticatd Http Client API",layer:"SITE",public:!0}},817:function(e,t,r){"use strict";r.d(t,{gg:function(){return i},m7:function(){return o},pE:function(){return a},ts:function(){return n}});const n={name:"Responsive BI API",layer:"SITE",public:!0},o={name:"Responsive BI Contribution API",layer:"SITE",public:!0},a={name:"Responsive Fedops API",layer:"SITE",public:!0},i={name:"Responsive Error Handling API",layer:"SITE",public:!0}},144:function(e,t,r){var n;/*! https://mths.be/base64 v1.0.0 by @mathias | MIT license */e=r.nmd(e),function(o){var a=t,i=(e&&e.exports,"object"==typeof r.g&&r.g);i.global!==i&&i.window;var s=function(e){this.message=e};(s.prototype=new Error).name="InvalidCharacterError";var c=function(e){throw new s(e)},u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g,d={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var t,r,n,o,a=e.length%3,i="",s=-1,l=e.length-a;++s<l;)t=e.charCodeAt(s)<<16,r=e.charCodeAt(++s)<<8,n=e.charCodeAt(++s),i+=u.charAt((o=t+r+n)>>18&63)+u.charAt(o>>12&63)+u.charAt(o>>6&63)+u.charAt(63&o);return 2==a?(t=e.charCodeAt(s)<<8,r=e.charCodeAt(++s),i+=u.charAt((o=t+r)>>10)+u.charAt(o>>4&63)+u.charAt(o<<2&63)+"="):1==a&&(o=e.charCodeAt(s),i+=u.charAt(o>>2)+u.charAt(o<<4&63)+"=="),i},decode:function(e){var t=(e=String(e).replace(l,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var r,n,o=0,a="",i=-1;++i<t;)n=u.indexOf(e.charAt(i)),r=o%4?64*r+n:n,o++%4&&(a+=String.fromCharCode(255&r>>(-2*o&6)));return a},version:"1.0.0"};void 0===(n=function(){return d}.call(t,r,t,e))||(e.exports=n)}()},158:function(e){var t,r,n=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=i(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function f(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new g(e,t)),1!==c.length||u||i(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},611:function(e){"use strict";e.exports=_},170:function(e){"use strict";e.exports=repluggable},213:function(e,t,r){var n=r(174);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},662:function(e,t,r){var n=r(114).default;e.exports=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},174:function(e,t,r){var n=r(114).default,o=r(662);e.exports=function(e){var t=o(e,"string");return"symbol"===n(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},114:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},712:function(e,t,r){"use strict";r.d(t,{ZT:function(){return o},mG:function(){return i},pi:function(){return a}});var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)};function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};function i(e,t,r,n){return new(r||(r=Promise))((function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function s(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,s)}c((n=n.apply(e,t||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){"use strict";var e=r(159),t=r(328),n=r(461),o=r(36),a=r(635),i=r(649),s=r(544),c=r(481);const u={name:"META_SITE_API",layer:"DATA_SERVICE",public:!0};var l=r(535),d=r(749),p=r(653),g=r(706);const f=e=>!(null==e||!e.metaSite),m=[{name:"META_SITE_API_ENTRY_POINT",layer:"DATA_SERVICE",declareAPIs(){return[u]},getDependencyAPIs(){return[l.T,d.G,p.Q,g.P]},attach(e){e.contributeAPI(u,(()=>(e=>{const t=e.getAPI(p.Q),r=e.getAPI(g.P),n=e.getAPI(l.T),o=e.getAPI(d.G);return{getMetaSiteDetails:async()=>{const e=o.getEditorURL().origin+"/_api/msm/v1/meta-site/get";if(t.enabled("specs.responsive-editor.HttpClient2")){const{data:t}=await r.request({method:"GET",url:e},f);return t.metaSite}return(await n.get(f,e,{useAuth:!0})).metaSite}}})(e)))}}];var h=r(571),y=r(669),v=r(140),P=r(712),I=ReactI18next;function E(e,t){if(!e||"[object Object]"!==e.toString())return t;if(!t)return{};const r={};for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const o=e[n],a=/specs\.abTranslate\.(.*?)\.(.*)$/.exec(n);if(a){const e=a[2],[n,i]=e.split("abSpec-");let s;s=i?Array.from(new Set(Object.keys(t).filter((e=>e.includes(i))).map((e=>e.split("|abTranslate")[0])))):[n],s.forEach((e=>{if(r[e]=e,"0"!==o){const t=i?`|${i}`:"";r[e]=`${e}|abTranslate_${o}${t}`}}))}}for(const e in r){const n=Object.prototype.hasOwnProperty.call(r,e),o=t[r[e]];n&&o&&(t[e]=t[r[e]])}return t}function w(e,t,r,n){return(0,P.mG)(this,void 0,void 0,(function*(){return e?(yield function(e,t,r,n){return(0,P.mG)(this,void 0,void 0,(function*(){const o=E(window.responsiveEditorModel.experiments,r);if(e.isInitialized?e.addResources("en","translation",o):yield e.use(I.initReactI18next).init({debug:window.responsiveEditorModel.environment.isDebug&&!window.responsiveEditorModel.environment.isAutomation,lng:t,fallbackLng:"en",keySeparator:"$",resources:{en:{translation:o}}}),"en"!==t)try{const r=yield n(t);e.addResources(t,"translation",E(window.responsiveEditorModel.experiments,r.default))}catch(e){console.log(`Failed to load language chunk for: ${t}`,e)}return e}))}(e.i18next,e.locale,r,n),t):t}))}((e,t)=>{if(window.repluggableArtifacts=window.repluggableArtifacts||{},window.featuresMap=window.featuresMap||{},t.featuresMap&&Object.entries(t.featuresMap).forEach((([e,t])=>{window.featuresMap[e]=window.featuresMap[e]||new Set,t.forEach((t=>window.featuresMap[e].add(t)))})),"enJson"in t){const r=e=>w(e,t.packages,t.enJson,t.langResolver);window.repluggableArtifacts[e]=r}else window.repluggableArtifacts[e]=t.packages})("responsive-editor-common-infra",{packages:{ResponsiveBIPackage:v.r,DiagnosticsPackage:e.T,ExperimentsPackage:s.n,LocalDataPackage:t.f,HeadlessHostPackage:c.j,MetaSitePackage:m,UserPreferencesPackage:y.WZ,EditorParamsPackage:o.O,RemoteServicesPackage:a.J,EditorUtilityApisPackage:i.a,PingPackage:h.j,PageLifecyclePackage:n.v}})}()}();
//# sourceMappingURL=responsive-editor-common-infra.bundle.min.js.map